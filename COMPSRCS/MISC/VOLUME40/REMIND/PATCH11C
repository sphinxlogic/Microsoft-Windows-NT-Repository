Newsgroups: comp.sources.misc
From: dfs@doe.carleton.ca (David F. Skoll)
Subject: v40i169:  remind - A replacement for calendar, Patch11c/5
Message-ID: <1993Nov26.165754.5599@sparky.sterling.com>
X-Md4-Signature: 9f529ae0f2d2d72fbbbb4180c102b96c
Sender: kent@sparky.sterling.com (Kent Landfield)
Reply-To: dfs@doe.carleton.ca (David F. Skoll)
Organization: Carleton University
Date: Fri, 26 Nov 1993 16:57:54 GMT
Approved: kent@sparky.sterling.com

Submitted-by: dfs@doe.carleton.ca (David F. Skoll)
Posting-number: Volume 40, Issue 169
Archive-name: remind/patch11c
Environment: UNIX, MS-DOS, OS/2
Patch-To: remind: Volume 33, Issue 58-69

#!/bin/sh
# this is Shar.03 (part 3 of Remind-3.0/Patch-11/part)
# do not concatenate these parts, unpack them in order with /bin/sh
# file patch.11 continued
#
if touch 2>&1 | fgrep 'amc' > /dev/null
 then TOUCH=touch
 else TOUCH=true
fi
if test ! -r shar3_seq_.tmp; then
	echo "Please unpack part 1 first!"
	exit 1
fi
(read Scheck
 if test "$Scheck" != 3; then
	echo "Please unpack part $Scheck next!"
	exit 1
 else
	exit 0
 fi
) < shar3_seq_.tmp || exit 1
echo "x - Continuing file patch.11"
sed 's/^X//' << 'SHAR_EOF' >> patch.11 &&
X  in the \fIbody\fR of a \fBREM\fR command, returns that command's trigger date.
X  .TP
X  .B trigger(d_date [,t_time [,i_utcflag]])
X! Returns a string suitable for use in a \fBREM\fR command, allowing you to
X! calculate trigger dates in advance.  (See the section "Expression pasting"
X! for more information.)  Normally, the \fIdate\fR and \fItime\fR are
X! the local date and time; however, if \fIutcflag\fR is non-zero, the
X! \fIdate\fR and \fItime\fR are interpreted as UTC times, and are
X! converted to local time.  Examples:
X  .RS
X  .PP
X  trigger('1993/04/01')
X--- 2164,2178 ----
X  in the \fIbody\fR of a \fBREM\fR command, returns that command's trigger date.
X  .TP
X  .B trigger(d_date [,t_time [,i_utcflag]])
X! Returns a string suitable for use in a \fBREM\fR command, allowing you
X! to calculate trigger dates in advance.  (See the section "Expression
X! pasting" for more information.)  Note that \fBtrigger()\fR
X! \fIalways\fR returns its result in English, even for foreign-language
X! versions of \fBRemind\fR.  This is to avoid problems with certain C
X! libraries which do not handle accented characters properly.  Normally,
X! the \fIdate\fR and \fItime\fR are the local date and time; however, if
X! \fIutcflag\fR is non-zero, the \fIdate\fR and \fItime\fR are
X! interpreted as UTC times, and are converted to local time.  Examples:
X  .RS
X  .PP
X  trigger('1993/04/01')
X***************
X*** 3129,3135 ****
X  A foreign-language version of \fBRemind\fR will accept either the English
X  or foreign-language names of weekdays and months in a reminder script.
X  However, for compatibility between versions of \fBRemind\fR, you should
X! use only the English names in your scripts.
X  .PP
X  .SH THE HEBREW CALENDAR
X  .PP
X--- 3141,3150 ----
X  A foreign-language version of \fBRemind\fR will accept either the English
X  or foreign-language names of weekdays and months in a reminder script.
X  However, for compatibility between versions of \fBRemind\fR, you should
X! use only the English names in your scripts.  Also, if your C compiler or
X! run-time libraries are not "8-bit clean" or don't understand the ISO-Latin
X! character set, month or day names with accented letters may not be
X! recognized.
X  .PP
X  .SH THE HEBREW CALENDAR
X  .PP
X***************
X*** 3499,3508 ****
X  .PP
X  David F. Skoll wrote \fBRemind\fR.  The moon code was copied largely
X  unmodified from "moontool" by John Walker.  The Hebrew calendar
X! support was taken from "hdate" by Amos Shapir.  The authors of the
X! language files are listed in the header file "lang.h" which comes with
X! \fBRemind\fR.  OS/2 support was provided initially by Darrel
X! Hankerson; more complete OS/2 support was done by Russ Herman.
X  .SH BUGS
X  .PP
X  There's no good reason why read-only system variables are not
X--- 3514,3537 ----
X  .PP
X  David F. Skoll wrote \fBRemind\fR.  The moon code was copied largely
X  unmodified from "moontool" by John Walker.  The Hebrew calendar
X! support was taken from "hdate" by Amos Shapir.  OS/2 support was
X! done by Darrel Hankerson, Russ Herman, and Norman Walsh.  The
X! supported foreign languages and their translators are:
X! .PP
X! \fBGerman\fR --
X! Wolfgang Thronicke
X! .PP
X! \fBDutch\fR --
X! Willem Kasdorp and Erik-Jan Vens
X! .PP
X! \fBFinnish\fR --
X! Mikko Silvonen
X! .PP
X! \fBFrench\fR --
X! Laurent Duperval
X! .PP
X! \fBNorwegian\fR --
X! Trygve Randen
X  .SH BUGS
X  .PP
X  There's no good reason why read-only system variables are not
X*** ../prev/sort.c	Tue Oct 19 11:19:14 1993
X--- ./sort.c	Tue Nov 16 17:40:25 1993
X***************
X*** 166,186 ****
X  	          IssueSortBanner(cur->trigdate);
X  		  olddate = cur->trigdate;
X                 }
X- #ifdef __OS2__
X-                PutlPopUp(cur->text);
X- #else
X                 printf("%s", cur->text);
X- #endif
X              }
X  	    break;
X  
X  	 case MSF_TYPE:
X! #ifdef __OS2__
X!             StartPopUp();
X! #endif
X  	    FillParagraph(cur->text);
X- #ifdef __OS2__
X-             EndPopUp();
X  #endif
X  	    break;
X  
X--- 166,180 ----
X  	          IssueSortBanner(cur->trigdate);
X  		  olddate = cur->trigdate;
X                 }
X                 printf("%s", cur->text);
X              }
X  	    break;
X  
X  	 case MSF_TYPE:
X! #ifdef OS2_POPUP
X! 	    FillParagraph(cur->text, 0);
X! #else
X  	    FillParagraph(cur->text);
X  #endif
X  	    break;
X  
X***************
X*** 224,230 ****
X     if (DoCoerce(STR_TYPE, &v)) return;
X     if (!DoSubstFromString(v.v.str, SubstBuffer, jul, NO_TIME))
X        if (*SubstBuffer) printf("%s\n", SubstBuffer);
X!    DestroyValue(&v);
X  }
X  
X  /***************************************************************/
X--- 218,224 ----
X     if (DoCoerce(STR_TYPE, &v)) return;
X     if (!DoSubstFromString(v.v.str, SubstBuffer, jul, NO_TIME))
X        if (*SubstBuffer) printf("%s\n", SubstBuffer);
X!    DestroyValue(v);
X  }
X  
X  /***************************************************************/
X*** ../prev/test-rem.bat	Wed Oct 20 15:10:42 1993
X--- ./test-rem.bat	Mon Nov 15 14:25:36 1993
X***************
X*** 12,18 ****
X--- 12,23 ----
X  
X  del test.out > nul
X  set TEST_GETENV=foo bar baz
X+ if exist ..\msdos-ex\remind.exe goto bcc
X+ remind -e -dxte ./test.rem 16 feb 1991 > test.out
X+ goto cmp
X+ :bcc
X  ..\msdos-ex\remind -e -dxte .\test.rem 16 feb 1991 > test.out
X+ :cmp
X  echo n | comp test.out test1.cmp
X  if errorlevel 1 goto oops
X  echo "Remind:  Acceptance test PASSED"
X*** ../prev/test-rem.cmd	Wed Oct 20 15:10:33 1993
X--- ./test-rem.cmd	Mon Nov 15 14:25:36 1993
X***************
X*** 13,19 ****
X--- 13,24 ----
X  del /f test.out > nul
X  setlocal
X  set TEST_GETENV=foo bar baz
X+ if exist ..\os2-ex\remind.exe goto bcc
X+ remind -e -dxte ./test.rem 16 feb 1991 > .\test.out
X+ goto cmp
X+ :bcc
X  ..\os2-ex\remind -e -dxte .\test.rem 16 feb 1991 > .\test.out
X+ :cmp
X  echo n | comp test.out test2.cmp
X  if errorlevel 1 goto oops
X  echo "Remind:  Acceptance test PASSED"
X*** ../prev/test.cmp	Tue Oct 12 16:22:53 1993
X--- ./test.cmp	Thu Oct 21 12:39:24 1993
X***************
X*** 631,637 ****
X  "a05" + "6" => "a056"
X  value("a056") => "SDFJHSDF KSJDFH KJSDFH KSJDFH"
X  set a058 version()
X! version() => "03.00.10"
X  set a059 wkday(today())
X  today() => 1991/02/16
X  wkday(1991/02/16) => "Saturday"
X--- 631,637 ----
X  "a05" + "6" => "a056"
X  value("a056") => "SDFJHSDF KSJDFH KJSDFH KSJDFH"
X  set a058 version()
X! version() => "03.00.11"
X  set a059 wkday(today())
X  today() => 1991/02/16
X  wkday(1991/02/16) => "Saturday"
X***************
X*** 772,778 ****
X          a048  "foo"
X          a067  "INT"
X          a039  "February"
X!         a058  "03.00.10"
X          a077  "1992 92
X  "
X          a049  21
X--- 772,778 ----
X          a048  "foo"
X          a067  "INT"
X          a039  "February"
X!         a058  "03.00.11"
X          a077  "1992 92
X  "
X          a049  21
X*** ../prev/test1.cmp	Wed Oct 13 10:50:25 1993
X--- ./test1.cmp	Thu Oct 21 12:42:22 1993
X***************
X*** 6,12 ****
X  # 	./test-rem  # From WITHIN Remind source directory!
X  
X  REM MSG Today is [hebday(today())] [hebmon(today())] [hebyear(today())]
X! ./test.rem(8): Trig = Saturday, 16 February, 1991
X  Reminders for Saturday, 16th February, 1991:
X  
X  today() => 1991/02/16
X--- 6,12 ----
X  # 	./test-rem  # From WITHIN Remind source directory!
X  
X  REM MSG Today is [hebday(today())] [hebmon(today())] [hebyear(today())]
X! .\test.rem(8): Trig = Saturday, 16 February, 1991
X  Reminders for Saturday, 16th February, 1991:
X  
X  today() => 1991/02/16
X***************
X*** 26,32 ****
X  hebdate(1, "Tishrey") => 1991/09/09
X  trigger(1991/09/09) => "9 September 1991"
X  Leaving UserFN _h() => "9 September 1991"
X! ./test.rem(11): Trig = Monday, 9 September, 1991
X  [_h(2,  "Tishrey")] MSG Rosh Hashana 2
X  Entering UserFN _h(2, "Tishrey")
X  x => 2
X--- 26,32 ----
X  hebdate(1, "Tishrey") => 1991/09/09
X  trigger(1991/09/09) => "9 September 1991"
X  Leaving UserFN _h() => "9 September 1991"
X! .\test.rem(11): Trig = Monday, 9 September, 1991
X  [_h(2,  "Tishrey")] MSG Rosh Hashana 2
X  Entering UserFN _h(2, "Tishrey")
X  x => 2
X***************
X*** 34,40 ****
X  hebdate(2, "Tishrey") => 1991/09/10
X  trigger(1991/09/10) => "10 September 1991"
X  Leaving UserFN _h() => "10 September 1991"
X! ./test.rem(12): Trig = Tuesday, 10 September, 1991
X  [_h(3,  "Tishrey")] MSG Tzom Gedalia
X  Entering UserFN _h(3, "Tishrey")
X  x => 3
X--- 34,40 ----
X  hebdate(2, "Tishrey") => 1991/09/10
X  trigger(1991/09/10) => "10 September 1991"
X  Leaving UserFN _h() => "10 September 1991"
X! .\test.rem(12): Trig = Tuesday, 10 September, 1991
X  [_h(3,  "Tishrey")] MSG Tzom Gedalia
X  Entering UserFN _h(3, "Tishrey")
X  x => 3
X***************
X*** 42,48 ****
X  hebdate(3, "Tishrey") => 1991/09/11
X  trigger(1991/09/11) => "11 September 1991"
X  Leaving UserFN _h() => "11 September 1991"
X! ./test.rem(13): Trig = Wednesday, 11 September, 1991
X  [_h(10, "Tishrey")] MSG Yom Kippur
X  Entering UserFN _h(10, "Tishrey")
X  x => 10
X--- 42,48 ----
X  hebdate(3, "Tishrey") => 1991/09/11
X  trigger(1991/09/11) => "11 September 1991"
X  Leaving UserFN _h() => "11 September 1991"
X! .\test.rem(13): Trig = Wednesday, 11 September, 1991
X  [_h(10, "Tishrey")] MSG Yom Kippur
X  Entering UserFN _h(10, "Tishrey")
X  x => 10
X***************
X*** 50,56 ****
X  hebdate(10, "Tishrey") => 1991/09/18
X  trigger(1991/09/18) => "18 September 1991"
X  Leaving UserFN _h() => "18 September 1991"
X! ./test.rem(14): Trig = Wednesday, 18 September, 1991
X  [_h(15, "Tishrey")] MSG Sukkot 1
X  Entering UserFN _h(15, "Tishrey")
X  x => 15
X--- 50,56 ----
X  hebdate(10, "Tishrey") => 1991/09/18
X  trigger(1991/09/18) => "18 September 1991"
X  Leaving UserFN _h() => "18 September 1991"
X! .\test.rem(14): Trig = Wednesday, 18 September, 1991
X  [_h(15, "Tishrey")] MSG Sukkot 1
X  Entering UserFN _h(15, "Tishrey")
X  x => 15
X***************
X*** 58,64 ****
X  hebdate(15, "Tishrey") => 1991/09/23
X  trigger(1991/09/23) => "23 September 1991"
X  Leaving UserFN _h() => "23 September 1991"
X! ./test.rem(15): Trig = Monday, 23 September, 1991
X  [_h(25, "Kislev")]  MSG Channuka
X  Entering UserFN _h(25, "Kislev")
X  x => 25
X--- 58,64 ----
X  hebdate(15, "Tishrey") => 1991/09/23
X  trigger(1991/09/23) => "23 September 1991"
X  Leaving UserFN _h() => "23 September 1991"
X! .\test.rem(15): Trig = Monday, 23 September, 1991
X  [_h(25, "Kislev")]  MSG Channuka
X  Entering UserFN _h(25, "Kislev")
X  x => 25
X***************
X*** 66,72 ****
X  hebdate(25, "Kislev") => 1991/12/02
X  trigger(1991/12/02) => "2 December 1991"
X  Leaving UserFN _h() => "2 December 1991"
X! ./test.rem(16): Trig = Monday, 2 December, 1991
X  [_h(10, "Tevet")]   MSG Asara B'Tevet
X  Entering UserFN _h(10, "Tevet")
X  x => 10
X--- 66,72 ----
X  hebdate(25, "Kislev") => 1991/12/02
X  trigger(1991/12/02) => "2 December 1991"
X  Leaving UserFN _h() => "2 December 1991"
X! .\test.rem(16): Trig = Monday, 2 December, 1991
X  [_h(10, "Tevet")]   MSG Asara B'Tevet
X  Entering UserFN _h(10, "Tevet")
X  x => 10
X***************
X*** 74,80 ****
X  hebdate(10, "Tevet") => 1991/12/17
X  trigger(1991/12/17) => "17 December 1991"
X  Leaving UserFN _h() => "17 December 1991"
X! ./test.rem(17): Trig = Tuesday, 17 December, 1991
X  [_h(15, "Shvat")]   MSG Tu B'Shvat
X  Entering UserFN _h(15, "Shvat")
X  x => 15
X--- 74,80 ----
X  hebdate(10, "Tevet") => 1991/12/17
X  trigger(1991/12/17) => "17 December 1991"
X  Leaving UserFN _h() => "17 December 1991"
X! .\test.rem(17): Trig = Tuesday, 17 December, 1991
X  [_h(15, "Shvat")]   MSG Tu B'Shvat
X  Entering UserFN _h(15, "Shvat")
X  x => 15
X***************
X*** 82,88 ****
X  hebdate(15, "Shvat") => 1992/01/20
X  trigger(1992/01/20) => "20 January 1992"
X  Leaving UserFN _h() => "20 January 1992"
X! ./test.rem(18): Trig = Monday, 20 January, 1992
X  [_h(15, "Adar A")]  MSG Purim Katan
X  Entering UserFN _h(15, "Adar A")
X  x => 15
X--- 82,88 ----
X  hebdate(15, "Shvat") => 1992/01/20
X  trigger(1992/01/20) => "20 January 1992"
X  Leaving UserFN _h() => "20 January 1992"
X! .\test.rem(18): Trig = Monday, 20 January, 1992
X  [_h(15, "Adar A")]  MSG Purim Katan
X  Entering UserFN _h(15, "Adar A")
X  x => 15
X***************
X*** 90,96 ****
X  hebdate(15, "Adar A") => 1992/02/19
X  trigger(1992/02/19) => "19 February 1992"
X  Leaving UserFN _h() => "19 February 1992"
X! ./test.rem(19): Trig = Wednesday, 19 February, 1992
X  [_h(14, "Adar")]    MSG Purim
X  Entering UserFN _h(14, "Adar")
X  x => 14
X--- 90,96 ----
X  hebdate(15, "Adar A") => 1992/02/19
X  trigger(1992/02/19) => "19 February 1992"
X  Leaving UserFN _h() => "19 February 1992"
X! .\test.rem(19): Trig = Wednesday, 19 February, 1992
X  [_h(14, "Adar")]    MSG Purim
X  Entering UserFN _h(14, "Adar")
X  x => 14
X***************
X*** 98,104 ****
X  hebdate(14, "Adar") => 1991/02/28
X  trigger(1991/02/28) => "28 February 1991"
X  Leaving UserFN _h() => "28 February 1991"
X! ./test.rem(20): Trig = Thursday, 28 February, 1991
X  [_h(15, "Nisan")]   MSG Pesach
X  Entering UserFN _h(15, "Nisan")
X  x => 15
X--- 98,104 ----
X  hebdate(14, "Adar") => 1991/02/28
X  trigger(1991/02/28) => "28 February 1991"
X  Leaving UserFN _h() => "28 February 1991"
X! .\test.rem(20): Trig = Thursday, 28 February, 1991
X  [_h(15, "Nisan")]   MSG Pesach
X  Entering UserFN _h(15, "Nisan")
X  x => 15
X***************
X*** 106,112 ****
X  hebdate(15, "Nisan") => 1991/03/30
X  trigger(1991/03/30) => "30 March 1991"
X  Leaving UserFN _h() => "30 March 1991"
X! ./test.rem(21): Trig = Saturday, 30 March, 1991
X  [_h(27, "Nisan")]   MSG Yom HaShoah
X  Entering UserFN _h(27, "Nisan")
X  x => 27
X--- 106,112 ----
X  hebdate(15, "Nisan") => 1991/03/30
X  trigger(1991/03/30) => "30 March 1991"
X  Leaving UserFN _h() => "30 March 1991"
X! .\test.rem(21): Trig = Saturday, 30 March, 1991
X  [_h(27, "Nisan")]   MSG Yom HaShoah
X  Entering UserFN _h(27, "Nisan")
X  x => 27
X***************
X*** 114,120 ****
X  hebdate(27, "Nisan") => 1991/04/11
X  trigger(1991/04/11) => "11 April 1991"
X  Leaving UserFN _h() => "11 April 1991"
X! ./test.rem(22): Trig = Thursday, 11 April, 1991
X  [_h(4,  "Iyar")]    MSG Yom HaZikaron
X  Entering UserFN _h(4, "Iyar")
X  x => 4
X--- 114,120 ----
X  hebdate(27, "Nisan") => 1991/04/11
X  trigger(1991/04/11) => "11 April 1991"
X  Leaving UserFN _h() => "11 April 1991"
X! .\test.rem(22): Trig = Thursday, 11 April, 1991
X  [_h(4,  "Iyar")]    MSG Yom HaZikaron
X  Entering UserFN _h(4, "Iyar")
X  x => 4
X***************
X*** 122,128 ****
X  hebdate(4, "Iyar") => 1991/04/18
X  trigger(1991/04/18) => "18 April 1991"
X  Leaving UserFN _h() => "18 April 1991"
X! ./test.rem(23): Trig = Thursday, 18 April, 1991
X  [_h(5,  "Iyar")]    MSG Yom Ha'atzmaut
X  Entering UserFN _h(5, "Iyar")
X  x => 5
X--- 122,128 ----
X  hebdate(4, "Iyar") => 1991/04/18
X  trigger(1991/04/18) => "18 April 1991"
X  Leaving UserFN _h() => "18 April 1991"
X! .\test.rem(23): Trig = Thursday, 18 April, 1991
X  [_h(5,  "Iyar")]    MSG Yom Ha'atzmaut
X  Entering UserFN _h(5, "Iyar")
X  x => 5
X***************
X*** 130,136 ****
X  hebdate(5, "Iyar") => 1991/04/19
X  trigger(1991/04/19) => "19 April 1991"
X  Leaving UserFN _h() => "19 April 1991"
X! ./test.rem(24): Trig = Friday, 19 April, 1991
X  [_h(28, "Iyar")]    MSG Yom Yerushalayim
X  Entering UserFN _h(28, "Iyar")
X  x => 28
X--- 130,136 ----
X  hebdate(5, "Iyar") => 1991/04/19
X  trigger(1991/04/19) => "19 April 1991"
X  Leaving UserFN _h() => "19 April 1991"
X! .\test.rem(24): Trig = Friday, 19 April, 1991
X  [_h(28, "Iyar")]    MSG Yom Yerushalayim
X  Entering UserFN _h(28, "Iyar")
X  x => 28
X***************
X*** 138,144 ****
X  hebdate(28, "Iyar") => 1991/05/12
X  trigger(1991/05/12) => "12 May 1991"
X  Leaving UserFN _h() => "12 May 1991"
X! ./test.rem(25): Trig = Sunday, 12 May, 1991
X  [_h(6,  "Sivan")]   MSG Shavuot
X  Entering UserFN _h(6, "Sivan")
X  x => 6
X--- 138,144 ----
X  hebdate(28, "Iyar") => 1991/05/12
X  trigger(1991/05/12) => "12 May 1991"
X  Leaving UserFN _h() => "12 May 1991"
X! .\test.rem(25): Trig = Sunday, 12 May, 1991
X  [_h(6,  "Sivan")]   MSG Shavuot
X  Entering UserFN _h(6, "Sivan")
X  x => 6
X***************
X*** 146,152 ****
X  hebdate(6, "Sivan") => 1991/05/19
X  trigger(1991/05/19) => "19 May 1991"
X  Leaving UserFN _h() => "19 May 1991"
X! ./test.rem(26): Trig = Sunday, 19 May, 1991
X  [_h(9,  "Av")]      MSG Tish'a B'Av
X  Entering UserFN _h(9, "Av")
X  x => 9
X--- 146,152 ----
X  hebdate(6, "Sivan") => 1991/05/19
X  trigger(1991/05/19) => "19 May 1991"
X  Leaving UserFN _h() => "19 May 1991"
X! .\test.rem(26): Trig = Sunday, 19 May, 1991
X  [_h(9,  "Av")]      MSG Tish'a B'Av
X  Entering UserFN _h(9, "Av")
X  x => 9
X***************
X*** 154,160 ****
X  hebdate(9, "Av") => 1991/07/20
X  trigger(1991/07/20) => "20 July 1991"
X  Leaving UserFN _h() => "20 July 1991"
X! ./test.rem(27): Trig = Saturday, 20 July, 1991
X  
X  # Test some jahrzeit cases
X  fset _i(x,y,z,a) trigger(hebdate(x,y,z,a))
X--- 154,160 ----
X  hebdate(9, "Av") => 1991/07/20
X  trigger(1991/07/20) => "20 July 1991"
X  Leaving UserFN _h() => "20 July 1991"
X! .\test.rem(27): Trig = Saturday, 20 July, 1991
X  
X  # Test some jahrzeit cases
X  fset _i(x,y,z,a) trigger(hebdate(x,y,z,a))
X***************
X*** 168,174 ****
X  hebdate(30, "Heshvan", 1991/02/16, 5759) => 1991/11/07
X  trigger(1991/11/07) => "7 November 1991"
X  Leaving UserFN _i() => "7 November 1991"
X! ./test.rem(31): Trig = Thursday, 7 November, 1991
X  [_i(30, "Heshvan", today(), 5760)] MSG Complete-Defective
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Heshvan", 1991/02/16, 5760)
X--- 168,174 ----
X  hebdate(30, "Heshvan", 1991/02/16, 5759) => 1991/11/07
X  trigger(1991/11/07) => "7 November 1991"
X  Leaving UserFN _i() => "7 November 1991"
X! .\test.rem(31): Trig = Thursday, 7 November, 1991
X  [_i(30, "Heshvan", today(), 5760)] MSG Complete-Defective
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Heshvan", 1991/02/16, 5760)
X***************
X*** 179,185 ****
X  hebdate(30, "Heshvan", 1991/02/16, 5760) => 1991/11/07
X  trigger(1991/11/07) => "7 November 1991"
X  Leaving UserFN _i() => "7 November 1991"
X! ./test.rem(32): Trig = Thursday, 7 November, 1991
X  [_i(30, "Heshvan", today(), 5761)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Heshvan", 1991/02/16, 5761)
X--- 179,185 ----
X  hebdate(30, "Heshvan", 1991/02/16, 5760) => 1991/11/07
X  trigger(1991/11/07) => "7 November 1991"
X  Leaving UserFN _i() => "7 November 1991"
X! .\test.rem(32): Trig = Thursday, 7 November, 1991
X  [_i(30, "Heshvan", today(), 5761)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Heshvan", 1991/02/16, 5761)
X***************
X*** 187,193 ****
X  y => "Heshvan"
X  z => 1991/02/16
X  a => 5761
X! hebdate(30, "Heshvan", 1991/02/16, 5761) => ./test.rem(33): 30 Heshvan 5761: Invalid Hebrew date
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X--- 187,193 ----
X  y => "Heshvan"
X  z => 1991/02/16
X  a => 5761
X! hebdate(30, "Heshvan", 1991/02/16, 5761) => .\test.rem(33): 30 Heshvan 5761: Invalid Hebrew date
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X***************
X*** 201,207 ****
X  hebdate(30, "Kislev", 1991/02/16, 5759) => 1991/12/07
X  trigger(1991/12/07) => "7 December 1991"
X  Leaving UserFN _i() => "7 December 1991"
X! ./test.rem(35): Trig = Saturday, 7 December, 1991
X  [_i(30, "Kislev", today(), 5760)] MSG Complete-Defective
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Kislev", 1991/02/16, 5760)
X--- 201,207 ----
X  hebdate(30, "Kislev", 1991/02/16, 5759) => 1991/12/07
X  trigger(1991/12/07) => "7 December 1991"
X  Leaving UserFN _i() => "7 December 1991"
X! .\test.rem(35): Trig = Saturday, 7 December, 1991
X  [_i(30, "Kislev", today(), 5760)] MSG Complete-Defective
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Kislev", 1991/02/16, 5760)
X***************
X*** 212,218 ****
X  hebdate(30, "Kislev", 1991/02/16, 5760) => 1991/12/07
X  trigger(1991/12/07) => "7 December 1991"
X  Leaving UserFN _i() => "7 December 1991"
X! ./test.rem(36): Trig = Saturday, 7 December, 1991
X  [_i(30, "Kislev", today(), 5761)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Kislev", 1991/02/16, 5761)
X--- 212,218 ----
X  hebdate(30, "Kislev", 1991/02/16, 5760) => 1991/12/07
X  trigger(1991/12/07) => "7 December 1991"
X  Leaving UserFN _i() => "7 December 1991"
X! .\test.rem(36): Trig = Saturday, 7 December, 1991
X  [_i(30, "Kislev", today(), 5761)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Kislev", 1991/02/16, 5761)
X***************
X*** 220,226 ****
X  y => "Kislev"
X  z => 1991/02/16
X  a => 5761
X! hebdate(30, "Kislev", 1991/02/16, 5761) => ./test.rem(37): 30 Kislev 5761: Invalid Hebrew date
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X--- 220,226 ----
X  y => "Kislev"
X  z => 1991/02/16
X  a => 5761
X! hebdate(30, "Kislev", 1991/02/16, 5761) => .\test.rem(37): 30 Kislev 5761: Invalid Hebrew date
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X***************
X*** 234,240 ****
X  hebdate(30, "Adar A", 1991/02/16, 5755) => 1992/03/05
X  trigger(1992/03/05) => "5 March 1992"
X  Leaving UserFN _i() => "5 March 1992"
X! ./test.rem(39): Trig = Thursday, 5 March, 1992
X  [_i(30, "Adar A", today(), 5756)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Adar A", 1991/02/16, 5756)
X--- 234,240 ----
X  hebdate(30, "Adar A", 1991/02/16, 5755) => 1992/03/05
X  trigger(1992/03/05) => "5 March 1992"
X  Leaving UserFN _i() => "5 March 1992"
X! .\test.rem(39): Trig = Thursday, 5 March, 1992
X  [_i(30, "Adar A", today(), 5756)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Adar A", 1991/02/16, 5756)
X***************
X*** 242,248 ****
X  y => "Adar A"
X  z => 1991/02/16
X  a => 5756
X! hebdate(30, "Adar A", 1991/02/16, 5756) => ./test.rem(40): No Adar A in 5756
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  [_i(29, "Adar A", today(), 5755)] MSG Leap
X--- 242,248 ----
X  y => "Adar A"
X  z => 1991/02/16
X  a => 5756
X! hebdate(30, "Adar A", 1991/02/16, 5756) => .\test.rem(40): No Adar A in 5756
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  [_i(29, "Adar A", today(), 5755)] MSG Leap
X***************
X*** 255,261 ****
X  hebdate(29, "Adar A", 1991/02/16, 5755) => 1991/03/15
X  trigger(1991/03/15) => "15 March 1991"
X  Leaving UserFN _i() => "15 March 1991"
X! ./test.rem(41): Trig = Friday, 15 March, 1991
X  [_i(29, "Adar A", today(), 5756)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(29, "Adar A", 1991/02/16, 5756)
X--- 255,261 ----
X  hebdate(29, "Adar A", 1991/02/16, 5755) => 1991/03/15
X  trigger(1991/03/15) => "15 March 1991"
X  Leaving UserFN _i() => "15 March 1991"
X! .\test.rem(41): Trig = Friday, 15 March, 1991
X  [_i(29, "Adar A", today(), 5756)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(29, "Adar A", 1991/02/16, 5756)
X***************
X*** 263,269 ****
X  y => "Adar A"
X  z => 1991/02/16
X  a => 5756
X! hebdate(29, "Adar A", 1991/02/16, 5756) => ./test.rem(42): No Adar A in 5756
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X--- 263,269 ----
X  y => "Adar A"
X  z => 1991/02/16
X  a => 5756
X! hebdate(29, "Adar A", 1991/02/16, 5756) => .\test.rem(42): No Adar A in 5756
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X***************
X*** 270,483 ****
X  # Test each possible case of the basic reminders.
X  
X  REM MSG Every Day
X! ./test.rem(46): Trig = Saturday, 16 February, 1991
X  Every Day
X  
X  
X  REM 18 MSG Every 18th 
X! ./test.rem(48): Trig = Monday, 18 February, 1991
X  REM 15 MSG Every 15th
X! ./test.rem(49): Trig = Friday, 15 March, 1991
X  
X  REM Feb MSG February
X! ./test.rem(51): Trig = Saturday, 16 February, 1991
X  February
X  
X  REM Jan MSG January
X! ./test.rem(52): Trig = Wednesday, 1 January, 1992
X  REM March MSG March
X! ./test.rem(53): Trig = Friday, 1 March, 1991
X  
X  REM 13 Jan MSG 13 Jan
X! ./test.rem(55): Trig = Monday, 13 January, 1992
X  REM 15 Feb MSG 15 Feb
X! ./test.rem(56): Trig = Saturday, 15 February, 1992
X  REM 28 Feb MSG 28 Feb
X! ./test.rem(57): Trig = Thursday, 28 February, 1991
X  REM 29 Feb MSG 29 Feb
X! ./test.rem(58): Trig = Saturday, 29 February, 1992
X  REM 5 Mar MSG 5 Mar
X! ./test.rem(59): Trig = Tuesday, 5 March, 1991
X  
X  REM 1990 MSG 1990
X! ./test.rem(61): Expired
X  REM 1991 MSG 1991
X! ./test.rem(62): Trig = Saturday, 16 February, 1991
X  1991
X  
X  REM 1992 MSG 1991
X! ./test.rem(63): Trig = Wednesday, 1 January, 1992
X  
X  REM 1 1990 MSG 1 1990
X! ./test.rem(65): Expired
X  REM 29 1991 MSG 29 1991
X! ./test.rem(66): Trig = Friday, 29 March, 1991
X  REM 29 1992 MSG 29 1992
X! ./test.rem(67): Trig = Wednesday, 29 January, 1992
X  REM 16 1991 MSG 16 1991
X! ./test.rem(68): Trig = Saturday, 16 February, 1991
X  16 1991
X  
X  
X  REM Jan 1990 MSG Jan 1990
X! ./test.rem(70): Expired
X  REM Feb 1991 MSG Feb 1991
X! ./test.rem(71): Trig = Saturday, 16 February, 1991
X  Feb 1991
X  
X  REM Dec 1991 MSG Dec 1991
X! ./test.rem(72): Trig = Sunday, 1 December, 1991
X  REM May 1992 MSG May 1992
X! ./test.rem(73): Trig = Friday, 1 May, 1992
X  
X  REM 1 Jan 1991 MSG 1 Jan 1991
X! ./test.rem(75): Expired
X  REM 16 Feb 1991 MSG 16 Feb 1991
X! ./test.rem(76): Trig = Saturday, 16 February, 1991
X  16 Feb 1991
X  
X  REM 29 Dec 1992 MSG 29 Dec 1992
X! ./test.rem(77): Trig = Tuesday, 29 December, 1992
X  
X  REM Sun MSG Sun
X! ./test.rem(79): Trig = Sunday, 17 February, 1991
X  REM Fri Sat Tue MSG Fri Sat Tue
X! ./test.rem(80): Trig = Saturday, 16 February, 1991
X  Fri Sat Tue
X  
X  
X  REM Sun 16 MSG Sun 16
X! ./test.rem(82): Trig = Sunday, 17 February, 1991
X  REM Mon Tue Wed Thu Fri 1 MSG Mon Tue Wed Thu Fri 1
X! ./test.rem(83): Trig = Friday, 1 March, 1991
X  
X  REM Sun Feb MSG Sun Feb
X! ./test.rem(85): Trig = Sunday, 17 February, 1991
X  REM Mon Tue March MSG Mon Tue March
X! ./test.rem(86): Trig = Monday, 4 March, 1991
X  
X  REM Sun 16 Feb MSG Sun 16 Feb
X! ./test.rem(88): Trig = Sunday, 17 February, 1991
X  REM Mon Tue 10 March MSG Mon Tue 10 March
X! ./test.rem(89): Trig = Monday, 11 March, 1991
X  
X  REM Sat Sun 1991 MSG Sat Sun 1991
X! ./test.rem(91): Trig = Saturday, 16 February, 1991
X  Sat Sun 1991
X  
X  REM Mon Tue 1992 MSG Mon Tue 1992
X! ./test.rem(92): Trig = Monday, 6 January, 1992
X  
X  REM Sun 16 1991 MSG Sun 16 1991
X! ./test.rem(94): Trig = Sunday, 17 February, 1991
X  REM Mon Tue Wed Thu Fri 1 1992 MSG Mon Tue Wed Thu Fri 1 1992
X! ./test.rem(95): Trig = Wednesday, 1 January, 1992
X  
X  REM Mon Feb 1991 MSG Mon Feb 1991
X! ./test.rem(97): Trig = Monday, 18 February, 1991
X  REM Tue Jan 1992 MSG Tue Jan 1992
X! ./test.rem(98): Trig = Tuesday, 7 January, 1992
X  
X  REM Sun Mon 16 Feb 1991 MSG Sun Mon 16 Feb 1991
X! ./test.rem(100): Trig = Sunday, 17 February, 1991
X  REM Tue 28 Jan 1992 MSG Tue 28 Jan 1992
X! ./test.rem(101): Trig = Tuesday, 28 January, 1992
X  
X  # Try some Backs
X  CLEAR-OMIT-CONTEXT
X  REM 1 -1 OMIT sat sun MSG 1 -1 OMIT Sat Sun
X! ./test.rem(105): Trig = Thursday, 28 February, 1991
X  REM 1 --1 OMIT sat sun MSG 1 --1 OMIT Sat Sun
X! ./test.rem(106): Trig = Thursday, 28 February, 1991
X  
X  OMIT 28 Feb
X  REM 1 -1 OMIT sat sun MSG 1 -1 OMIT Sat Sun (28 Feb omitted)
X! ./test.rem(109): Trig = Wednesday, 27 February, 1991
X  REM 1 --1 OMIT sat sun MSG 1 --1 OMIT Sat Sun (28 Feb omitted)
X! ./test.rem(110): Trig = Thursday, 28 February, 1991
X  
X  CLEAR-OMIT-CONTEXT
X  
X  # Try out UNTIL
X  REM Wed UNTIL 21 Feb 1991 MSG Wed UNTIL 21 Feb 1991
X! ./test.rem(115): Trig = Wednesday, 20 February, 1991
X  
X  # Try playing with the OMIT context
X  
X  OMIT 28 Feb 1991
X  REM 1 Mar -1 MSG 1 mar -1 (28feb91 omitted)
X! ./test.rem(120): Trig = Wednesday, 27 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1 (28Feb91 omitted)
X! ./test.rem(121): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE (28Feb91 omitted)
X! ./test.rem(122): Trig = Wednesday, 27 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP (28Feb91 omitted)
X! ./test.rem(123): Trig = Friday, 28 February, 1992
X  REM 28 Feb AFTER MSG 28 Feb AFTER (28Feb91 omitted)
X! ./test.rem(124): Trig = Friday, 1 March, 1991
X  
X  PUSH-OMIT-CONTEXT
X  CLEAR-OMIT-CONTEXT
X  REM 1 Mar -1 MSG 1 mar -1
X! ./test.rem(128): Trig = Thursday, 28 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1
X! ./test.rem(129): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE
X! ./test.rem(130): Trig = Thursday, 28 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP 
X! ./test.rem(131): Trig = Thursday, 28 February, 1991
X  REM 28 Feb AFTER MSG 28 Feb AFTER
X! ./test.rem(132): Trig = Thursday, 28 February, 1991
X  
X  POP-OMIT-CONTEXT
X  REM 1 Mar -1 MSG 1 mar -1 (28feb91 omitted)
X! ./test.rem(135): Trig = Wednesday, 27 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1 (28Feb91 omitted)
X! ./test.rem(136): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE (28Feb91 omitted)
X! ./test.rem(137): Trig = Wednesday, 27 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP (28Feb91 omitted)
X! ./test.rem(138): Trig = Friday, 28 February, 1992
X  REM 28 Feb AFTER MSG 28 Feb AFTER (28Feb91 omitted)
X! ./test.rem(139): Trig = Friday, 1 March, 1991
X  
X  
X  REM 13 March 1991 *1 UNTIL 19 March 1991 MSG 13-19 Mar 91
X! ./test.rem(142): Trig = Wednesday, 13 March, 1991
X   
X  # Test BACK
X  CLEAR-OMIT-CONTEXT
X  REM 18 Feb 1991 +1 MSG 18 Feb 1991 +1
X! ./test.rem(146): Trig = Monday, 18 February, 1991
X  
X  OMIT 17 Feb 1991
X  REM 18 Feb 1991 +1 MSG 18 Feb 1991 +1 (17Feb91 omitted)
X! ./test.rem(149): Trig = Monday, 18 February, 1991
X  18 Feb 1991 +1 (17Feb91 omitted)
X  
X  REM 18 Feb 1991 ++1 MSG 18 Feb 1991 ++1 (17Feb91 omitted)
X! ./test.rem(150): Trig = Monday, 18 February, 1991
X  
X  CLEAR-OMIT-CONTEXT
X  # Test the scanfrom clause
X  REM Fri SATISFY 1
X! ./test.rem(154): Trig = Friday, 22 February, 1991
X  OMIT [trigger(trigdate())]
X  trigdate() => 1991/02/22
X  trigger(1991/02/22) => "22 February 1991"
X  REM Fri after MSG 23 Feb 1991
X! ./test.rem(156): Trig = Saturday, 23 February, 1991
X  CLEAR-OMIT-CONTEXT
X  REM Fri SCANFROM [trigger(today()-7)] SATISFY 1
X  today() => 1991/02/16
X  1991/02/16 - 7 => 1991/02/09
X  trigger(1991/02/09) => "9 February 1991"
X! ./test.rem(158): Trig = Friday, 15 February, 1991
X  OMIT [trigger(trigdate())]
X  trigdate() => 1991/02/15
X  trigger(1991/02/15) => "15 February 1991"
X  REM Fri after MSG 16 Feb 1991
X! ./test.rem(160): Trig = Saturday, 16 February, 1991
X  16 Feb 1991
X  
X  CLEAR-OMIT-CONTEXT
X--- 270,483 ----
X  # Test each possible case of the basic reminders.
X  
X  REM MSG Every Day
X! .\test.rem(46): Trig = Saturday, 16 February, 1991
X  Every Day
X  
X  
X  REM 18 MSG Every 18th 
X! .\test.rem(48): Trig = Monday, 18 February, 1991
X  REM 15 MSG Every 15th
X! .\test.rem(49): Trig = Friday, 15 March, 1991
X  
X  REM Feb MSG February
X! .\test.rem(51): Trig = Saturday, 16 February, 1991
X  February
X  
X  REM Jan MSG January
X! .\test.rem(52): Trig = Wednesday, 1 January, 1992
X  REM March MSG March
X! .\test.rem(53): Trig = Friday, 1 March, 1991
X  
X  REM 13 Jan MSG 13 Jan
X! .\test.rem(55): Trig = Monday, 13 January, 1992
X  REM 15 Feb MSG 15 Feb
X! .\test.rem(56): Trig = Saturday, 15 February, 1992
X  REM 28 Feb MSG 28 Feb
X! .\test.rem(57): Trig = Thursday, 28 February, 1991
X  REM 29 Feb MSG 29 Feb
X! .\test.rem(58): Trig = Saturday, 29 February, 1992
X  REM 5 Mar MSG 5 Mar
X! .\test.rem(59): Trig = Tuesday, 5 March, 1991
X  
X  REM 1990 MSG 1990
X! .\test.rem(61): Expired
X  REM 1991 MSG 1991
X! .\test.rem(62): Trig = Saturday, 16 February, 1991
X  1991
X  
X  REM 1992 MSG 1991
X! .\test.rem(63): Trig = Wednesday, 1 January, 1992
X  
X  REM 1 1990 MSG 1 1990
X! .\test.rem(65): Expired
X  REM 29 1991 MSG 29 1991
X! .\test.rem(66): Trig = Friday, 29 March, 1991
X  REM 29 1992 MSG 29 1992
X! .\test.rem(67): Trig = Wednesday, 29 January, 1992
X  REM 16 1991 MSG 16 1991
X! .\test.rem(68): Trig = Saturday, 16 February, 1991
X  16 1991
X  
X  
X  REM Jan 1990 MSG Jan 1990
X! .\test.rem(70): Expired
X  REM Feb 1991 MSG Feb 1991
X! .\test.rem(71): Trig = Saturday, 16 February, 1991
X  Feb 1991
X  
X  REM Dec 1991 MSG Dec 1991
X! .\test.rem(72): Trig = Sunday, 1 December, 1991
X  REM May 1992 MSG May 1992
X! .\test.rem(73): Trig = Friday, 1 May, 1992
X  
X  REM 1 Jan 1991 MSG 1 Jan 1991
X! .\test.rem(75): Expired
X  REM 16 Feb 1991 MSG 16 Feb 1991
X! .\test.rem(76): Trig = Saturday, 16 February, 1991
X  16 Feb 1991
X  
X  REM 29 Dec 1992 MSG 29 Dec 1992
X! .\test.rem(77): Trig = Tuesday, 29 December, 1992
X  
X  REM Sun MSG Sun
X! .\test.rem(79): Trig = Sunday, 17 February, 1991
X  REM Fri Sat Tue MSG Fri Sat Tue
X! .\test.rem(80): Trig = Saturday, 16 February, 1991
X  Fri Sat Tue
X  
X  
X  REM Sun 16 MSG Sun 16
X! .\test.rem(82): Trig = Sunday, 17 February, 1991
X  REM Mon Tue Wed Thu Fri 1 MSG Mon Tue Wed Thu Fri 1
X! .\test.rem(83): Trig = Friday, 1 March, 1991
X  
X  REM Sun Feb MSG Sun Feb
X! .\test.rem(85): Trig = Sunday, 17 February, 1991
X  REM Mon Tue March MSG Mon Tue March
X! .\test.rem(86): Trig = Monday, 4 March, 1991
X  
X  REM Sun 16 Feb MSG Sun 16 Feb
X! .\test.rem(88): Trig = Sunday, 17 February, 1991
X  REM Mon Tue 10 March MSG Mon Tue 10 March
X! .\test.rem(89): Trig = Monday, 11 March, 1991
X  
X  REM Sat Sun 1991 MSG Sat Sun 1991
X! .\test.rem(91): Trig = Saturday, 16 February, 1991
X  Sat Sun 1991
X  
X  REM Mon Tue 1992 MSG Mon Tue 1992
X! .\test.rem(92): Trig = Monday, 6 January, 1992
X  
X  REM Sun 16 1991 MSG Sun 16 1991
X! .\test.rem(94): Trig = Sunday, 17 February, 1991
X  REM Mon Tue Wed Thu Fri 1 1992 MSG Mon Tue Wed Thu Fri 1 1992
X! .\test.rem(95): Trig = Wednesday, 1 January, 1992
X  
X  REM Mon Feb 1991 MSG Mon Feb 1991
X! .\test.rem(97): Trig = Monday, 18 February, 1991
X  REM Tue Jan 1992 MSG Tue Jan 1992
X! .\test.rem(98): Trig = Tuesday, 7 January, 1992
X  
X  REM Sun Mon 16 Feb 1991 MSG Sun Mon 16 Feb 1991
X! .\test.rem(100): Trig = Sunday, 17 February, 1991
X  REM Tue 28 Jan 1992 MSG Tue 28 Jan 1992
X! .\test.rem(101): Trig = Tuesday, 28 January, 1992
X  
X  # Try some Backs
X  CLEAR-OMIT-CONTEXT
X  REM 1 -1 OMIT sat sun MSG 1 -1 OMIT Sat Sun
X! .\test.rem(105): Trig = Thursday, 28 February, 1991
X  REM 1 --1 OMIT sat sun MSG 1 --1 OMIT Sat Sun
X! .\test.rem(106): Trig = Thursday, 28 February, 1991
X  
X  OMIT 28 Feb
X  REM 1 -1 OMIT sat sun MSG 1 -1 OMIT Sat Sun (28 Feb omitted)
X! .\test.rem(109): Trig = Wednesday, 27 February, 1991
X  REM 1 --1 OMIT sat sun MSG 1 --1 OMIT Sat Sun (28 Feb omitted)
X! .\test.rem(110): Trig = Thursday, 28 February, 1991
X  
X  CLEAR-OMIT-CONTEXT
X  
X  # Try out UNTIL
X  REM Wed UNTIL 21 Feb 1991 MSG Wed UNTIL 21 Feb 1991
X! .\test.rem(115): Trig = Wednesday, 20 February, 1991
X  
X  # Try playing with the OMIT context
X  
X  OMIT 28 Feb 1991
X  REM 1 Mar -1 MSG 1 mar -1 (28feb91 omitted)
X! .\test.rem(120): Trig = Wednesday, 27 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1 (28Feb91 omitted)
X! .\test.rem(121): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE (28Feb91 omitted)
X! .\test.rem(122): Trig = Wednesday, 27 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP (28Feb91 omitted)
X! .\test.rem(123): Trig = Friday, 28 February, 1992
X  REM 28 Feb AFTER MSG 28 Feb AFTER (28Feb91 omitted)
X! .\test.rem(124): Trig = Friday, 1 March, 1991
X  
X  PUSH-OMIT-CONTEXT
X  CLEAR-OMIT-CONTEXT
X  REM 1 Mar -1 MSG 1 mar -1
X! .\test.rem(128): Trig = Thursday, 28 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1
X! .\test.rem(129): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE
X! .\test.rem(130): Trig = Thursday, 28 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP 
X! .\test.rem(131): Trig = Thursday, 28 February, 1991
X  REM 28 Feb AFTER MSG 28 Feb AFTER
X! .\test.rem(132): Trig = Thursday, 28 February, 1991
X  
X  POP-OMIT-CONTEXT
X  REM 1 Mar -1 MSG 1 mar -1 (28feb91 omitted)
X! .\test.rem(135): Trig = Wednesday, 27 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1 (28Feb91 omitted)
X! .\test.rem(136): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE (28Feb91 omitted)
X! .\test.rem(137): Trig = Wednesday, 27 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP (28Feb91 omitted)
X! .\test.rem(138): Trig = Friday, 28 February, 1992
X  REM 28 Feb AFTER MSG 28 Feb AFTER (28Feb91 omitted)
X! .\test.rem(139): Trig = Friday, 1 March, 1991
X  
X  
X  REM 13 March 1991 *1 UNTIL 19 March 1991 MSG 13-19 Mar 91
X! .\test.rem(142): Trig = Wednesday, 13 March, 1991
X   
X  # Test BACK
X  CLEAR-OMIT-CONTEXT
X  REM 18 Feb 1991 +1 MSG 18 Feb 1991 +1
X! .\test.rem(146): Trig = Monday, 18 February, 1991
X  
X  OMIT 17 Feb 1991
X  REM 18 Feb 1991 +1 MSG 18 Feb 1991 +1 (17Feb91 omitted)
X! .\test.rem(149): Trig = Monday, 18 February, 1991
X  18 Feb 1991 +1 (17Feb91 omitted)
X  
X  REM 18 Feb 1991 ++1 MSG 18 Feb 1991 ++1 (17Feb91 omitted)
X! .\test.rem(150): Trig = Monday, 18 February, 1991
X  
X  CLEAR-OMIT-CONTEXT
X  # Test the scanfrom clause
X  REM Fri SATISFY 1
X! .\test.rem(154): Trig = Friday, 22 February, 1991
X  OMIT [trigger(trigdate())]
X  trigdate() => 1991/02/22
X  trigger(1991/02/22) => "22 February 1991"
X  REM Fri after MSG 23 Feb 1991
X! .\test.rem(156): Trig = Saturday, 23 February, 1991
X  CLEAR-OMIT-CONTEXT
X  REM Fri SCANFROM [trigger(today()-7)] SATISFY 1
X  today() => 1991/02/16
X  1991/02/16 - 7 => 1991/02/09
X  trigger(1991/02/09) => "9 February 1991"
X! .\test.rem(158): Trig = Friday, 15 February, 1991
X  OMIT [trigger(trigdate())]
X  trigdate() => 1991/02/15
X  trigger(1991/02/15) => "15 February 1991"
X  REM Fri after MSG 16 Feb 1991
X! .\test.rem(160): Trig = Saturday, 16 February, 1991
X  16 Feb 1991
X  
X  CLEAR-OMIT-CONTEXT
X***************
X*** 503,509 ****
X  coerce("string", 11:44) => "11:44"
X  set a009 coerce("int", "badnews")
X  coerce("int", "badnews") => Can't coerce
X! ./test.rem(171): Can't coerce
X  set a010 coerce("int", "12")
X  coerce("int", "12") => 12
X  set a011 coerce("int", 11:44)
X--- 503,509 ----
X  coerce("string", 11:44) => "11:44"
X  set a009 coerce("int", "badnews")
X  coerce("int", "badnews") => Can't coerce
X! .\test.rem(171): Can't coerce
X  set a010 coerce("int", "12")
X  coerce("int", "12") => 12
X  set a011 coerce("int", 11:44)
X***************
X*** 515,521 ****
X  date(1992, 2, 2) => 1992/02/02
X  set a014 date(1993, 2, 29)
X  date(1993, 2, 29) => Bad date specification
X! ./test.rem(176): Bad date specification
X  set a015 day(today())
X  today() => 1991/02/16
X  day(1991/02/16) => 16
X--- 515,521 ----
X  date(1992, 2, 2) => 1992/02/02
X  set a014 date(1993, 2, 29)
X  date(1993, 2, 29) => Bad date specification
X! .\test.rem(176): Bad date specification
X  set a015 day(today())
X  today() => 1991/02/16
X  day(1991/02/16) => 16
X***************
X*** 528,534 ****
X  set a019 defined("a019")
X  defined("a019") => 0
X  set a020 filename()
X! filename() => "./test.rem"
X  set a021 getenv("TEST_GETENV")
X  getenv("TEST_GETENV") => "foo bar baz"
X  set a022 hour(11:22)
X--- 528,534 ----
X  set a019 defined("a019")
X  defined("a019") => 0
X  set a020 filename()
X! filename() => ".\test.rem"
X  set a021 getenv("TEST_GETENV")
X  getenv("TEST_GETENV") => "foo bar baz"
X  set a022 hour(11:22)
X***************
X*** 610,624 ****
X  set a050 substr(a049, 2)
X  a049 => 21
X  substr(21, 2) => Type mismatch
X! ./test.rem(214): Type mismatch
X  set a051 substr(a050, 2, 6)
X! a050 => ./test.rem(215): Undefined variable: a050
X  set a052 time(1+2, 3+4)
X  1 + 2 => 3
X  3 + 4 => 7
X  time(3, 7) => 03:07
X  rem 10 jan 1992 AT 11:22 CAL
X! ./test.rem(217): Trig = Friday, 10 January, 1992
X  set a053 trigdate()
X  trigdate() => 1992/01/10
X  set a054 trigtime()
X--- 610,624 ----
X  set a050 substr(a049, 2)
X  a049 => 21
X  substr(21, 2) => Type mismatch
X! .\test.rem(214): Type mismatch
X  set a051 substr(a050, 2, 6)
X! a050 => .\test.rem(215): Undefined variable: a050
X  set a052 time(1+2, 3+4)
X  1 + 2 => 3
X  3 + 4 => 7
X  time(3, 7) => 03:07
X  rem 10 jan 1992 AT 11:22 CAL
X! .\test.rem(217): Trig = Friday, 10 January, 1992
X  set a053 trigdate()
X  trigdate() => 1992/01/10
X  set a054 trigtime()
X***************
X*** 631,637 ****
X  "a05" + "6" => "a056"
X  value("a056") => "SDFJHSDF KSJDFH KJSDFH KSJDFH"
X  set a058 version()
X! version() => "03.00.10"
X  set a059 wkday(today())
X  today() => 1991/02/16
X  wkday(1991/02/16) => "Saturday"
X--- 631,637 ----
X  "a05" + "6" => "a056"
X  value("a056") => "SDFJHSDF KSJDFH KJSDFH KSJDFH"
X  set a058 version()
X! version() => "03.00.11"
X  set a059 wkday(today())
X  today() => 1991/02/16
X  wkday(1991/02/16) => "Saturday"
X***************
X*** 710,733 ****
X  x => "foo"
X  y => 11:33
X  "foo" * 11:33 => Type mismatch
X! ./test.rem(240): '*': Type mismatch
X  Leaving UserFN h() => Type mismatch
X  set a074 dosubst("%a %b %c %d %e %f %g %h", '1992/5/5')
X  dosubst("%a %b %c %d %e %f %g %h", 1992/05/05) => "on Tuesday, 5 May, 1992 in 444 days' tim"...
X  msg [a074]%
X! ./test.rem(242): Trig = Saturday, 16 February, 1991
X  a074 => "on Tuesday, 5 May, 1992 in 444 days' tim"...
X  on Tuesday, 5 May, 1992 in 444 days' time on Tuesday 5 on 05/05/1992 on 05/05/1992 on Tuesday, 5 May on 05/05
X  set a075 dosubst("%i %j %k %l %m %n %o %p", '1992/5/5')
X  dosubst("%i %j %k %l %m %n %o %p", 1992/05/05) => "on 05/05 on Tuesday, May 5th, 1992 on Tu"...
X  msg [a075]%
X! ./test.rem(244): Trig = Saturday, 16 February, 1991
X  a075 => "on 05/05 on Tuesday, May 5th, 1992 on Tu"...
X  on 05/05 on Tuesday, May 5th, 1992 on Tuesday, May 5th on 1992/05/05 May 5  s
X  set a076 dosubst("%q %r %s %t %u %v %w %x", '1992/5/5')
X  dosubst("%q %r %s %t %u %v %w %x", 1992/05/05) => "s' 05 th 05 on Tuesday, 5th May, 1992 on"...
X  msg [a076]%
X! ./test.rem(246): Trig = Saturday, 16 February, 1991
X  a076 => "s' 05 th 05 on Tuesday, 5th May, 1992 on"...
X  s' 05 th 05 on Tuesday, 5th May, 1992 on Tuesday, 5th May Tuesday 444
X  set a077 dosubst("%y %z", '1992/5/5')
X--- 710,733 ----
X  x => "foo"
X  y => 11:33
X  "foo" * 11:33 => Type mismatch
X! .\test.rem(240): '*': Type mismatch
X  Leaving UserFN h() => Type mismatch
X  set a074 dosubst("%a %b %c %d %e %f %g %h", '1992/5/5')
X  dosubst("%a %b %c %d %e %f %g %h", 1992/05/05) => "on Tuesday, 5 May, 1992 in 444 days' tim"...
X  msg [a074]%
X! .\test.rem(242): Trig = Saturday, 16 February, 1991
X  a074 => "on Tuesday, 5 May, 1992 in 444 days' tim"...
X  on Tuesday, 5 May, 1992 in 444 days' time on Tuesday 5 on 05/05/1992 on 05/05/1992 on Tuesday, 5 May on 05/05
X  set a075 dosubst("%i %j %k %l %m %n %o %p", '1992/5/5')
X  dosubst("%i %j %k %l %m %n %o %p", 1992/05/05) => "on 05/05 on Tuesday, May 5th, 1992 on Tu"...
X  msg [a075]%
X! .\test.rem(244): Trig = Saturday, 16 February, 1991
X  a075 => "on 05/05 on Tuesday, May 5th, 1992 on Tu"...
X  on 05/05 on Tuesday, May 5th, 1992 on Tuesday, May 5th on 1992/05/05 May 5  s
X  set a076 dosubst("%q %r %s %t %u %v %w %x", '1992/5/5')
X  dosubst("%q %r %s %t %u %v %w %x", 1992/05/05) => "s' 05 th 05 on Tuesday, 5th May, 1992 on"...
X  msg [a076]%
X! .\test.rem(246): Trig = Saturday, 16 February, 1991
X  a076 => "s' 05 th 05 on Tuesday, 5th May, 1992 on"...
X  s' 05 th 05 on Tuesday, 5th May, 1992 on Tuesday, 5th May Tuesday 444
X  set a077 dosubst("%y %z", '1992/5/5')
X***************
X*** 734,740 ****
X  dosubst("%y %z", 1992/05/05) => "1992 92
X  "
X  msg [a077]%
X! ./test.rem(248): Trig = Saturday, 16 February, 1991
X  a077 => "1992 92
X  "
X  1992 92
X--- 734,740 ----
SHAR_EOF
echo "End of Remind-3.0/Patch-11/part part 3"
echo "File patch.11 is continued in part 4"
echo "4" > shar3_seq_.tmp
exit 0



exit 0 # Just in case...
