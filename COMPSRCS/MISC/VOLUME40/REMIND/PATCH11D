Newsgroups: comp.sources.misc
From: dfs@doe.carleton.ca (David F. Skoll)
Subject: v40i170:  remind - A replacement for calendar, Patch11d/5
Message-ID: <1993Nov26.165814.5679@sparky.sterling.com>
X-Md4-Signature: 387914c699cf6188209742387d3d5301
Sender: kent@sparky.sterling.com (Kent Landfield)
Reply-To: dfs@doe.carleton.ca (David F. Skoll)
Organization: Carleton University
Date: Fri, 26 Nov 1993 16:58:14 GMT
Approved: kent@sparky.sterling.com

Submitted-by: dfs@doe.carleton.ca (David F. Skoll)
Posting-number: Volume 40, Issue 170
Archive-name: remind/patch11d
Environment: UNIX, MS-DOS, OS/2
Patch-To: remind: Volume 33, Issue 58-69

#!/bin/sh
# this is Shar.04 (part 4 of Remind-3.0/Patch-11/part)
# do not concatenate these parts, unpack them in order with /bin/sh
# file patch.11 continued
#
if touch 2>&1 | fgrep 'amc' > /dev/null
 then TOUCH=touch
 else TOUCH=true
fi
if test ! -r shar3_seq_.tmp; then
	echo "Please unpack part 1 first!"
	exit 1
fi
(read Scheck
 if test "$Scheck" != 4; then
	echo "Please unpack part $Scheck next!"
	exit 1
 else
	exit 0
 fi
) < shar3_seq_.tmp || exit 1
echo "x - Continuing file patch.11"
sed 's/^X//' << 'SHAR_EOF' >> patch.11 &&
X  dosubst("%y %z", 1992/05/05) => "1992 92
X  "
X  msg [a077]%
X! .\test.rem(248): Trig = Saturday, 16 February, 1991
X  a077 => "1992 92
X  "
X  1992 92
X***************
X*** 772,778 ****
X          a048  "foo"
X          a067  "INT"
X          a039  "February"
X!         a058  "03.00.10"
X          a077  "1992 92
X  "
X          a049  21
X--- 772,778 ----
X          a048  "foo"
X          a067  "INT"
X          a039  "February"
X!         a058  "03.00.11"
X          a077  "1992 92
X  "
X          a049  21
X***************
X*** 784,790 ****
X          a000  1
X          a010  12
X          a001  1
X!         a020  "./test.rem"
X          a011  704
X          a030  1
X          a002  102
X--- 784,790 ----
X          a000  1
X          a010  12
X          a001  1
X!         a020  ".\test.rem"
X          a011  704
X          a030  1
X          a002  102
X*** ../prev/test2.cmp	Wed Oct 13 10:50:33 1993
X--- ./test2.cmp	Thu Oct 21 12:42:18 1993
X***************
X*** 6,12 ****
X  # 	./test-rem  # From WITHIN Remind source directory!
X  
X  REM MSG Today is [hebday(today())] [hebmon(today())] [hebyear(today())]
X! ./test.rem(8): Trig = Saturday, 16 February, 1991
X  Reminders for Saturday, 16th February, 1991:
X  
X  today() => 1991/02/16
X--- 6,12 ----
X  # 	./test-rem  # From WITHIN Remind source directory!
X  
X  REM MSG Today is [hebday(today())] [hebmon(today())] [hebyear(today())]
X! .\test.rem(8): Trig = Saturday, 16 February, 1991
X  Reminders for Saturday, 16th February, 1991:
X  
X  today() => 1991/02/16
X***************
X*** 26,32 ****
X  hebdate(1, "Tishrey") => 1991/09/09
X  trigger(1991/09/09) => "9 September 1991"
X  Leaving UserFN _h() => "9 September 1991"
X! ./test.rem(11): Trig = Monday, 9 September, 1991
X  [_h(2,  "Tishrey")] MSG Rosh Hashana 2
X  Entering UserFN _h(2, "Tishrey")
X  x => 2
X--- 26,32 ----
X  hebdate(1, "Tishrey") => 1991/09/09
X  trigger(1991/09/09) => "9 September 1991"
X  Leaving UserFN _h() => "9 September 1991"
X! .\test.rem(11): Trig = Monday, 9 September, 1991
X  [_h(2,  "Tishrey")] MSG Rosh Hashana 2
X  Entering UserFN _h(2, "Tishrey")
X  x => 2
X***************
X*** 34,40 ****
X  hebdate(2, "Tishrey") => 1991/09/10
X  trigger(1991/09/10) => "10 September 1991"
X  Leaving UserFN _h() => "10 September 1991"
X! ./test.rem(12): Trig = Tuesday, 10 September, 1991
X  [_h(3,  "Tishrey")] MSG Tzom Gedalia
X  Entering UserFN _h(3, "Tishrey")
X  x => 3
X--- 34,40 ----
X  hebdate(2, "Tishrey") => 1991/09/10
X  trigger(1991/09/10) => "10 September 1991"
X  Leaving UserFN _h() => "10 September 1991"
X! .\test.rem(12): Trig = Tuesday, 10 September, 1991
X  [_h(3,  "Tishrey")] MSG Tzom Gedalia
X  Entering UserFN _h(3, "Tishrey")
X  x => 3
X***************
X*** 42,48 ****
X  hebdate(3, "Tishrey") => 1991/09/11
X  trigger(1991/09/11) => "11 September 1991"
X  Leaving UserFN _h() => "11 September 1991"
X! ./test.rem(13): Trig = Wednesday, 11 September, 1991
X  [_h(10, "Tishrey")] MSG Yom Kippur
X  Entering UserFN _h(10, "Tishrey")
X  x => 10
X--- 42,48 ----
X  hebdate(3, "Tishrey") => 1991/09/11
X  trigger(1991/09/11) => "11 September 1991"
X  Leaving UserFN _h() => "11 September 1991"
X! .\test.rem(13): Trig = Wednesday, 11 September, 1991
X  [_h(10, "Tishrey")] MSG Yom Kippur
X  Entering UserFN _h(10, "Tishrey")
X  x => 10
X***************
X*** 50,56 ****
X  hebdate(10, "Tishrey") => 1991/09/18
X  trigger(1991/09/18) => "18 September 1991"
X  Leaving UserFN _h() => "18 September 1991"
X! ./test.rem(14): Trig = Wednesday, 18 September, 1991
X  [_h(15, "Tishrey")] MSG Sukkot 1
X  Entering UserFN _h(15, "Tishrey")
X  x => 15
X--- 50,56 ----
X  hebdate(10, "Tishrey") => 1991/09/18
X  trigger(1991/09/18) => "18 September 1991"
X  Leaving UserFN _h() => "18 September 1991"
X! .\test.rem(14): Trig = Wednesday, 18 September, 1991
X  [_h(15, "Tishrey")] MSG Sukkot 1
X  Entering UserFN _h(15, "Tishrey")
X  x => 15
X***************
X*** 58,64 ****
X  hebdate(15, "Tishrey") => 1991/09/23
X  trigger(1991/09/23) => "23 September 1991"
X  Leaving UserFN _h() => "23 September 1991"
X! ./test.rem(15): Trig = Monday, 23 September, 1991
X  [_h(25, "Kislev")]  MSG Channuka
X  Entering UserFN _h(25, "Kislev")
X  x => 25
X--- 58,64 ----
X  hebdate(15, "Tishrey") => 1991/09/23
X  trigger(1991/09/23) => "23 September 1991"
X  Leaving UserFN _h() => "23 September 1991"
X! .\test.rem(15): Trig = Monday, 23 September, 1991
X  [_h(25, "Kislev")]  MSG Channuka
X  Entering UserFN _h(25, "Kislev")
X  x => 25
X***************
X*** 66,72 ****
X  hebdate(25, "Kislev") => 1991/12/02
X  trigger(1991/12/02) => "2 December 1991"
X  Leaving UserFN _h() => "2 December 1991"
X! ./test.rem(16): Trig = Monday, 2 December, 1991
X  [_h(10, "Tevet")]   MSG Asara B'Tevet
X  Entering UserFN _h(10, "Tevet")
X  x => 10
X--- 66,72 ----
X  hebdate(25, "Kislev") => 1991/12/02
X  trigger(1991/12/02) => "2 December 1991"
X  Leaving UserFN _h() => "2 December 1991"
X! .\test.rem(16): Trig = Monday, 2 December, 1991
X  [_h(10, "Tevet")]   MSG Asara B'Tevet
X  Entering UserFN _h(10, "Tevet")
X  x => 10
X***************
X*** 74,80 ****
X  hebdate(10, "Tevet") => 1991/12/17
X  trigger(1991/12/17) => "17 December 1991"
X  Leaving UserFN _h() => "17 December 1991"
X! ./test.rem(17): Trig = Tuesday, 17 December, 1991
X  [_h(15, "Shvat")]   MSG Tu B'Shvat
X  Entering UserFN _h(15, "Shvat")
X  x => 15
X--- 74,80 ----
X  hebdate(10, "Tevet") => 1991/12/17
X  trigger(1991/12/17) => "17 December 1991"
X  Leaving UserFN _h() => "17 December 1991"
X! .\test.rem(17): Trig = Tuesday, 17 December, 1991
X  [_h(15, "Shvat")]   MSG Tu B'Shvat
X  Entering UserFN _h(15, "Shvat")
X  x => 15
X***************
X*** 82,88 ****
X  hebdate(15, "Shvat") => 1992/01/20
X  trigger(1992/01/20) => "20 January 1992"
X  Leaving UserFN _h() => "20 January 1992"
X! ./test.rem(18): Trig = Monday, 20 January, 1992
X  [_h(15, "Adar A")]  MSG Purim Katan
X  Entering UserFN _h(15, "Adar A")
X  x => 15
X--- 82,88 ----
X  hebdate(15, "Shvat") => 1992/01/20
X  trigger(1992/01/20) => "20 January 1992"
X  Leaving UserFN _h() => "20 January 1992"
X! .\test.rem(18): Trig = Monday, 20 January, 1992
X  [_h(15, "Adar A")]  MSG Purim Katan
X  Entering UserFN _h(15, "Adar A")
X  x => 15
X***************
X*** 90,96 ****
X  hebdate(15, "Adar A") => 1992/02/19
X  trigger(1992/02/19) => "19 February 1992"
X  Leaving UserFN _h() => "19 February 1992"
X! ./test.rem(19): Trig = Wednesday, 19 February, 1992
X  [_h(14, "Adar")]    MSG Purim
X  Entering UserFN _h(14, "Adar")
X  x => 14
X--- 90,96 ----
X  hebdate(15, "Adar A") => 1992/02/19
X  trigger(1992/02/19) => "19 February 1992"
X  Leaving UserFN _h() => "19 February 1992"
X! .\test.rem(19): Trig = Wednesday, 19 February, 1992
X  [_h(14, "Adar")]    MSG Purim
X  Entering UserFN _h(14, "Adar")
X  x => 14
X***************
X*** 98,104 ****
X  hebdate(14, "Adar") => 1991/02/28
X  trigger(1991/02/28) => "28 February 1991"
X  Leaving UserFN _h() => "28 February 1991"
X! ./test.rem(20): Trig = Thursday, 28 February, 1991
X  [_h(15, "Nisan")]   MSG Pesach
X  Entering UserFN _h(15, "Nisan")
X  x => 15
X--- 98,104 ----
X  hebdate(14, "Adar") => 1991/02/28
X  trigger(1991/02/28) => "28 February 1991"
X  Leaving UserFN _h() => "28 February 1991"
X! .\test.rem(20): Trig = Thursday, 28 February, 1991
X  [_h(15, "Nisan")]   MSG Pesach
X  Entering UserFN _h(15, "Nisan")
X  x => 15
X***************
X*** 106,112 ****
X  hebdate(15, "Nisan") => 1991/03/30
X  trigger(1991/03/30) => "30 March 1991"
X  Leaving UserFN _h() => "30 March 1991"
X! ./test.rem(21): Trig = Saturday, 30 March, 1991
X  [_h(27, "Nisan")]   MSG Yom HaShoah
X  Entering UserFN _h(27, "Nisan")
X  x => 27
X--- 106,112 ----
X  hebdate(15, "Nisan") => 1991/03/30
X  trigger(1991/03/30) => "30 March 1991"
X  Leaving UserFN _h() => "30 March 1991"
X! .\test.rem(21): Trig = Saturday, 30 March, 1991
X  [_h(27, "Nisan")]   MSG Yom HaShoah
X  Entering UserFN _h(27, "Nisan")
X  x => 27
X***************
X*** 114,120 ****
X  hebdate(27, "Nisan") => 1991/04/11
X  trigger(1991/04/11) => "11 April 1991"
X  Leaving UserFN _h() => "11 April 1991"
X! ./test.rem(22): Trig = Thursday, 11 April, 1991
X  [_h(4,  "Iyar")]    MSG Yom HaZikaron
X  Entering UserFN _h(4, "Iyar")
X  x => 4
X--- 114,120 ----
X  hebdate(27, "Nisan") => 1991/04/11
X  trigger(1991/04/11) => "11 April 1991"
X  Leaving UserFN _h() => "11 April 1991"
X! .\test.rem(22): Trig = Thursday, 11 April, 1991
X  [_h(4,  "Iyar")]    MSG Yom HaZikaron
X  Entering UserFN _h(4, "Iyar")
X  x => 4
X***************
X*** 122,128 ****
X  hebdate(4, "Iyar") => 1991/04/18
X  trigger(1991/04/18) => "18 April 1991"
X  Leaving UserFN _h() => "18 April 1991"
X! ./test.rem(23): Trig = Thursday, 18 April, 1991
X  [_h(5,  "Iyar")]    MSG Yom Ha'atzmaut
X  Entering UserFN _h(5, "Iyar")
X  x => 5
X--- 122,128 ----
X  hebdate(4, "Iyar") => 1991/04/18
X  trigger(1991/04/18) => "18 April 1991"
X  Leaving UserFN _h() => "18 April 1991"
X! .\test.rem(23): Trig = Thursday, 18 April, 1991
X  [_h(5,  "Iyar")]    MSG Yom Ha'atzmaut
X  Entering UserFN _h(5, "Iyar")
X  x => 5
X***************
X*** 130,136 ****
X  hebdate(5, "Iyar") => 1991/04/19
X  trigger(1991/04/19) => "19 April 1991"
X  Leaving UserFN _h() => "19 April 1991"
X! ./test.rem(24): Trig = Friday, 19 April, 1991
X  [_h(28, "Iyar")]    MSG Yom Yerushalayim
X  Entering UserFN _h(28, "Iyar")
X  x => 28
X--- 130,136 ----
X  hebdate(5, "Iyar") => 1991/04/19
X  trigger(1991/04/19) => "19 April 1991"
X  Leaving UserFN _h() => "19 April 1991"
X! .\test.rem(24): Trig = Friday, 19 April, 1991
X  [_h(28, "Iyar")]    MSG Yom Yerushalayim
X  Entering UserFN _h(28, "Iyar")
X  x => 28
X***************
X*** 138,144 ****
X  hebdate(28, "Iyar") => 1991/05/12
X  trigger(1991/05/12) => "12 May 1991"
X  Leaving UserFN _h() => "12 May 1991"
X! ./test.rem(25): Trig = Sunday, 12 May, 1991
X  [_h(6,  "Sivan")]   MSG Shavuot
X  Entering UserFN _h(6, "Sivan")
X  x => 6
X--- 138,144 ----
X  hebdate(28, "Iyar") => 1991/05/12
X  trigger(1991/05/12) => "12 May 1991"
X  Leaving UserFN _h() => "12 May 1991"
X! .\test.rem(25): Trig = Sunday, 12 May, 1991
X  [_h(6,  "Sivan")]   MSG Shavuot
X  Entering UserFN _h(6, "Sivan")
X  x => 6
X***************
X*** 146,152 ****
X  hebdate(6, "Sivan") => 1991/05/19
X  trigger(1991/05/19) => "19 May 1991"
X  Leaving UserFN _h() => "19 May 1991"
X! ./test.rem(26): Trig = Sunday, 19 May, 1991
X  [_h(9,  "Av")]      MSG Tish'a B'Av
X  Entering UserFN _h(9, "Av")
X  x => 9
X--- 146,152 ----
X  hebdate(6, "Sivan") => 1991/05/19
X  trigger(1991/05/19) => "19 May 1991"
X  Leaving UserFN _h() => "19 May 1991"
X! .\test.rem(26): Trig = Sunday, 19 May, 1991
X  [_h(9,  "Av")]      MSG Tish'a B'Av
X  Entering UserFN _h(9, "Av")
X  x => 9
X***************
X*** 154,160 ****
X  hebdate(9, "Av") => 1991/07/20
X  trigger(1991/07/20) => "20 July 1991"
X  Leaving UserFN _h() => "20 July 1991"
X! ./test.rem(27): Trig = Saturday, 20 July, 1991
X  
X  # Test some jahrzeit cases
X  fset _i(x,y,z,a) trigger(hebdate(x,y,z,a))
X--- 154,160 ----
X  hebdate(9, "Av") => 1991/07/20
X  trigger(1991/07/20) => "20 July 1991"
X  Leaving UserFN _h() => "20 July 1991"
X! .\test.rem(27): Trig = Saturday, 20 July, 1991
X  
X  # Test some jahrzeit cases
X  fset _i(x,y,z,a) trigger(hebdate(x,y,z,a))
X***************
X*** 168,174 ****
X  hebdate(30, "Heshvan", 1991/02/16, 5759) => 1991/11/07
X  trigger(1991/11/07) => "7 November 1991"
X  Leaving UserFN _i() => "7 November 1991"
X! ./test.rem(31): Trig = Thursday, 7 November, 1991
X  [_i(30, "Heshvan", today(), 5760)] MSG Complete-Defective
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Heshvan", 1991/02/16, 5760)
X--- 168,174 ----
X  hebdate(30, "Heshvan", 1991/02/16, 5759) => 1991/11/07
X  trigger(1991/11/07) => "7 November 1991"
X  Leaving UserFN _i() => "7 November 1991"
X! .\test.rem(31): Trig = Thursday, 7 November, 1991
X  [_i(30, "Heshvan", today(), 5760)] MSG Complete-Defective
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Heshvan", 1991/02/16, 5760)
X***************
X*** 179,185 ****
X  hebdate(30, "Heshvan", 1991/02/16, 5760) => 1991/11/07
X  trigger(1991/11/07) => "7 November 1991"
X  Leaving UserFN _i() => "7 November 1991"
X! ./test.rem(32): Trig = Thursday, 7 November, 1991
X  [_i(30, "Heshvan", today(), 5761)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Heshvan", 1991/02/16, 5761)
X--- 179,185 ----
X  hebdate(30, "Heshvan", 1991/02/16, 5760) => 1991/11/07
X  trigger(1991/11/07) => "7 November 1991"
X  Leaving UserFN _i() => "7 November 1991"
X! .\test.rem(32): Trig = Thursday, 7 November, 1991
X  [_i(30, "Heshvan", today(), 5761)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Heshvan", 1991/02/16, 5761)
X***************
X*** 187,193 ****
X  y => "Heshvan"
X  z => 1991/02/16
X  a => 5761
X! hebdate(30, "Heshvan", 1991/02/16, 5761) => ./test.rem(33): 30 Heshvan 5761: Invalid Hebrew date
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X--- 187,193 ----
X  y => "Heshvan"
X  z => 1991/02/16
X  a => 5761
X! hebdate(30, "Heshvan", 1991/02/16, 5761) => .\test.rem(33): 30 Heshvan 5761: Invalid Hebrew date
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X***************
X*** 201,207 ****
X  hebdate(30, "Kislev", 1991/02/16, 5759) => 1991/12/07
X  trigger(1991/12/07) => "7 December 1991"
X  Leaving UserFN _i() => "7 December 1991"
X! ./test.rem(35): Trig = Saturday, 7 December, 1991
X  [_i(30, "Kislev", today(), 5760)] MSG Complete-Defective
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Kislev", 1991/02/16, 5760)
X--- 201,207 ----
X  hebdate(30, "Kislev", 1991/02/16, 5759) => 1991/12/07
X  trigger(1991/12/07) => "7 December 1991"
X  Leaving UserFN _i() => "7 December 1991"
X! .\test.rem(35): Trig = Saturday, 7 December, 1991
X  [_i(30, "Kislev", today(), 5760)] MSG Complete-Defective
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Kislev", 1991/02/16, 5760)
X***************
X*** 212,218 ****
X  hebdate(30, "Kislev", 1991/02/16, 5760) => 1991/12/07
X  trigger(1991/12/07) => "7 December 1991"
X  Leaving UserFN _i() => "7 December 1991"
X! ./test.rem(36): Trig = Saturday, 7 December, 1991
X  [_i(30, "Kislev", today(), 5761)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Kislev", 1991/02/16, 5761)
X--- 212,218 ----
X  hebdate(30, "Kislev", 1991/02/16, 5760) => 1991/12/07
X  trigger(1991/12/07) => "7 December 1991"
X  Leaving UserFN _i() => "7 December 1991"
X! .\test.rem(36): Trig = Saturday, 7 December, 1991
X  [_i(30, "Kislev", today(), 5761)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Kislev", 1991/02/16, 5761)
X***************
X*** 220,226 ****
X  y => "Kislev"
X  z => 1991/02/16
X  a => 5761
X! hebdate(30, "Kislev", 1991/02/16, 5761) => ./test.rem(37): 30 Kislev 5761: Invalid Hebrew date
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X--- 220,226 ----
X  y => "Kislev"
X  z => 1991/02/16
X  a => 5761
X! hebdate(30, "Kislev", 1991/02/16, 5761) => .\test.rem(37): 30 Kislev 5761: Invalid Hebrew date
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X***************
X*** 234,240 ****
X  hebdate(30, "Adar A", 1991/02/16, 5755) => 1992/03/05
X  trigger(1992/03/05) => "5 March 1992"
X  Leaving UserFN _i() => "5 March 1992"
X! ./test.rem(39): Trig = Thursday, 5 March, 1992
X  [_i(30, "Adar A", today(), 5756)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Adar A", 1991/02/16, 5756)
X--- 234,240 ----
X  hebdate(30, "Adar A", 1991/02/16, 5755) => 1992/03/05
X  trigger(1992/03/05) => "5 March 1992"
X  Leaving UserFN _i() => "5 March 1992"
X! .\test.rem(39): Trig = Thursday, 5 March, 1992
X  [_i(30, "Adar A", today(), 5756)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(30, "Adar A", 1991/02/16, 5756)
X***************
X*** 242,248 ****
X  y => "Adar A"
X  z => 1991/02/16
X  a => 5756
X! hebdate(30, "Adar A", 1991/02/16, 5756) => ./test.rem(40): No Adar A in 5756
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  [_i(29, "Adar A", today(), 5755)] MSG Leap
X--- 242,248 ----
X  y => "Adar A"
X  z => 1991/02/16
X  a => 5756
X! hebdate(30, "Adar A", 1991/02/16, 5756) => .\test.rem(40): No Adar A in 5756
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  [_i(29, "Adar A", today(), 5755)] MSG Leap
X***************
X*** 255,261 ****
X  hebdate(29, "Adar A", 1991/02/16, 5755) => 1991/03/15
X  trigger(1991/03/15) => "15 March 1991"
X  Leaving UserFN _i() => "15 March 1991"
X! ./test.rem(41): Trig = Friday, 15 March, 1991
X  [_i(29, "Adar A", today(), 5756)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(29, "Adar A", 1991/02/16, 5756)
X--- 255,261 ----
X  hebdate(29, "Adar A", 1991/02/16, 5755) => 1991/03/15
X  trigger(1991/03/15) => "15 March 1991"
X  Leaving UserFN _i() => "15 March 1991"
X! .\test.rem(41): Trig = Friday, 15 March, 1991
X  [_i(29, "Adar A", today(), 5756)] MSG Illegal
X  today() => 1991/02/16
X  Entering UserFN _i(29, "Adar A", 1991/02/16, 5756)
X***************
X*** 263,269 ****
X  y => "Adar A"
X  z => 1991/02/16
X  a => 5756
X! hebdate(29, "Adar A", 1991/02/16, 5756) => ./test.rem(42): No Adar A in 5756
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X--- 263,269 ----
X  y => "Adar A"
X  z => 1991/02/16
X  a => 5756
X! hebdate(29, "Adar A", 1991/02/16, 5756) => .\test.rem(42): No Adar A in 5756
X  Invalid Hebrew date
X  Leaving UserFN _i() => Invalid Hebrew date
X  
X***************
X*** 270,483 ****
X  # Test each possible case of the basic reminders.
X  
X  REM MSG Every Day
X! ./test.rem(46): Trig = Saturday, 16 February, 1991
X  Every Day
X  
X  
X  REM 18 MSG Every 18th 
X! ./test.rem(48): Trig = Monday, 18 February, 1991
X  REM 15 MSG Every 15th
X! ./test.rem(49): Trig = Friday, 15 March, 1991
X  
X  REM Feb MSG February
X! ./test.rem(51): Trig = Saturday, 16 February, 1991
X  February
X  
X  REM Jan MSG January
X! ./test.rem(52): Trig = Wednesday, 1 January, 1992
X  REM March MSG March
X! ./test.rem(53): Trig = Friday, 1 March, 1991
X  
X  REM 13 Jan MSG 13 Jan
X! ./test.rem(55): Trig = Monday, 13 January, 1992
X  REM 15 Feb MSG 15 Feb
X! ./test.rem(56): Trig = Saturday, 15 February, 1992
X  REM 28 Feb MSG 28 Feb
X! ./test.rem(57): Trig = Thursday, 28 February, 1991
X  REM 29 Feb MSG 29 Feb
X! ./test.rem(58): Trig = Saturday, 29 February, 1992
X  REM 5 Mar MSG 5 Mar
X! ./test.rem(59): Trig = Tuesday, 5 March, 1991
X  
X  REM 1990 MSG 1990
X! ./test.rem(61): Expired
X  REM 1991 MSG 1991
X! ./test.rem(62): Trig = Saturday, 16 February, 1991
X  1991
X  
X  REM 1992 MSG 1991
X! ./test.rem(63): Trig = Wednesday, 1 January, 1992
X  
X  REM 1 1990 MSG 1 1990
X! ./test.rem(65): Expired
X  REM 29 1991 MSG 29 1991
X! ./test.rem(66): Trig = Friday, 29 March, 1991
X  REM 29 1992 MSG 29 1992
X! ./test.rem(67): Trig = Wednesday, 29 January, 1992
X  REM 16 1991 MSG 16 1991
X! ./test.rem(68): Trig = Saturday, 16 February, 1991
X  16 1991
X  
X  
X  REM Jan 1990 MSG Jan 1990
X! ./test.rem(70): Expired
X  REM Feb 1991 MSG Feb 1991
X! ./test.rem(71): Trig = Saturday, 16 February, 1991
X  Feb 1991
X  
X  REM Dec 1991 MSG Dec 1991
X! ./test.rem(72): Trig = Sunday, 1 December, 1991
X  REM May 1992 MSG May 1992
X! ./test.rem(73): Trig = Friday, 1 May, 1992
X  
X  REM 1 Jan 1991 MSG 1 Jan 1991
X! ./test.rem(75): Expired
X  REM 16 Feb 1991 MSG 16 Feb 1991
X! ./test.rem(76): Trig = Saturday, 16 February, 1991
X  16 Feb 1991
X  
X  REM 29 Dec 1992 MSG 29 Dec 1992
X! ./test.rem(77): Trig = Tuesday, 29 December, 1992
X  
X  REM Sun MSG Sun
X! ./test.rem(79): Trig = Sunday, 17 February, 1991
X  REM Fri Sat Tue MSG Fri Sat Tue
X! ./test.rem(80): Trig = Saturday, 16 February, 1991
X  Fri Sat Tue
X  
X  
X  REM Sun 16 MSG Sun 16
X! ./test.rem(82): Trig = Sunday, 17 February, 1991
X  REM Mon Tue Wed Thu Fri 1 MSG Mon Tue Wed Thu Fri 1
X! ./test.rem(83): Trig = Friday, 1 March, 1991
X  
X  REM Sun Feb MSG Sun Feb
X! ./test.rem(85): Trig = Sunday, 17 February, 1991
X  REM Mon Tue March MSG Mon Tue March
X! ./test.rem(86): Trig = Monday, 4 March, 1991
X  
X  REM Sun 16 Feb MSG Sun 16 Feb
X! ./test.rem(88): Trig = Sunday, 17 February, 1991
X  REM Mon Tue 10 March MSG Mon Tue 10 March
X! ./test.rem(89): Trig = Monday, 11 March, 1991
X  
X  REM Sat Sun 1991 MSG Sat Sun 1991
X! ./test.rem(91): Trig = Saturday, 16 February, 1991
X  Sat Sun 1991
X  
X  REM Mon Tue 1992 MSG Mon Tue 1992
X! ./test.rem(92): Trig = Monday, 6 January, 1992
X  
X  REM Sun 16 1991 MSG Sun 16 1991
X! ./test.rem(94): Trig = Sunday, 17 February, 1991
X  REM Mon Tue Wed Thu Fri 1 1992 MSG Mon Tue Wed Thu Fri 1 1992
X! ./test.rem(95): Trig = Wednesday, 1 January, 1992
X  
X  REM Mon Feb 1991 MSG Mon Feb 1991
X! ./test.rem(97): Trig = Monday, 18 February, 1991
X  REM Tue Jan 1992 MSG Tue Jan 1992
X! ./test.rem(98): Trig = Tuesday, 7 January, 1992
X  
X  REM Sun Mon 16 Feb 1991 MSG Sun Mon 16 Feb 1991
X! ./test.rem(100): Trig = Sunday, 17 February, 1991
X  REM Tue 28 Jan 1992 MSG Tue 28 Jan 1992
X! ./test.rem(101): Trig = Tuesday, 28 January, 1992
X  
X  # Try some Backs
X  CLEAR-OMIT-CONTEXT
X  REM 1 -1 OMIT sat sun MSG 1 -1 OMIT Sat Sun
X! ./test.rem(105): Trig = Thursday, 28 February, 1991
X  REM 1 --1 OMIT sat sun MSG 1 --1 OMIT Sat Sun
X! ./test.rem(106): Trig = Thursday, 28 February, 1991
X  
X  OMIT 28 Feb
X  REM 1 -1 OMIT sat sun MSG 1 -1 OMIT Sat Sun (28 Feb omitted)
X! ./test.rem(109): Trig = Wednesday, 27 February, 1991
X  REM 1 --1 OMIT sat sun MSG 1 --1 OMIT Sat Sun (28 Feb omitted)
X! ./test.rem(110): Trig = Thursday, 28 February, 1991
X  
X  CLEAR-OMIT-CONTEXT
X  
X  # Try out UNTIL
X  REM Wed UNTIL 21 Feb 1991 MSG Wed UNTIL 21 Feb 1991
X! ./test.rem(115): Trig = Wednesday, 20 February, 1991
X  
X  # Try playing with the OMIT context
X  
X  OMIT 28 Feb 1991
X  REM 1 Mar -1 MSG 1 mar -1 (28feb91 omitted)
X! ./test.rem(120): Trig = Wednesday, 27 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1 (28Feb91 omitted)
X! ./test.rem(121): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE (28Feb91 omitted)
X! ./test.rem(122): Trig = Wednesday, 27 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP (28Feb91 omitted)
X! ./test.rem(123): Trig = Friday, 28 February, 1992
X  REM 28 Feb AFTER MSG 28 Feb AFTER (28Feb91 omitted)
X! ./test.rem(124): Trig = Friday, 1 March, 1991
X  
X  PUSH-OMIT-CONTEXT
X  CLEAR-OMIT-CONTEXT
X  REM 1 Mar -1 MSG 1 mar -1
X! ./test.rem(128): Trig = Thursday, 28 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1
X! ./test.rem(129): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE
X! ./test.rem(130): Trig = Thursday, 28 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP 
X! ./test.rem(131): Trig = Thursday, 28 February, 1991
X  REM 28 Feb AFTER MSG 28 Feb AFTER
X! ./test.rem(132): Trig = Thursday, 28 February, 1991
X  
X  POP-OMIT-CONTEXT
X  REM 1 Mar -1 MSG 1 mar -1 (28feb91 omitted)
X! ./test.rem(135): Trig = Wednesday, 27 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1 (28Feb91 omitted)
X! ./test.rem(136): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE (28Feb91 omitted)
X! ./test.rem(137): Trig = Wednesday, 27 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP (28Feb91 omitted)
X! ./test.rem(138): Trig = Friday, 28 February, 1992
X  REM 28 Feb AFTER MSG 28 Feb AFTER (28Feb91 omitted)
X! ./test.rem(139): Trig = Friday, 1 March, 1991
X  
X  
X  REM 13 March 1991 *1 UNTIL 19 March 1991 MSG 13-19 Mar 91
X! ./test.rem(142): Trig = Wednesday, 13 March, 1991
X   
X  # Test BACK
X  CLEAR-OMIT-CONTEXT
X  REM 18 Feb 1991 +1 MSG 18 Feb 1991 +1
X! ./test.rem(146): Trig = Monday, 18 February, 1991
X  
X  OMIT 17 Feb 1991
X  REM 18 Feb 1991 +1 MSG 18 Feb 1991 +1 (17Feb91 omitted)
X! ./test.rem(149): Trig = Monday, 18 February, 1991
X  18 Feb 1991 +1 (17Feb91 omitted)
X  
X  REM 18 Feb 1991 ++1 MSG 18 Feb 1991 ++1 (17Feb91 omitted)
X! ./test.rem(150): Trig = Monday, 18 February, 1991
X  
X  CLEAR-OMIT-CONTEXT
X  # Test the scanfrom clause
X  REM Fri SATISFY 1
X! ./test.rem(154): Trig = Friday, 22 February, 1991
X  OMIT [trigger(trigdate())]
X  trigdate() => 1991/02/22
X  trigger(1991/02/22) => "22 February 1991"
X  REM Fri after MSG 23 Feb 1991
X! ./test.rem(156): Trig = Saturday, 23 February, 1991
X  CLEAR-OMIT-CONTEXT
X  REM Fri SCANFROM [trigger(today()-7)] SATISFY 1
X  today() => 1991/02/16
X  1991/02/16 - 7 => 1991/02/09
X  trigger(1991/02/09) => "9 February 1991"
X! ./test.rem(158): Trig = Friday, 15 February, 1991
X  OMIT [trigger(trigdate())]
X  trigdate() => 1991/02/15
X  trigger(1991/02/15) => "15 February 1991"
X  REM Fri after MSG 16 Feb 1991
X! ./test.rem(160): Trig = Saturday, 16 February, 1991
X  16 Feb 1991
X  
X  CLEAR-OMIT-CONTEXT
X--- 270,483 ----
X  # Test each possible case of the basic reminders.
X  
X  REM MSG Every Day
X! .\test.rem(46): Trig = Saturday, 16 February, 1991
X  Every Day
X  
X  
X  REM 18 MSG Every 18th 
X! .\test.rem(48): Trig = Monday, 18 February, 1991
X  REM 15 MSG Every 15th
X! .\test.rem(49): Trig = Friday, 15 March, 1991
X  
X  REM Feb MSG February
X! .\test.rem(51): Trig = Saturday, 16 February, 1991
X  February
X  
X  REM Jan MSG January
X! .\test.rem(52): Trig = Wednesday, 1 January, 1992
X  REM March MSG March
X! .\test.rem(53): Trig = Friday, 1 March, 1991
X  
X  REM 13 Jan MSG 13 Jan
X! .\test.rem(55): Trig = Monday, 13 January, 1992
X  REM 15 Feb MSG 15 Feb
X! .\test.rem(56): Trig = Saturday, 15 February, 1992
X  REM 28 Feb MSG 28 Feb
X! .\test.rem(57): Trig = Thursday, 28 February, 1991
X  REM 29 Feb MSG 29 Feb
X! .\test.rem(58): Trig = Saturday, 29 February, 1992
X  REM 5 Mar MSG 5 Mar
X! .\test.rem(59): Trig = Tuesday, 5 March, 1991
X  
X  REM 1990 MSG 1990
X! .\test.rem(61): Expired
X  REM 1991 MSG 1991
X! .\test.rem(62): Trig = Saturday, 16 February, 1991
X  1991
X  
X  REM 1992 MSG 1991
X! .\test.rem(63): Trig = Wednesday, 1 January, 1992
X  
X  REM 1 1990 MSG 1 1990
X! .\test.rem(65): Expired
X  REM 29 1991 MSG 29 1991
X! .\test.rem(66): Trig = Friday, 29 March, 1991
X  REM 29 1992 MSG 29 1992
X! .\test.rem(67): Trig = Wednesday, 29 January, 1992
X  REM 16 1991 MSG 16 1991
X! .\test.rem(68): Trig = Saturday, 16 February, 1991
X  16 1991
X  
X  
X  REM Jan 1990 MSG Jan 1990
X! .\test.rem(70): Expired
X  REM Feb 1991 MSG Feb 1991
X! .\test.rem(71): Trig = Saturday, 16 February, 1991
X  Feb 1991
X  
X  REM Dec 1991 MSG Dec 1991
X! .\test.rem(72): Trig = Sunday, 1 December, 1991
X  REM May 1992 MSG May 1992
X! .\test.rem(73): Trig = Friday, 1 May, 1992
X  
X  REM 1 Jan 1991 MSG 1 Jan 1991
X! .\test.rem(75): Expired
X  REM 16 Feb 1991 MSG 16 Feb 1991
X! .\test.rem(76): Trig = Saturday, 16 February, 1991
X  16 Feb 1991
X  
X  REM 29 Dec 1992 MSG 29 Dec 1992
X! .\test.rem(77): Trig = Tuesday, 29 December, 1992
X  
X  REM Sun MSG Sun
X! .\test.rem(79): Trig = Sunday, 17 February, 1991
X  REM Fri Sat Tue MSG Fri Sat Tue
X! .\test.rem(80): Trig = Saturday, 16 February, 1991
X  Fri Sat Tue
X  
X  
X  REM Sun 16 MSG Sun 16
X! .\test.rem(82): Trig = Sunday, 17 February, 1991
X  REM Mon Tue Wed Thu Fri 1 MSG Mon Tue Wed Thu Fri 1
X! .\test.rem(83): Trig = Friday, 1 March, 1991
X  
X  REM Sun Feb MSG Sun Feb
X! .\test.rem(85): Trig = Sunday, 17 February, 1991
X  REM Mon Tue March MSG Mon Tue March
X! .\test.rem(86): Trig = Monday, 4 March, 1991
X  
X  REM Sun 16 Feb MSG Sun 16 Feb
X! .\test.rem(88): Trig = Sunday, 17 February, 1991
X  REM Mon Tue 10 March MSG Mon Tue 10 March
X! .\test.rem(89): Trig = Monday, 11 March, 1991
X  
X  REM Sat Sun 1991 MSG Sat Sun 1991
X! .\test.rem(91): Trig = Saturday, 16 February, 1991
X  Sat Sun 1991
X  
X  REM Mon Tue 1992 MSG Mon Tue 1992
X! .\test.rem(92): Trig = Monday, 6 January, 1992
X  
X  REM Sun 16 1991 MSG Sun 16 1991
X! .\test.rem(94): Trig = Sunday, 17 February, 1991
X  REM Mon Tue Wed Thu Fri 1 1992 MSG Mon Tue Wed Thu Fri 1 1992
X! .\test.rem(95): Trig = Wednesday, 1 January, 1992
X  
X  REM Mon Feb 1991 MSG Mon Feb 1991
X! .\test.rem(97): Trig = Monday, 18 February, 1991
X  REM Tue Jan 1992 MSG Tue Jan 1992
X! .\test.rem(98): Trig = Tuesday, 7 January, 1992
X  
X  REM Sun Mon 16 Feb 1991 MSG Sun Mon 16 Feb 1991
X! .\test.rem(100): Trig = Sunday, 17 February, 1991
X  REM Tue 28 Jan 1992 MSG Tue 28 Jan 1992
X! .\test.rem(101): Trig = Tuesday, 28 January, 1992
X  
X  # Try some Backs
X  CLEAR-OMIT-CONTEXT
X  REM 1 -1 OMIT sat sun MSG 1 -1 OMIT Sat Sun
X! .\test.rem(105): Trig = Thursday, 28 February, 1991
X  REM 1 --1 OMIT sat sun MSG 1 --1 OMIT Sat Sun
X! .\test.rem(106): Trig = Thursday, 28 February, 1991
X  
X  OMIT 28 Feb
X  REM 1 -1 OMIT sat sun MSG 1 -1 OMIT Sat Sun (28 Feb omitted)
X! .\test.rem(109): Trig = Wednesday, 27 February, 1991
X  REM 1 --1 OMIT sat sun MSG 1 --1 OMIT Sat Sun (28 Feb omitted)
X! .\test.rem(110): Trig = Thursday, 28 February, 1991
X  
X  CLEAR-OMIT-CONTEXT
X  
X  # Try out UNTIL
X  REM Wed UNTIL 21 Feb 1991 MSG Wed UNTIL 21 Feb 1991
X! .\test.rem(115): Trig = Wednesday, 20 February, 1991
X  
X  # Try playing with the OMIT context
X  
X  OMIT 28 Feb 1991
X  REM 1 Mar -1 MSG 1 mar -1 (28feb91 omitted)
X! .\test.rem(120): Trig = Wednesday, 27 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1 (28Feb91 omitted)
X! .\test.rem(121): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE (28Feb91 omitted)
X! .\test.rem(122): Trig = Wednesday, 27 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP (28Feb91 omitted)
X! .\test.rem(123): Trig = Friday, 28 February, 1992
X  REM 28 Feb AFTER MSG 28 Feb AFTER (28Feb91 omitted)
X! .\test.rem(124): Trig = Friday, 1 March, 1991
X  
X  PUSH-OMIT-CONTEXT
X  CLEAR-OMIT-CONTEXT
X  REM 1 Mar -1 MSG 1 mar -1
X! .\test.rem(128): Trig = Thursday, 28 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1
X! .\test.rem(129): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE
X! .\test.rem(130): Trig = Thursday, 28 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP 
X! .\test.rem(131): Trig = Thursday, 28 February, 1991
X  REM 28 Feb AFTER MSG 28 Feb AFTER
X! .\test.rem(132): Trig = Thursday, 28 February, 1991
X  
X  POP-OMIT-CONTEXT
X  REM 1 Mar -1 MSG 1 mar -1 (28feb91 omitted)
X! .\test.rem(135): Trig = Wednesday, 27 February, 1991
X  REM 1 Mar --1 MSG 1 mar --1 (28Feb91 omitted)
X! .\test.rem(136): Trig = Thursday, 28 February, 1991
X  REM 28 Feb BEFORE MSG 28 Feb BEFORE (28Feb91 omitted)
X! .\test.rem(137): Trig = Wednesday, 27 February, 1991
X  REM 28 Feb SKIP MSG 28 Feb SKIP (28Feb91 omitted)
X! .\test.rem(138): Trig = Friday, 28 February, 1992
X  REM 28 Feb AFTER MSG 28 Feb AFTER (28Feb91 omitted)
X! .\test.rem(139): Trig = Friday, 1 March, 1991
X  
X  
X  REM 13 March 1991 *1 UNTIL 19 March 1991 MSG 13-19 Mar 91
X! .\test.rem(142): Trig = Wednesday, 13 March, 1991
X   
X  # Test BACK
X  CLEAR-OMIT-CONTEXT
X  REM 18 Feb 1991 +1 MSG 18 Feb 1991 +1
X! .\test.rem(146): Trig = Monday, 18 February, 1991
X  
X  OMIT 17 Feb 1991
X  REM 18 Feb 1991 +1 MSG 18 Feb 1991 +1 (17Feb91 omitted)
X! .\test.rem(149): Trig = Monday, 18 February, 1991
X  18 Feb 1991 +1 (17Feb91 omitted)
X  
X  REM 18 Feb 1991 ++1 MSG 18 Feb 1991 ++1 (17Feb91 omitted)
X! .\test.rem(150): Trig = Monday, 18 February, 1991
X  
X  CLEAR-OMIT-CONTEXT
X  # Test the scanfrom clause
X  REM Fri SATISFY 1
X! .\test.rem(154): Trig = Friday, 22 February, 1991
X  OMIT [trigger(trigdate())]
X  trigdate() => 1991/02/22
X  trigger(1991/02/22) => "22 February 1991"
X  REM Fri after MSG 23 Feb 1991
X! .\test.rem(156): Trig = Saturday, 23 February, 1991
X  CLEAR-OMIT-CONTEXT
X  REM Fri SCANFROM [trigger(today()-7)] SATISFY 1
X  today() => 1991/02/16
X  1991/02/16 - 7 => 1991/02/09
X  trigger(1991/02/09) => "9 February 1991"
X! .\test.rem(158): Trig = Friday, 15 February, 1991
X  OMIT [trigger(trigdate())]
X  trigdate() => 1991/02/15
X  trigger(1991/02/15) => "15 February 1991"
X  REM Fri after MSG 16 Feb 1991
X! .\test.rem(160): Trig = Saturday, 16 February, 1991
X  16 Feb 1991
X  
X  CLEAR-OMIT-CONTEXT
X***************
X*** 503,509 ****
X  coerce("string", 11:44) => "11:44"
X  set a009 coerce("int", "badnews")
X  coerce("int", "badnews") => Can't coerce
X! ./test.rem(171): Can't coerce
X  set a010 coerce("int", "12")
X  coerce("int", "12") => 12
X  set a011 coerce("int", 11:44)
X--- 503,509 ----
X  coerce("string", 11:44) => "11:44"
X  set a009 coerce("int", "badnews")
X  coerce("int", "badnews") => Can't coerce
X! .\test.rem(171): Can't coerce
X  set a010 coerce("int", "12")
X  coerce("int", "12") => 12
X  set a011 coerce("int", 11:44)
X***************
X*** 515,521 ****
X  date(1992, 2, 2) => 1992/02/02
X  set a014 date(1993, 2, 29)
X  date(1993, 2, 29) => Bad date specification
X! ./test.rem(176): Bad date specification
X  set a015 day(today())
X  today() => 1991/02/16
X  day(1991/02/16) => 16
X--- 515,521 ----
X  date(1992, 2, 2) => 1992/02/02
X  set a014 date(1993, 2, 29)
X  date(1993, 2, 29) => Bad date specification
X! .\test.rem(176): Bad date specification
X  set a015 day(today())
X  today() => 1991/02/16
X  day(1991/02/16) => 16
X***************
X*** 528,534 ****
X  set a019 defined("a019")
X  defined("a019") => 0
X  set a020 filename()
X! filename() => "./test.rem"
X  set a021 getenv("TEST_GETENV")
X  getenv("TEST_GETENV") => "foo bar baz"
X  set a022 hour(11:22)
X--- 528,534 ----
X  set a019 defined("a019")
X  defined("a019") => 0
X  set a020 filename()
X! filename() => ".\test.rem"
X  set a021 getenv("TEST_GETENV")
X  getenv("TEST_GETENV") => "foo bar baz"
X  set a022 hour(11:22)
X***************
X*** 610,624 ****
X  set a050 substr(a049, 2)
X  a049 => 21
X  substr(21, 2) => Type mismatch
X! ./test.rem(214): Type mismatch
X  set a051 substr(a050, 2, 6)
X! a050 => ./test.rem(215): Undefined variable: a050
X  set a052 time(1+2, 3+4)
X  1 + 2 => 3
X  3 + 4 => 7
X  time(3, 7) => 03:07
X  rem 10 jan 1992 AT 11:22 CAL
X! ./test.rem(217): Trig = Friday, 10 January, 1992
X  set a053 trigdate()
X  trigdate() => 1992/01/10
X  set a054 trigtime()
X--- 610,624 ----
X  set a050 substr(a049, 2)
X  a049 => 21
X  substr(21, 2) => Type mismatch
X! .\test.rem(214): Type mismatch
X  set a051 substr(a050, 2, 6)
X! a050 => .\test.rem(215): Undefined variable: a050
X  set a052 time(1+2, 3+4)
X  1 + 2 => 3
X  3 + 4 => 7
X  time(3, 7) => 03:07
X  rem 10 jan 1992 AT 11:22 CAL
X! .\test.rem(217): Trig = Friday, 10 January, 1992
X  set a053 trigdate()
X  trigdate() => 1992/01/10
X  set a054 trigtime()
X***************
X*** 631,637 ****
X  "a05" + "6" => "a056"
X  value("a056") => "SDFJHSDF KSJDFH KJSDFH KSJDFH"
X  set a058 version()
X! version() => "03.00.10"
X  set a059 wkday(today())
X  today() => 1991/02/16
X  wkday(1991/02/16) => "Saturday"
X--- 631,637 ----
X  "a05" + "6" => "a056"
X  value("a056") => "SDFJHSDF KSJDFH KJSDFH KSJDFH"
X  set a058 version()
X! version() => "03.00.11"
X  set a059 wkday(today())
X  today() => 1991/02/16
X  wkday(1991/02/16) => "Saturday"
X***************
X*** 710,733 ****
X  x => "foo"
X  y => 11:33
X  "foo" * 11:33 => Type mismatch
X! ./test.rem(240): '*': Type mismatch
X  Leaving UserFN h() => Type mismatch
X  set a074 dosubst("%a %b %c %d %e %f %g %h", '1992/5/5')
X  dosubst("%a %b %c %d %e %f %g %h", 1992/05/05) => "on Tuesday, 5 May, 1992 in 444 days' tim"...
X  msg [a074]%
X! ./test.rem(242): Trig = Saturday, 16 February, 1991
X  a074 => "on Tuesday, 5 May, 1992 in 444 days' tim"...
X  on Tuesday, 5 May, 1992 in 444 days' time on Tuesday 5 on 05/05/1992 on 05/05/1992 on Tuesday, 5 May on 05/05
X  set a075 dosubst("%i %j %k %l %m %n %o %p", '1992/5/5')
X  dosubst("%i %j %k %l %m %n %o %p", 1992/05/05) => "on 05/05 on Tuesday, May 5th, 1992 on Tu"...
X  msg [a075]%
X! ./test.rem(244): Trig = Saturday, 16 February, 1991
X  a075 => "on 05/05 on Tuesday, May 5th, 1992 on Tu"...
X  on 05/05 on Tuesday, May 5th, 1992 on Tuesday, May 5th on 1992/05/05 May 5  s
X  set a076 dosubst("%q %r %s %t %u %v %w %x", '1992/5/5')
X  dosubst("%q %r %s %t %u %v %w %x", 1992/05/05) => "s' 05 th 05 on Tuesday, 5th May, 1992 on"...
X  msg [a076]%
X! ./test.rem(246): Trig = Saturday, 16 February, 1991
X  a076 => "s' 05 th 05 on Tuesday, 5th May, 1992 on"...
X  s' 05 th 05 on Tuesday, 5th May, 1992 on Tuesday, 5th May Tuesday 444
X  set a077 dosubst("%y %z", '1992/5/5')
X--- 710,733 ----
X  x => "foo"
X  y => 11:33
X  "foo" * 11:33 => Type mismatch
X! .\test.rem(240): '*': Type mismatch
X  Leaving UserFN h() => Type mismatch
X  set a074 dosubst("%a %b %c %d %e %f %g %h", '1992/5/5')
X  dosubst("%a %b %c %d %e %f %g %h", 1992/05/05) => "on Tuesday, 5 May, 1992 in 444 days' tim"...
X  msg [a074]%
X! .\test.rem(242): Trig = Saturday, 16 February, 1991
X  a074 => "on Tuesday, 5 May, 1992 in 444 days' tim"...
X  on Tuesday, 5 May, 1992 in 444 days' time on Tuesday 5 on 05/05/1992 on 05/05/1992 on Tuesday, 5 May on 05/05
X  set a075 dosubst("%i %j %k %l %m %n %o %p", '1992/5/5')
X  dosubst("%i %j %k %l %m %n %o %p", 1992/05/05) => "on 05/05 on Tuesday, May 5th, 1992 on Tu"...
X  msg [a075]%
X! .\test.rem(244): Trig = Saturday, 16 February, 1991
X  a075 => "on 05/05 on Tuesday, May 5th, 1992 on Tu"...
X  on 05/05 on Tuesday, May 5th, 1992 on Tuesday, May 5th on 1992/05/05 May 5  s
X  set a076 dosubst("%q %r %s %t %u %v %w %x", '1992/5/5')
X  dosubst("%q %r %s %t %u %v %w %x", 1992/05/05) => "s' 05 th 05 on Tuesday, 5th May, 1992 on"...
X  msg [a076]%
X! .\test.rem(246): Trig = Saturday, 16 February, 1991
X  a076 => "s' 05 th 05 on Tuesday, 5th May, 1992 on"...
X  s' 05 th 05 on Tuesday, 5th May, 1992 on Tuesday, 5th May Tuesday 444
X  set a077 dosubst("%y %z", '1992/5/5')
X***************
X*** 734,740 ****
X  dosubst("%y %z", 1992/05/05) => "1992 92
X  "
X  msg [a077]%
X! ./test.rem(248): Trig = Saturday, 16 February, 1991
X  a077 => "1992 92
X  "
X  1992 92
X--- 734,740 ----
X  dosubst("%y %z", 1992/05/05) => "1992 92
X  "
X  msg [a077]%
X! .\test.rem(248): Trig = Saturday, 16 February, 1991
X  a077 => "1992 92
X  "
X  1992 92
X***************
X*** 772,778 ****
X          a048  "foo"
X          a067  "INT"
X          a039  "February"
X!         a058  "03.00.10"
X          a077  "1992 92
X  "
X          a049  21
X--- 772,778 ----
X          a048  "foo"
X          a067  "INT"
X          a039  "February"
X!         a058  "03.00.11"
X          a077  "1992 92
X  "
X          a049  21
X***************
X*** 784,790 ****
X          a000  1
X          a010  12
X          a001  1
X!         a020  "./test.rem"
X          a011  704
X          a030  1
X          a002  102
X--- 784,790 ----
X          a000  1
X          a010  12
X          a001  1
X!         a020  ".\test.rem"
X          a011  704
X          a030  1
X          a002  102
X*** ../prev/token.c	Wed Oct 20 11:45:09 1993
X--- ./token.c	Wed Nov  3 09:37:09 1993
X***************
X*** 35,41 ****
X        string++; \
X     }
X  
X! #define UPPER(c) ( ((c) >= 'a' && (c) <= 'z') ? (c) - 'a' + 'A' : (c) )
X  
X  /* The big array holding all recognized (literal) tokens in reminder file.
X     Keep this array sorted, or software will not work. */
X--- 35,41 ----
X        string++; \
X     }
X  
X! #define UPPER(c) (islower(c) ? toupper(c) : c)
X  
X  /* The big array holding all recognized (literal) tokens in reminder file.
X     Keep this array sorted, or software will not work. */
X***************
X*** 51,78 ****
X     { "cal", 		3, 	T_RemType, 	CAL_TYPE },
X     { "clear-omit-context", 5,   T_Clr,          0 },
X     { "debug",           5,      T_Debug,        0 },
X!    { "december", 	3,	T_Month,	11 },
X     { "dumpvars",        4,      T_Dumpvars,     0 },
X     { "else", 		4, 	T_Else, 	0 },
X     { "endif", 		5, 	T_EndIf, 	0 },
X     { "errmsg",          6,      T_ErrMsg,       0 },
X     { "exit",		4,	T_Exit,		0 },
X!    { "february", 	3, 	T_Month,	1 },
X     { "flush",		5,	T_Flush,	0 },
X!    { "friday", 		3,	T_WkDay,	4 },
X     { "fset",		4,	T_Fset,		0 },
X     { "if",		2,	T_If,		0 },
X     { "iftrig",		6,	T_IfTrig,	0 },
X     { "include", 	3, 	T_Include, 	0 },
X!    { "january", 	3, 	T_Month,	0 },
X     { "july",		3,	T_Month,	6 },
X     { "june",		3,	T_Month,	5 },
X     { "march",		3,	T_Month,	2 },
X     { "may",		3, 	T_Month, 	4 },
X!    { "monday", 		3,	T_WkDay,	0 },
X     { "msf",		3,	T_RemType,	MSF_TYPE },
X     { "msg", 		3, 	T_RemType, 	MSG_TYPE },
X!    { "november", 	3, 	T_Month,	10 },
X     { "october",		3, 	T_Month,	9 },
X     { "omit",		3,	T_Omit,		0 },
X     { "once", 		3, 	T_Once,		0 },
X--- 51,78 ----
X     { "cal", 		3, 	T_RemType, 	CAL_TYPE },
X     { "clear-omit-context", 5,   T_Clr,          0 },
X     { "debug",           5,      T_Debug,        0 },
X!    { "december",	3,	T_Month,	11 },
X     { "dumpvars",        4,      T_Dumpvars,     0 },
X     { "else", 		4, 	T_Else, 	0 },
X     { "endif", 		5, 	T_EndIf, 	0 },
X     { "errmsg",          6,      T_ErrMsg,       0 },
X     { "exit",		4,	T_Exit,		0 },
X!    { "february",	3, 	T_Month,	1 },
X     { "flush",		5,	T_Flush,	0 },
X!    { "friday",		3,	T_WkDay,	4 },
X     { "fset",		4,	T_Fset,		0 },
X     { "if",		2,	T_If,		0 },
X     { "iftrig",		6,	T_IfTrig,	0 },
X     { "include", 	3, 	T_Include, 	0 },
X!    { "january",		3, 	T_Month,	0 },
X     { "july",		3,	T_Month,	6 },
X     { "june",		3,	T_Month,	5 },
X     { "march",		3,	T_Month,	2 },
X     { "may",		3, 	T_Month, 	4 },
X!    { "monday",		3,	T_WkDay,	0 },
X     { "msf",		3,	T_RemType,	MSF_TYPE },
X     { "msg", 		3, 	T_RemType, 	MSG_TYPE },
X!    { "november",	3, 	T_Month,	10 },
X     { "october",		3, 	T_Month,	9 },
X     { "omit",		3,	T_Omit,		0 },
X     { "once", 		3, 	T_Once,		0 },
X***************
X*** 88,97 ****
X     { "saturday",	3,	T_WkDay,	5 },
X     { "scanfrom",	4,	T_Scanfrom,	0 },
X     { "sched",		5,	T_Sched,	0 },
X!    { "september", 	3, 	T_Month, 	8 },
X     { "set",		3,	T_Set,		0 },
X     { "skip", 		3, 	T_Skip, 	SKIP_SKIP },
X!    { "sunday", 		3,	T_WkDay,	6 },
X     { "thursday",	3,	T_WkDay,	3 },
X     { "tuesday",		3,	T_WkDay,	1 },
X     { "unset", 		5, 	T_UnSet, 	0 },
X--- 88,97 ----
X     { "saturday",	3,	T_WkDay,	5 },
X     { "scanfrom",	4,	T_Scanfrom,	0 },
X     { "sched",		5,	T_Sched,	0 },
X!    { "september",	3, 	T_Month, 	8 },
X     { "set",		3,	T_Set,		0 },
X     { "skip", 		3, 	T_Skip, 	SKIP_SKIP },
X!    { "sunday",		3,	T_WkDay,	6 },
X     { "thursday",	3,	T_WkDay,	3 },
X     { "tuesday",		3,	T_WkDay,	1 },
X     { "unset", 		5, 	T_UnSet, 	0 },
X*** ../prev/userfns.c	Tue Oct 12 16:22:54 1993
X--- ./userfns.c	Tue Nov 16 17:40:03 1993
X***************
X*** 177,183 ****
X     /* Free the local variables first */
X     v = f->locals;
X     while(v) {
X!       DestroyValue(&(v->v));
X        prev = v;
X        v = v->next;
X        free(prev);
X--- 177,183 ----
X     /* Free the local variables first */
X     v = f->locals;
X     while(v) {
X!       DestroyValue(v->v);
X        prev = v;
X        v = v->next;
X        free(prev);
X***************
X*** 344,350 ****
X     Var *var;
X  
X     for (i=0, var=f->locals; var && i<f->nargs; var=var->next, i++) {
X!       if ( (r=PopValStack(&(var->v))) ) {
X  	 DestroyLocalVals(f);
X  	 return r;
X        }
X--- 344,350 ----
X     Var *var;
X  
X     for (i=0, var=f->locals; var && i<f->nargs; var=var->next, i++) {
X!       if ( (r=FnPopValStack(&(var->v))) ) {
X  	 DestroyLocalVals(f);
X  	 return r;
X        }
X***************
X*** 370,376 ****
X     Var *v = f->locals;
X  
X     while(v) {
X!       DestroyValue(&(v->v));
X        v = v->next;
X     }
X  }
X--- 370,376 ----
X     Var *v = f->locals;
X  
X     while(v) {
X!       DestroyValue(v->v);
X        v = v->next;
X     }
X  }
X*** ../prev/var.c	Thu Oct 14 10:21:45 1993
X--- ./var.c	Tue Nov 16 17:40:18 1993
X***************
X*** 133,139 ****
X        v = v-> next;
X     }
X     if (!v) return E_NOSUCH_VAR;
X!    DestroyValue(&(v->v));
X     if (prev) prev->next = v->next; else VHashTbl[h] = v->next;
SHAR_EOF
echo "End of Remind-3.0/Patch-11/part part 4"
echo "File patch.11 is continued in part 5"
echo "5" > shar3_seq_.tmp
exit 0

exit 0 # Just in case...
