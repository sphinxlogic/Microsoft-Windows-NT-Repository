Newsgroups: comp.sources.misc
From: jsp@Princeton.EDU (James Plank)
Subject:  v28i007:  jgraph - A filter for plotting postscript graphs, Patch07.1
Message-ID: <1992Feb2.033217.25138@sparky.imd.sterling.com>
X-Md4-Signature: 6cb31a4a1a47822c7b63641e409c4bd1
Date: Sun, 2 Feb 1992 03:32:17 GMT
Approved: kent@sparky.imd.sterling.com

Submitted-by: jsp@Princeton.EDU (James Plank)
Posting-number: Volume 28, Issue 7
Archive-name: jgraph/patch07.1
Environment: UNIX, VMS, postscript
Patch-To: jgraph: Volume 16, Issue 20

Jgraph Patch 7.1: Thu Jan 23 16:24:20 EST 1992

Sorry, but an important bug has been found in jgraph (at least for 
some decstations -- others as well as suns and sparcs seem to be
unaffected).  Thanks to Matt Blumrich for spotting it. Anyway,
here's the patch file from version 7.0:


*** ../work/README	Thu Jan 23 16:05:12 1992
--- README	Thu Jan 23 16:00:07 1992
***************
*** 1,4 ****
! $Revision: 7.0 $
  
  Jgraph takes the description of a graph or graphs in the standard
  input, and produces a postscript file on the standard output.  Jgraph
--- 1,4 ----
! $Revision: 7.1 $
  
  Jgraph takes the description of a graph or graphs in the standard
  input, and produces a postscript file on the standard output.  Jgraph
*** ../work/draw.c	Thu Jan 23 16:05:15 1992
--- draw.c	Thu Jan 23 15:59:54 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/draw.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:09:46 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/draw.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:57:48 $
   * $Author: jsp $
   */
  
*** ../work/edit.c	Thu Jan 23 16:05:16 1992
--- edit.c	Thu Jan 23 15:59:55 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/edit.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:09:47 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/edit.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:57:49 $
   * $Author: jsp $
   */
  
*** ../work/jgraph.1	Thu Jan 23 16:05:21 1992
--- jgraph.1	Thu Jan 23 16:00:06 1992
***************
*** 1185,1188 ****
  .sp
  There may well be loads of other bugs.  Send to jsp@princeton.edu.
  .sp
! This is $Revision: 7.0 $.
--- 1185,1188 ----
  .sp
  There may well be loads of other bugs.  Send to jsp@princeton.edu.
  .sp
! This is $Revision: 7.1 $.
*** ../work/jgraph.c	Thu Jan 23 16:05:22 1992
--- jgraph.c	Thu Jan 23 15:59:57 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/jgraph.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:09:52 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/jgraph.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:57:54 $
   * $Author: jsp $
   */
  
*** ../work/jgraph.h	Thu Jan 23 16:05:23 1992
--- jgraph.h	Thu Jan 23 15:59:58 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/jgraph.h,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:09:54 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/jgraph.h,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:57:56 $
   * $Author: jsp $
   */
  
*** ../work/list.c	Thu Jan 23 16:05:24 1992
--- list.c	Thu Jan 23 15:59:58 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/list.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:09:55 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/list.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:57:57 $
   * $Author: jsp $
   */
  
*** ../work/list.h	Thu Jan 23 16:05:24 1992
--- list.h	Thu Jan 23 15:59:59 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/list.h,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:09:55 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/list.h,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:57:58 $
   * $Author: jsp $
   */
  
*** ../work/printline.c	Thu Jan 23 16:05:26 1992
--- printline.c	Thu Jan 23 15:59:59 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/printline.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:09:57 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/printline.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:58:00 $
   * $Author: jsp $
   */
  
*** ../work/prio_list.c	Thu Jan 23 16:05:27 1992
--- prio_list.c	Thu Jan 23 16:00:00 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/prio_list.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:09:58 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/prio_list.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:58:01 $
   * $Author: jsp $
   */
  
*** ../work/prio_list.h	Thu Jan 23 16:05:27 1992
--- prio_list.h	Thu Jan 23 16:00:01 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/prio_list.h,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:10:00 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/prio_list.h,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:58:02 $
   * $Author: jsp $
   */
  
*** ../work/process.c	Thu Jan 23 16:05:28 1992
--- process.c	Thu Jan 23 16:00:01 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/process.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:10:01 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/process.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:58:03 $
   * $Author: jsp $
   */
  
***************
*** 536,545 ****
            x = c->l->x - g->legend->midspace - g->legend->linelength / 2.0;
          } else x = c->l->x - g->legend->midspace;
          if (c->marktype != 'n') {
!           g->yminval = MIN(g->yminval, y - abs(c->marksize[1])/2.0);
!           g->ymaxval = MAX(g->ymaxval, y + abs(c->marksize[1])/2.0);
!           g->xminval = MIN(g->xminval, x - abs(c->marksize[0])/2.0);
!           g->xmaxval = MAX(g->xmaxval, x + abs(c->marksize[0])/2.0);
          }
          process_label_extrema(c->l, g);
        }
--- 536,545 ----
            x = c->l->x - g->legend->midspace - g->legend->linelength / 2.0;
          } else x = c->l->x - g->legend->midspace;
          if (c->marktype != 'n') {
!           g->yminval = MIN(g->yminval, y - fabs(c->marksize[1])/2.0);
!           g->ymaxval = MAX(g->ymaxval, y + fabs(c->marksize[1])/2.0);
!           g->xminval = MIN(g->xminval, x - fabs(c->marksize[0])/2.0);
!           g->xmaxval = MAX(g->xmaxval, x + fabs(c->marksize[0])/2.0);
          }
          process_label_extrema(c->l, g);
        }
*** ../work/show.c	Thu Jan 23 16:05:29 1992
--- show.c	Thu Jan 23 16:00:04 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/show.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:10:04 $
   * $Author: jsp $
   */ 
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/show.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:58:06 $
   * $Author: jsp $
   */ 
  
*** ../work/token.c	Thu Jan 23 16:05:40 1992
--- token.c	Thu Jan 23 16:00:05 1992
***************
*** 1,7 ****
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/token.c,v $
!  * $Revision: 7.0 $
!  * $Date: 92/01/23 11:10:05 $
   * $Author: jsp $
   */
  
--- 1,7 ----
  /* 
   * $Source: /n/fs/vd/jsp/src/jgraph/RCS/token.c,v $
!  * $Revision: 7.1 $
!  * $Date: 92/01/23 15:58:07 $
   * $Author: jsp $
   */
  

exit 0 # Just in case...
