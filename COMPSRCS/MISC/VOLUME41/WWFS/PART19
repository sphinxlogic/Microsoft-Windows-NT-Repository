Newsgroups: comp.sources.misc
From: youki-k@is.aist-nara.ac.jp (Youki Kadobayashi)
Subject: v41i104:  wwfs - WorldWide File System, Part19/22
Message-ID: <1994Jan17.202535.20584@sparky.sterling.com>
X-Md4-Signature: 1eb91e7fb0e25903123ab4979840bcd9
Sender: kent@sparky.sterling.com (Kent Landfield)
Organization: Nara Institute of Science and Technology, Japan
Date: Mon, 17 Jan 1994 20:25:35 GMT
Approved: kent@sparky.sterling.com

Submitted-by: youki-k@is.aist-nara.ac.jp (Youki Kadobayashi)
Posting-number: Volume 41, Issue 104
Archive-name: wwfs/part19
Environment: UNIX, inet

#! /bin/sh
# This is a shell archive.  Remove anything before this line, then feed it
# into a shell via "sh file" or similar.  To overwrite existing files,
# type "sh file -c".
# Contents:  config/mount_irix.c config/os-acis43.h
#   config/os-concentrix.h config/os-convex.h config/os-fpx4.h
#   config/os-hcx.h config/os-hlh42.h config/os-next.h
#   config/os-pyrOSx.h config/os-riscix.h config/os-sos3.h
#   config/os-stellix.h config/os-umax43.h csd/conn.c csd/dumpvar.c
#   csd/err.c csd/global.h csd/proto.c csd/util.h doc/Copyright
#   include/am.h libww/renamesym.pl mule/wwfs-access-hook.el
#   release.pl rpc/cs_prot_svc.c wwmount/Makefile.build
# Wrapped by kent@sparky on Sun Jan 16 17:48:40 1994
PATH=/bin:/usr/bin:/usr/ucb:/usr/local/bin:/usr/lbin:$PATH ; export PATH
echo If this archive is complete, you will see the following message:
echo '          "shar: End of archive 19 (of 22)."'
if test -f 'config/mount_irix.c' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/mount_irix.c'\"
else
  echo shar: Extracting \"'config/mount_irix.c'\" \(2792 characters\)
  sed "s/^X//" >'config/mount_irix.c' <<'END_OF_FILE'
X/*
X * Copyright (c) 1990 Jan-Simon Pendry
X * Copyright (c) 1990 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1990 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: mount_irix.c,v 5.2.2.1 1992/02/09 15:10:32 jsp beta $
X *
X */
X
X
X/*
X * IRIX Mount helper
X */
X
X#include "misc-irix.h"
X
X/*
X * Map from conventional mount arguments
X * to IRIX style arguments.
X */
Xirix_mount(fsname, dir, flags, type, data)
Xchar *fsname;
Xchar *dir;
Xint flags;
Xint type;
Xvoid *data;
X{
X	int size;
X
X#ifdef DEBUG
X	dlog("irix_mount: fsname %s, dir %s, type %d", fsname, dir, type);
X#endif /* DEBUG */
X
X	if (type == MOUNT_TYPE_NFS) {
X
X		size = sizeof (struct nfs_args);
X
X		return mount(dir, dir, (MS_FSS|MS_DATA|flags),
X			     type, (struct nfs_args *) data, size);
X
X	} else if (type == MOUNT_TYPE_UFS) {
X
X		return mount(fsname, dir, (MS_FSS|flags), type);
X
X	} else {
X		return EINVAL;
X	}
X
X}
END_OF_FILE
  if test 2792 -ne `wc -c <'config/mount_irix.c'`; then
    echo shar: \"'config/mount_irix.c'\" unpacked with wrong size!
  fi
  # end of 'config/mount_irix.c'
fi
if test -f 'config/os-acis43.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-acis43.h'\"
else
  echo shar: Extracting \"'config/os-acis43.h'\" \(2902 characters\)
  sed "s/^X//" >'config/os-acis43.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1989 Jan-Simon Pendry
X * Copyright (c) 1989 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1989 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-acis43.h,v 5.2.2.1 1992/02/09 15:10:02 jsp beta $
X *
X * IBM RT ACIS4.3 definitions for Amd (automounter)
X */
X
X/*
X * Does the compiler grok void *
X */
X#define	VOIDP
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_3
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X
X/*
X * Does this OS have NDBM support?
X */
X#define OS_HAS_NDBM
X
X/*
X * Name of filesystem types
X */
X#define	MOUNT_TYPE_NFS	MOUNT_NFS
X#define	MOUNT_TYPE_UFS	MOUNT_UFS
X#undef MTAB_TYPE_UFS
X#define	MTAB_TYPE_UFS	"ufs"
X
X#undef ARCH_ENDIAN
X#define	ARCH_ENDIAN	"big"
X
X/*
X * Need precise symlink lengths
X#define PRECISE_SYMLINKS
X */
END_OF_FILE
  if test 2902 -ne `wc -c <'config/os-acis43.h'`; then
    echo shar: \"'config/os-acis43.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-acis43.h'
fi
if test -f 'config/os-concentrix.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-concentrix.h'\"
else
  echo shar: Extracting \"'config/os-concentrix.h'\" \(2825 characters\)
  sed "s/^X//" >'config/os-concentrix.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1989 Jan-Simon Pendry
X * Copyright (c) 1989 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1989 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-concentrix.h,v 5.2.2.1 1992/02/09 15:10:14 jsp beta $
X *
X * Alliant Concentrix 5.0.0 definitions for Amd (automounter)
X */
X
X/*
X * Does the compiler grok void *
X */
X#undef	VOIDP
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_3
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X
X/*
X * Does this OS have NDBM support?
X */
X#define OS_HAS_NDBM
X
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#define	ARCH_ENDIAN	"big"
X
X/*
X * Name of filesystem types
X */
X#define MOUNT_TYPE_NFS	MOUNT_NFS
X#define MOUNT_TYPE_UFS	MOUNT_UFS
END_OF_FILE
  if test 2825 -ne `wc -c <'config/os-concentrix.h'`; then
    echo shar: \"'config/os-concentrix.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-concentrix.h'
fi
if test -f 'config/os-convex.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-convex.h'\"
else
  echo shar: Extracting \"'config/os-convex.h'\" \(2868 characters\)
  sed "s/^X//" >'config/os-convex.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1990 Jan-Simon Pendry
X * Copyright (c) 1990 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1990 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-convex.h,v 5.2.2.1 1992/02/09 15:10:16 jsp beta $
X *
X * Convex C220, version 7.1 definitions for Amd (automounter)
X *         from Eitan Mizrotsky <eitan@shum.huji.ac.il>
X */
X
X
X/*
X * Does the compiler grok void *
X */
X#undef	VOIDP
X 
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_3
X 
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X 
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#define	ARCH_ENDIAN	"big"
X 
X/*
X * Name of filesystem types
X */
X#define	MOUNT_TYPE_UFS	MOUNT_UFS
X#define MOUNT_TYPE_NFS	MOUNT_NFS
X 
X 
X#define strrchr rindex
X#define strchr  index
END_OF_FILE
  if test 2868 -ne `wc -c <'config/os-convex.h'`; then
    echo shar: \"'config/os-convex.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-convex.h'
fi
if test -f 'config/os-fpx4.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-fpx4.h'\"
else
  echo shar: Extracting \"'config/os-fpx4.h'\" \(3121 characters\)
  sed "s/^X//" >'config/os-fpx4.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1990 Jan-Simon Pendry
X * Copyright (c) 1990 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1990 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-fpx4.h,v 5.2.2.2 1992/05/31 16:39:34 jsp Exp $
X *
X * Celerity FPX 4.1/2 definitions for Amd (automounter)
X *      from Stephen Pope <scp@grizzly.acl.lanl.gov>
X */
X
X/*
X * FPX wants to include sys headers multiple times
X */
X#define INCLUDE_HEADERS
X
X/*
X * FPX sys/mount.h includes sys/nfs.h; prevent this
X */
X#define INCLUDED_nfs
X
X/*
X * FPX doesn't define NMOUNT anywhere
X */
X#define NMOUNT 40
X
X/*
X * Does the compiler grok void *
X */
X/* #define VOIDP */
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_4
X#define	svc_fdset svc_fds
X#define	svc_getreqset(p) svc_getreq((*p).fds_bits[0])
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define NFS_3
X
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#define ARCH_ENDIAN     "big"
X
X/*
X * Name of filesystem types
X */
X#define MOUNT_TYPE_NFS MOUNT_NFS
X#define MOUNT_TYPE_UFS MOUNT_UFS
END_OF_FILE
  if test 3121 -ne `wc -c <'config/os-fpx4.h'`; then
    echo shar: \"'config/os-fpx4.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-fpx4.h'
fi
if test -f 'config/os-hcx.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-hcx.h'\"
else
  echo shar: Extracting \"'config/os-hcx.h'\" \(3020 characters\)
  sed "s/^X//" >'config/os-hcx.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1990 Jan-Simon Pendry
X * Copyright (c) 1990 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1990 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-hcx.h,v 5.2.2.1 1992/02/09 15:10:20 jsp beta $
X *
X * Harris HCX/UX Release 3.0 definitions for Amd (automounter)
X */
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_3
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X
X/*
X * Deviant call necessary.  The mount() routine in libc only works for UFS
X * (it's a backward-compatible piece of C code which traps to mountsyscall).
X */
X#undef MOUNT_TRAP
X#define	MOUNT_TRAP(type, mnt, flags, mnt_data) \
X	mountsyscall(type, mnt->mnt_dir, flags, mnt_data)
X
X/*
X * Name of filesystem types
X */
X#define	MOUNT_TYPE_NFS	MOUNT_NFS
X#define	MOUNT_TYPE_UFS	MOUNT_UFS
X
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#ifdef _hcx
X#define ARCH_ENDIAN "big"
X#else
XXXX - bizarre!
X#endif
END_OF_FILE
  if test 3020 -ne `wc -c <'config/os-hcx.h'`; then
    echo shar: \"'config/os-hcx.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-hcx.h'
fi
if test -f 'config/os-hlh42.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-hlh42.h'\"
else
  echo shar: Extracting \"'config/os-hlh42.h'\" \(2996 characters\)
  sed "s/^X//" >'config/os-hlh42.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1989 Jan-Simon Pendry
X * Copyright (c) 1989 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1989 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-hlh42.h,v 5.2.2.1 1992/02/09 15:10:22 jsp beta $
X *
X * HLH OTS definitions for Amd (automounter)
X */
X
X/*
X * Does the compiler grok void *
X */
X#undef	VOIDP
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_3
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#if defined(hlh)
X#define	ARCH_ENDIAN	"little"
X#endif
X
X/*
X * Name of filesystem types
X */
X#define	MOUNT_TYPE_NFS	MOUNT_NFS
X#define	MOUNT_TYPE_UFS	MOUNT_UFS
X
X/*
X * Miscellaneous HLH 4.2 incantations
X */
X#define	strchr	index
X#define strrchr	rindex
X#define sigmask(x)	(1 << ((x)-1))
X
X/*
X * HLH's 4.2 needs the extra RPC definitions.
X */
X#define NEED_XDR_POINTER
X#define	NEED_CLNT_SPERRNO
END_OF_FILE
  if test 2996 -ne `wc -c <'config/os-hlh42.h'`; then
    echo shar: \"'config/os-hlh42.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-hlh42.h'
fi
if test -f 'config/os-next.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-next.h'\"
else
  echo shar: Extracting \"'config/os-next.h'\" \(2927 characters\)
  sed "s/^X//" >'config/os-next.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1990 Jan-Simon Pendry
X * Copyright (c) 1990 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1990 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-next.h,v 5.2.2.1 1992/02/09 15:10:33 jsp beta $
X *
X * NeXT OS definitions for Amd (automounter)
X * By Bill Trost, Reed College
X * trost%reed@cse.ogi.edu,
X *
X * Derived from the Sun 3.2 definitions for Amd (os-sos3.h).
X */
X
X/*
X * Does the compiler grok void *	(NeXT uses gcc)
X */
X#define VOIDP
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define RPC_3
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define NFS_3
X
X/*
X * Name of filesystem types
X */
X#define MOUNT_TYPE_UFS	MOUNT_UFS
X#define MOUNT_TYPE_NFS	MOUNT_NFS
X#undef MTAB_TYPE_UFS
X#define MTAB_TYPE_UFS	"4.3"
X
X/*
X * Where to get NFS definitions
X */
X#define NFS_HDR "misc-next.h"
END_OF_FILE
  if test 2927 -ne `wc -c <'config/os-next.h'`; then
    echo shar: \"'config/os-next.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-next.h'
fi
if test -f 'config/os-pyrOSx.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-pyrOSx.h'\"
else
  echo shar: Extracting \"'config/os-pyrOSx.h'\" \(2864 characters\)
  sed "s/^X//" >'config/os-pyrOSx.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1990 Jan-Simon Pendry
X * Copyright (c) 1990 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1990 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-pyrOSx.h,v 5.2.2.1 1992/02/09 15:10:37 jsp beta $
X *
X * Pyramid OSx definitions for Amd (automounter)
X *		from Stefan Petri <petri@tubsibr.UUCP>
X */
X
X/*
X * Does the compiler grok void *
X */
X#define	VOIDP
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_3
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#define	ARCH_ENDIAN	"big"
X
X/*
X * Name of filesystem types
X */
X#define	MOUNT_TYPE_UFS	MOUNT_UFS
X#define MOUNT_TYPE_NFS	MOUNT_NFS
X
X#define	strchr	index
X#define	strrchr	rindex
X
X#define	hostname	mnthostname
END_OF_FILE
  if test 2864 -ne `wc -c <'config/os-pyrOSx.h'`; then
    echo shar: \"'config/os-pyrOSx.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-pyrOSx.h'
fi
if test -f 'config/os-riscix.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-riscix.h'\"
else
  echo shar: Extracting \"'config/os-riscix.h'\" \(2983 characters\)
  sed "s/^X//" >'config/os-riscix.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1989 Jan-Simon Pendry
X * Copyright (c) 1989 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1989 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-riscix.h,v 5.2.2.1 1992/02/09 15:10:38 jsp beta $
X *
X * Acorn Archimedes RISC iX definitions for Amd (automounter)
X * Contributed by Piete Brooks.
X */
X
X/*
X * Does the compiler grok void *
X */
X#define	VOIDP
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_3
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X
X/*
X * Does this OS have NDBM support?
X */
X#define OS_HAS_NDBM
X
X/*
X * Byte ordering
X */
X#undef	ARCH_ENDIAN
X#define	ARCH_ENDIAN "little"
X
X/*
X * Is the mount table mirrored in software
X */
X#define	UPDATE_MTAB
X
X/*
X * Name of filesystem types
X */
X#define	MOUNT_TYPE_NFS	MOUNT_NFS
X#define	MOUNT_TYPE_UFS	MOUNT_UFS
X
X#undef	MTAB_TYPE_UFS
X#define	MTAB_TYPE_UFS	MNTTYPE_43
END_OF_FILE
  if test 2983 -ne `wc -c <'config/os-riscix.h'`; then
    echo shar: \"'config/os-riscix.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-riscix.h'
fi
if test -f 'config/os-sos3.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-sos3.h'\"
else
  echo shar: Extracting \"'config/os-sos3.h'\" \(2862 characters\)
  sed "s/^X//" >'config/os-sos3.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1989 Jan-Simon Pendry
X * Copyright (c) 1989 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1989 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-sos3.h,v 5.2.2.1 1992/02/09 15:10:39 jsp beta $
X *
X * SunOS 3.2 definitions for Amd (automounter)
X */
X
X/*
X * Does the compiler grok void *
X */
X#define	VOIDP
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_3
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#if defined(mc68010) || defined(mc68020) || defined(sparc)
X#define	ARCH_ENDIAN	"big"
X#endif
X#if defined(i386)
X#define ARCH_ENDIAN	"little"
X#endif
X
X/*
X * Name of filesystem types
X */
X#define	MOUNT_TYPE_UFS	MOUNT_UFS
X#define MOUNT_TYPE_NFS	MOUNT_NFS
END_OF_FILE
  if test 2862 -ne `wc -c <'config/os-sos3.h'`; then
    echo shar: \"'config/os-sos3.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-sos3.h'
fi
if test -f 'config/os-stellix.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-stellix.h'\"
else
  echo shar: Extracting \"'config/os-stellix.h'\" \(2767 characters\)
  sed "s/^X//" >'config/os-stellix.h' <<'END_OF_FILE'
X/* $Id: os-stellix.h,v 5.2.2.1 1992/02/09 15:10:43 jsp beta $ */
X
X/*
X * Amd (automounter) definitions for Stellix.
X * From Stephen C. Pope <scp@acl.lanl.gov>
X *
X * Copyright (c) 1989 Jan-Simon Pendry
X * Copyright (c) 1989 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1989 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms are permitted provided
X * that: (1) source distributions retain this entire copyright notice and
X * comment, and (2) distributions including binaries display the following
X * acknowledgement:  ``This product includes software developed by the
X * University of California, Berkeley and its contributors'' in the
X * documentation or other materials provided with the distribution and in
X * all advertising materials mentioning features or use of this software.
X * Neither the name of the University nor the names of its contributors may
X * be used to endorse or promote products derived from this software without
X * specific prior written permission.
X * THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR IMPLIED
X * WARRANTIES, INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF
X * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
X *
X *	%W% (Berkeley) %G%
X */
X
X#define RPC_3
X
X#define NFS_3
X
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#define	ARCH_ENDIAN	"big"
X
X#define HAS_SYSLOG
X
X#define OS_HAS_NDBM
X
X#define UPDATE_MTAB
X
X#define USE_FCNTL
X
X#define LOCK_FCNTL
X
X/*
X * Name of filesystem types
X */
X#undef MTAB_TYPE_UFS
X#define	MTAB_TYPE_UFS	"sfs"
X
X#define MOUNT_TYPE_UFS sysfs(GETFSIND, "SFS1")
X#define MOUNT_TYPE_NFS sysfs(GETFSIND, "NFS")
X
X#define SYS5_SIGNALS
X#define HAS_SVR3_SIGNALS
X
X#define MOUNT_HELPER_SOURCE "mount_stellix.c"
X
X/*
X * Name of mount & unmount system calls
X *
X * NOTE:
X *  UNMOUNT_TRAP takes a struct mntent *
X */
X#undef MOUNT_TRAP
X#define	MOUNT_TRAP(type, mnt, flags, mnt_data) \
X	stellix_mount(mnt->mnt_fsname, mnt->mnt_dir, flags, type, mnt_data)
X#undef UNMOUNT_TRAP
X#define	UNMOUNT_TRAP(mnt)	umount(mnt->mnt_dir)
X
X/*
X * How to unmount filesystems.
X * NEED_UMOUNT_FS includes code to scan the mount table
X * to find the correct information for the unmount system
X * call.  Some systems, such as 4.4bsd, do not require
X * this - they can just do an unmount system call directly.
X */
X/* #define	NEED_UMOUNT_FS */
X/* #define	UMOUNT_FS(dir)	umount_fs(dir) */
X
X#define NFS_HDR "misc-stellix.h"
X#define UFS_HDR "misc-stellix.h"
X
X#define M_RDONLY        0x01            /* mount fs read only */
X
X#define bzero(ptr, len) memset(ptr, 0, len)
X#define bcopy(from, to, len) memcpy(to, from, len)
END_OF_FILE
  if test 2767 -ne `wc -c <'config/os-stellix.h'`; then
    echo shar: \"'config/os-stellix.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-stellix.h'
fi
if test -f 'config/os-umax43.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'config/os-umax43.h'\"
else
  echo shar: Extracting \"'config/os-umax43.h'\" \(2809 characters\)
  sed "s/^X//" >'config/os-umax43.h' <<'END_OF_FILE'
X/*
X * Copyright (c) 1989 Jan-Simon Pendry
X * Copyright (c) 1989 Imperial College of Science, Technology & Medicine
X * Copyright (c) 1989 The Regents of the University of California.
X * All rights reserved.
X *
X * This code is derived from software contributed to Berkeley by
X * Jan-Simon Pendry at Imperial College, London.
X *
X * Redistribution and use in source and binary forms, with or without
X * modification, are permitted provided that the following conditions
X * are met:
X * 1. Redistributions of source code must retain the above copyright
X *    notice, this list of conditions and the following disclaimer.
X * 2. Redistributions in binary form must reproduce the above copyright
X *    notice, this list of conditions and the following disclaimer in the
X *    documentation and/or other materials provided with the distribution.
X * 3. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the University of
X *      California, Berkeley and its contributors.
X * 4. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
X * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
X * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
X * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
X * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
X * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
X * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
X * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
X * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
X * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
X * SUCH DAMAGE.
X *
X *	%W% (Berkeley) %G%
X *
X * $Id: os-umax43.h,v 5.2.2.1 1992/02/09 15:10:55 jsp beta $
X *
X * UMAX 4.3 definitions for Amd (automounter)
X */
X
X/*
X * Does the compiler grok void *
X */
X#define	VOIDP
X
X/*
X * Which version of the Sun RPC library we are using
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	RPC_4
X
X/*
X * Which version of the NFS interface are we using.
X * This is the implementation release number, not
X * the protocol revision number.
X */
X#define	NFS_3
X
X/*
X * Does this OS have NDBM support?
X */
X#define OS_HAS_NDBM
X
X/*
X * Byte ordering
X */
X#undef ARCH_ENDIAN
X#define ARCH_ENDIAN	"little"
X
X/*
X * Name of filesystem types
X */
X#define MOUNT_TYPE_NFS	MOUNT_NFS
X#define MOUNT_TYPE_UFS	MOUNT_UFS
END_OF_FILE
  if test 2809 -ne `wc -c <'config/os-umax43.h'`; then
    echo shar: \"'config/os-umax43.h'\" unpacked with wrong size!
  fi
  # end of 'config/os-umax43.h'
fi
if test -f 'csd/conn.c' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'csd/conn.c'\"
else
  echo shar: Extracting \"'csd/conn.c'\" \(3170 characters\)
  sed "s/^X//" >'csd/conn.c' <<'END_OF_FILE'
X/* 
X * WorldWide File System
X * Copyright (c) 1992,1993 Youki Kadobayashi
X * Copyright (c) 1992,1993 Osaka University
X * All rights reserved.
X *
X * Permission to use, copy, modify and distribute this software and its
X * documentation is hereby granted, provided that the following conditions
X * are met:
X * 1. Both the copyright notice and this permission notice appear in
X *    all copies of the software, derivative works or modified versions,
X *    and any portions thereof, and that both notices appear in
X *    supporting documentation.
X * 2. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the Osaka University
X *      and its contributors.
X * 3. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X * UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X * WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X *
X * Osaka University requests users of this software to return to
X *
X *  Youki Kadobayashi
X *  Department of Information and Computer Sciences
X *  Osaka University, Toyonaka 560, Osaka, Japan
X *
X * any improvements or extensions that they make and grant Osaka
X * University the rights to redistribute these changes.
X */
Xstatic char *AtFSid = "$Header: conn.c[109.0] Wed Nov 24 03:47:04 1993 youki-k@is.aist-nara.ac.jp saved $";
X
X#include "wfs.h"
X#include "util.h"
X#include "global.h"
X
Xextern qelem conn_head;
Xqelem conn_head = { &conn_head, &conn_head };
Xstatic void *conn_callout;
X
Xstatic void conn_gc(), conn_close();
X
Xvoid
Xconn_start()
X{
X	conn_callout = timeout_set(gettime()+60, conn_gc, 0);
X}
X
Xstatic void
Xconn_gc()
X{
X	wf_conn *p, *p2;
X
X	ITER2(p, p2, wf_conn, &conn_head) {
X		if (p->thrdp) continue;
X		p->idle += 60;
X		if (p->idle > WF_CONN_TTL) {
X			conn_close(p);
X		}
X	}
X	conn_callout = timeout_set(gettime()+60, conn_gc, 0);
X}
X
Xvoid
Xconn_stop()
X{
X	wf_conn *cp;
X	ITER(cp, wf_conn, &conn_head) {
X		conn_close(cp);
X	}
X}
X
Xint
Xconn_count()
X{
X	return q_len(&conn_head);
X}
X
Xwf_conn *
Xconn_alloc()
X{
X	wf_conn *cp;
X
X	cp = ALLOC(wf_conn);
X	cp->proto = &proto_ftp;		/* XXX */
X	q_insert(cp, &conn_head);
X	return cp;
X}
X
Xvoid
Xconn_free(cp)
Xwf_conn *cp;
X{
X	if (cp->id == 0) {
X		syslog(LOG_WARNING, "connp->id == 0");
X	}
X	q_remove(cp);
X	FREE(cp);
X}
X
Xstatic void
Xconn_close(cp)
Xwf_conn *cp;
X{
X	srv_releaseconn(cp->srv, cp);
X	proto_close(cp);
X	conn_free(cp);
X}
X
Xvoid
Xconn_shutdown(cp, howto)
Xwf_conn *cp;
Xint howto;
X{
X	srv_releaseconn(cp->srv, cp);
X	proto_shutdown(cp, howto);
X	conn_free(cp);
X}
X
Xvoid
Xconn_dropped(so)
Xint so;
X{
X	wf_conn *p;
X
X	ITER(p, wf_conn, &conn_head) {
X		if (p->id == so) {
X			conn_close(p, 2);
X			return;
X		}
X	}
X	dlog("conn_dropped: no such connection");
X}
X
Xvoid
Xconn_inspect(reqp)
Xwf_req *reqp;
X{
X	wf_conn *p;
X
X	ITER(p, wf_conn, &conn_head) {
X		req_send(reqp, "conn %lx: id= %d\n", p, p->id);
X		req_send(reqp, "\tidle= %d, srv=%s, thrdp=%lx\n",
X			 p->idle, PROT(p->srv->name), p->thrdp);
X	}
X}
END_OF_FILE
  if test 3170 -ne `wc -c <'csd/conn.c'`; then
    echo shar: \"'csd/conn.c'\" unpacked with wrong size!
  fi
  # end of 'csd/conn.c'
fi
if test -f 'csd/dumpvar.c' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'csd/dumpvar.c'\"
else
  echo shar: Extracting \"'csd/dumpvar.c'\" \(2575 characters\)
  sed "s/^X//" >'csd/dumpvar.c' <<'END_OF_FILE'
X/* 
X * WorldWide File System
X * Copyright (c) 1992,1993 Youki Kadobayashi
X * Copyright (c) 1992,1993 Osaka University
X * All rights reserved.
X *
X * Permission to use, copy, modify and distribute this software and its
X * documentation is hereby granted, provided that the following conditions
X * are met:
X * 1. Both the copyright notice and this permission notice appear in
X *    all copies of the software, derivative works or modified versions,
X *    and any portions thereof, and that both notices appear in
X *    supporting documentation.
X * 2. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the Osaka University
X *      and its contributors.
X * 3. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X * UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X * WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X *
X * Osaka University requests users of this software to return to
X *
X *  Youki Kadobayashi
X *  Department of Information and Computer Sciences
X *  Osaka University, Toyonaka 560, Osaka, Japan
X *
X * any improvements or extensions that they make and grant Osaka
X * University the rights to redistribute these changes.
X */
Xstatic char *AtFSid = "$Header: dumpvar.c[109.0] Wed Nov 24 03:47:07 1993 youki-k@is.aist-nara.ac.jp saved $";
X
X#include "wfs.h"
X#include "util.h"
X#include "global.h"
X
Xdump_srv(tag, srvp)
Xchar *tag;
Xwf_srv *srvp;
X{
X	dlog("%s (n= %s, f= %d, p= %d, a= %s)", tag,
X	       srvp->name ? srvp->name : "(NULL)",
X	       srvp->sin.sin_family,
X	       srvp->sin.sin_port,
X	       inet_ntoa(srvp->sin.sin_addr));
X	return 0;
X}
X
Xdump_fh(tag, fhp)
Xchar *tag;
Xwf_fh *fhp;
X{
X	dlog("%s (w= %x, pv= %x, d= %x, cv= %x, f= %x)", tag,
X	       fhp->world_id,
X	       fhp->parent_vol,
X	       fhp->dir_id,
X	       fhp->child_vol,
X	       fhp->file_id);
X}
X
Xdump_vol(tag, volp)
Xchar *tag;
Xwf_vol *volp;
X{
X	dlog("%s (n= %s, i= %ld)", tag,
X	       volp->name ? volp->name : "(NULL)",
X	       volp->id);
X}
X
Xdump_dir(tag, dirp)
Xchar *tag;
Xwf_dir *dirp;
X{
X	dlog("%s (n= %s, i= %ld, t= %ld)", tag,
X	       dirp->name,
X	       dirp->id,
X	       dirp->ctime);
X}
X
Xdump_fdset(tag, fdsetp)
Xchar *tag;
Xfd_set *fdsetp;
X{
X	int i;
X
X	for (i = 0; i < WF_MAX_SO; ++i) {
X		if (FD_ISSET(i, fdsetp)) {
X			dlog("%s %d", tag, i);
X		}
X	}
X}
END_OF_FILE
  if test 2575 -ne `wc -c <'csd/dumpvar.c'`; then
    echo shar: \"'csd/dumpvar.c'\" unpacked with wrong size!
  fi
  # end of 'csd/dumpvar.c'
fi
if test -f 'csd/err.c' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'csd/err.c'\"
else
  echo shar: Extracting \"'csd/err.c'\" \(3394 characters\)
  sed "s/^X//" >'csd/err.c' <<'END_OF_FILE'
X/* 
X * WorldWide File System
X * Copyright (c) 1992,1993 Youki Kadobayashi
X * Copyright (c) 1992,1993 Osaka University
X * All rights reserved.
X *
X * Permission to use, copy, modify and distribute this software and its
X * documentation is hereby granted, provided that the following conditions
X * are met:
X * 1. Both the copyright notice and this permission notice appear in
X *    all copies of the software, derivative works or modified versions,
X *    and any portions thereof, and that both notices appear in
X *    supporting documentation.
X * 2. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the Osaka University
X *      and its contributors.
X * 3. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X * UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X * WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X *
X * Osaka University requests users of this software to return to
X *
X *  Youki Kadobayashi
X *  Department of Information and Computer Sciences
X *  Osaka University, Toyonaka 560, Osaka, Japan
X *
X * any improvements or extensions that they make and grant Osaka
X * University the rights to redistribute these changes.
X */
X/* error file system */
Xstatic char *AtFSid = "$Header: err.c[109.0] Wed Nov 24 03:47:08 1993 youki-k@is.aist-nara.ac.jp saved $";
X
X#include "wfs.h"
X#include "util.h"
X#include "global.h"
X
Xvoid
Xerr_getattr(c)
Xwf_thrd *c;	/* rqstp, volp, fhp */
X{
X#ifdef DEBUG_ERR
X	dlog("err_getattr");
X#endif
X	(*c->reply)(c, WF_ERR_STALE);
X}
X
Xvoid
Xerr_getattr_miss(c)
Xwf_thrd *c;	/* volp, dirp, filep */
X{
X#ifdef DEBUG_ERR
X	dlog("err_getattr_miss");
X#endif
X}
X
Xvoid
Xerr_lookup(c)
Xwf_thrd *c;	/* rqstp, volp, fhp, fname */
X{
X#ifdef DEBUG_ERR
X	dlog("err_lookup");
X#endif
X	(*c->reply)(c, WF_ERR_NOENT);
X}
X
Xvoid
Xerr_lookup_miss(c)
Xwf_thrd *c;	/* rqstp, volp, fhp, fname, dotdotp */
X{
X#ifdef DEBUG_ERR
X	dlog("err_lookup_miss <%s>", c->fname);
X#endif
X	(*c->reply)(c, WF_ERR_NOENT);
X}
X
Xvoid
Xerr_readlink(c)
Xwf_thrd *c;	/* rqstp, volp, fhp */
X{
X#ifdef DEBUG_ERR
X	dlog("err_readlink");
X#endif
X	(*c->reply)(c, WF_ERR_STALE);
X}
X
Xvoid
Xerr_read(c)
Xwf_thrd *c;	/* rqstp, volp, fhp, offset, count, totalcount */
X{
X#ifdef DEBUG_ERR
X	dlog("err_read");
X#endif
X	(*c->reply)(c, WF_ERR_STALE);
X}
X
Xvoid
Xerr_read_miss(c)
Xwf_thrd *c;	/* rqstp, volp, fhp, offset, count, totalcount */
X{
X#ifdef DEBUG_ERR
X	dlog("err_read_miss");
X#endif
X	(*c->reply)(c, WF_ERR_STALE);
X}
X
Xvoid
Xerr_readdir(c)
Xwf_thrd *c;	/* rqstp, volp, fhp, cookie, count */
X{
X#ifdef DEBUG_ERR
X	dlog("err_readdir");
X#endif
X	(*c->reply)(c, WF_ERR_STALE);
X}
X
Xvoid
Xerr_readdir_miss(c)
Xwf_thrd *c;	/* rqstp, volp, fhp, cookie, count, dotdotp, olddirp */
X{
X#ifdef DEBUG_ERR
X	dlog("err_readdir_miss");
X#endif
X	(*c->reply)(c, WF_ERR_STALE);
X}
X
Xvoid
Xerr_getuda(c)
Xwf_thrd *c;
X{
X#ifdef DEBUG_ERR
X	dlog("err_getuda");
X#endif
X}
X
Xvoid
Xerr_keepalive(c)
Xwf_thrd *c;
X{
X#ifdef DEBUG_ERR
X	dlog("err_keepalive");
X#endif
X}
X
Xvoid
Xerr_close(cp)
Xwf_conn *cp;
X{
X#ifdef DEBUG_ERR
X	dlog("err_close");
X#endif
X}
X
Xvoid
Xerr_shutdown(cp, howto)
Xwf_conn *cp;
Xint howto;
X{
X#ifdef DEBUG_ERR
X	dlog("err_shutdown");
X#endif
X}
X
END_OF_FILE
  if test 3394 -ne `wc -c <'csd/err.c'`; then
    echo shar: \"'csd/err.c'\" unpacked with wrong size!
  fi
  # end of 'csd/err.c'
fi
if test -f 'csd/global.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'csd/global.h'\"
else
  echo shar: Extracting \"'csd/global.h'\" \(3059 characters\)
  sed "s/^X//" >'csd/global.h' <<'END_OF_FILE'
X/* 
X * WorldWide File System
X * Copyright (c) 1992,1993 Youki Kadobayashi
X * Copyright (c) 1992,1993 Osaka University
X * All rights reserved.
X *
X * Permission to use, copy, modify and distribute this software and its
X * documentation is hereby granted, provided that the following conditions
X * are met:
X * 1. Both the copyright notice and this permission notice appear in
X *    all copies of the software, derivative works or modified versions,
X *    and any portions thereof, and that both notices appear in
X *    supporting documentation.
X * 2. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the Osaka University
X *      and its contributors.
X * 3. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X * UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X * WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X *
X * Osaka University requests users of this software to return to
X *
X *  Youki Kadobayashi
X *  Department of Information and Computer Sciences
X *  Osaka University, Toyonaka 560, Osaka, Japan
X *
X * any improvements or extensions that they make and grant Osaka
X * University the rights to redistribute these changes.
X */
X/* $Header: global.h[109.0] Wed Nov 24 03:47:10 1993 youki-k@is.aist-nara.ac.jp saved $ */
X
X/* network related information */
Xextern char		cs_hostname[];		/* my hostname */
Xextern char		*cs_domain;		/* my domain name */
Xextern struct in_addr	cs_ipaddr;		/* my IP address */
Xextern int		cs_nfsport;		/* my NFS port */
Xextern SVCXPRT		*nfsxprt;
Xextern SVCXPRT		*csxprt;
X
X/* verbosity */
Xextern char		*cs_progname;		/* my program name */
Xextern char		*cs_topdir;		/* my top directory */
Xextern int		cs_world;		/* my world id */
Xextern int		cs_pid;			/* my process id */
Xextern int		cs_year;		/* this year */
Xextern int		cs_month;		/* this month */
Xextern int		cs_day;			/* day of month */
Xextern char		cs_date[];		/* "yymmdd" of today */
Xextern int		cs_serial;		/* action id of today */
X
X/* internal state */
Xextern serv_state	cs_state;		/* my state */
Xextern int		select_intr_valid;
Xextern time_t		now;
Xextern time_t		next_softclock;
Xextern int		task_notify_todo;
Xextern int		foreground;
Xextern int		immediate_abort;
X
X/* for debugging */
Xextern wf_req *cs_ftp_debug;
X
X/* "public" buffer for interim purpose. go cheap here.. */
Xextern char		cs_databuf[];
X
X/* protocol switches */
Xextern wf_proto		proto_root;
Xextern wf_proto		proto_ftp;
Xextern wf_proto		proto_ufs;
X#if 0
Xextern wf_proto		proto_host;
Xextern wf_proto		proto_cwd;
X#endif
Xextern wf_proto		proto_fh;
X
X/* libc complementary */
Xextern int	sys_nerr;
Xextern char	*sys_errlist[];
X
X#include "config.h"	/* platform-specific settings */
X#ifndef __CEXTRACT__
X#include "auto.h"	/* automatically generated by cextract */
X#endif
END_OF_FILE
  if test 3059 -ne `wc -c <'csd/global.h'`; then
    echo shar: \"'csd/global.h'\" unpacked with wrong size!
  fi
  # end of 'csd/global.h'
fi
if test -f 'csd/proto.c' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'csd/proto.c'\"
else
  echo shar: Extracting \"'csd/proto.c'\" \(2928 characters\)
  sed "s/^X//" >'csd/proto.c' <<'END_OF_FILE'
X/* 
X * WorldWide File System
X * Copyright (c) 1992,1993 Youki Kadobayashi
X * Copyright (c) 1992,1993 Osaka University
X * All rights reserved.
X *
X * Permission to use, copy, modify and distribute this software and its
X * documentation is hereby granted, provided that the following conditions
X * are met:
X * 1. Both the copyright notice and this permission notice appear in
X *    all copies of the software, derivative works or modified versions,
X *    and any portions thereof, and that both notices appear in
X *    supporting documentation.
X * 2. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the Osaka University
X *      and its contributors.
X * 3. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X * UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X * WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X *
X * Osaka University requests users of this software to return to
X *
X *  Youki Kadobayashi
X *  Department of Information and Computer Sciences
X *  Osaka University, Toyonaka 560, Osaka, Japan
X *
X * any improvements or extensions that they make and grant Osaka
X * University the rights to redistribute these changes.
X */
X/* protocol switch */
Xstatic char *AtFSid = "$Header: proto.c[109.0] Wed Nov 24 03:47:15 1993 youki-k@is.aist-nara.ac.jp saved $";
X
X#include "wfs.h"
X#include "util.h"
X#include "global.h"
X
Xvoid
Xproto_getattr(c)
Xwf_thrd *c;
X{
X	c->proto = pol_select_proto(c->child_volp);
X	(*c->proto->wf_getattr)(c);
X}
X
Xvoid
Xproto_lookup(c)
Xwf_thrd *c;
X{
X	c->proto = pol_select_proto(c->child_volp);
X	(*c->proto->wf_lookup)(c);
X}
X
Xvoid
Xproto_readlink(c)
Xwf_thrd *c;
X{
X	c->proto = pol_select_proto(c->child_volp);
X	(*c->proto->wf_readlink)(c);
X}
X
Xvoid
Xproto_read(c)
Xwf_thrd *c;
X{
X	c->proto = pol_select_proto(c->child_volp);
X	(*c->proto->wf_read)(c);
X}
X
Xvoid
Xproto_readdir(c)
Xwf_thrd *c;
X{
X	c->proto = pol_select_proto(c->child_volp);
X	(*c->proto->wf_readdir)(c);
X}
X
Xvoid
Xproto_getuda(c)
Xwf_thrd *c;
X{
X	c->proto = pol_select_proto(c->child_volp);
X	(*c->proto->wf_getuda)(c);
X}
X
Xvoid
Xproto_keepalive(c)
Xwf_thrd *c;
X{
X	c->proto = pol_select_proto(c->child_volp);
X	(*c->proto->wf_keepalive)(c);
X}
X
Xvoid
Xproto_close(cp)
Xwf_conn *cp;
X{
X	(*cp->proto->wf_close)(cp);
X}
X
Xvoid
Xproto_shutdown(cp, howto)
Xwf_conn *cp;
Xint howto;
X{
X	(*cp->proto->wf_shutdown)(cp, howto);
X}
X
Xvoid
Xproto_getattr_miss(c)
Xwf_thrd *c;
X{
X	(*c->proto->wf_getattr_miss)(c);
X}
X
Xvoid
Xproto_lookup_miss(c)
Xwf_thrd *c;
X{
X	(*c->proto->wf_lookup_miss)(c);
X}
X
Xvoid
Xproto_readdir_miss(c)
Xwf_thrd *c;
X{
X	(*c->proto->wf_readdir_miss)(c);
X}
X
Xvoid
Xproto_read_miss(c)
Xwf_thrd *c;
X{
X	(*c->proto->wf_read_miss)(c);
X}
END_OF_FILE
  if test 2928 -ne `wc -c <'csd/proto.c'`; then
    echo shar: \"'csd/proto.c'\" unpacked with wrong size!
  fi
  # end of 'csd/proto.c'
fi
if test -f 'csd/util.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'csd/util.h'\"
else
  echo shar: Extracting \"'csd/util.h'\" \(3326 characters\)
  sed "s/^X//" >'csd/util.h' <<'END_OF_FILE'
X/* 
X * WorldWide File System
X * Copyright (c) 1992,1993 Youki Kadobayashi
X * Copyright (c) 1992,1993 Osaka University
X * All rights reserved.
X *
X * Permission to use, copy, modify and distribute this software and its
X * documentation is hereby granted, provided that the following conditions
X * are met:
X * 1. Both the copyright notice and this permission notice appear in
X *    all copies of the software, derivative works or modified versions,
X *    and any portions thereof, and that both notices appear in
X *    supporting documentation.
X * 2. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the Osaka University
X *      and its contributors.
X * 3. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X * UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X * WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X *
X * Osaka University requests users of this software to return to
X *
X *  Youki Kadobayashi
X *  Department of Information and Computer Sciences
X *  Osaka University, Toyonaka 560, Osaka, Japan
X *
X * any improvements or extensions that they make and grant Osaka
X * University the rights to redistribute these changes.
X */
X/* $Header: util.h[109.1] Tue Dec  7 23:38:01 1993 youki-k@is.aist-nara.ac.jp saved $ */
X
X/* Debugging malloc library of Conor P. Cahill */
X#ifdef DEBUG_MALLOC
X#include "/usr/local/include/dbmalloc/malloc.h"
X#endif
X/* If you want event traces */
X/* #define TRACE */
X
X#ifndef MIN
X#define	MIN(a,b)	((a)<(b)?(a):(b))
X#endif	/* !MIN */
X
X#define WF_WRITE(fp, info)	fwrite(&(info), sizeof(info), 1, fp)
X#define WF_READ(fp, info)	fread(&(info), sizeof(info), 1, fp)
X
X#define WF_MAX_SO	64	/* machine dependent */
X#define WF_SO_READ	0x1
X#define WF_SO_WRITE	0x2
X#define WF_SO_EXCEPT	0x4
X#define WF_SO_ALL	0x7
X
X#define WF_VOL_TTL	(30 * 60)	/* volume in-core lifetime */
X#define WF_DIR_TTLMEM	(5 * 60)	/* directory in-core lifetime */
X#define WF_DIR_TTLDISK	(24 * 60 * 60)
X#define WF_CONN_TTL	(2 * 60)	/* idle connection lifetime */
X#define WF_THREAD_TTL	(2 * 60)	/* sucked thead lifetime */
X
Xextern time_t	now;
X#define gettime()	(now ? now : time(&now))
X#define realtime()	(time(&now))
X
X#ifdef DEBUG_MALLOC
X#define	ALLOC(s)	(s *)alloc_and_clear(__FILE__, __LINE__, sizeof(s))
X#define	CLONE(v)	alloc_and_copy(__FILE__, __LINE__, (v), sizeof(*(v)))
X#define	db_alist	file, line, 
X#define	db_dcl		char *file; int line;
X#else
X#define	ALLOC(s)	(s *)alloc_and_clear(sizeof(s))
X#define	CLONE(v)	alloc_and_copy((v), sizeof(*(v)))
X#define	debug_malloc(s)	malloc(s)
X#define	db_alist
X#define	db_dcl
X#endif
X#define	FREE(s)		free(s)
X
X#define assert(e)	{ if (!(e)) {dlog("assertion failed at %s:%d", __FILE__, __LINE__); exit(1); } }
X#define	warn_negative(a)	{ if ((a) < 0) {dlog("should not take negative value at %s:%d", __FILE__, __LINE__); }}
X#define	warn_zero(a)	{ if ((a) < 0) {dlog("should not compute to zero at %s:%d", __FILE__, __LINE__); }}
X#define	PROT(s)		((s) ? (s) : "(null)")
X
X#define errno_diag()	errno_log(__FILE__, __LINE__)
X
X#include <sys/syslog.h>
END_OF_FILE
  if test 3326 -ne `wc -c <'csd/util.h'`; then
    echo shar: \"'csd/util.h'\" unpacked with wrong size!
  fi
  # end of 'csd/util.h'
fi
if test -f 'doc/Copyright' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'doc/Copyright'\"
else
  echo shar: Extracting \"'doc/Copyright'\" \(1476 characters\)
  sed "s/^X//" >'doc/Copyright' <<'END_OF_FILE'
X
X * WorldWide File System
X * Copyright (c) 1992,1993 Youki Kadobayashi
X * Copyright (c) 1992,1993 Osaka University
X * All rights reserved.
X *
X * Permission to use, copy, modify and distribute this software and its
X * documentation is hereby granted, provided that the following conditions
X * are met:
X * 1. Both the copyright notice and this permission notice appear in
X *    all copies of the software, derivative works or modified versions,
X *    and any portions thereof, and that both notices appear in
X *    supporting documentation.
X * 2. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the Osaka University
X *      and its contributors.
X * 3. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X * UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X * WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X *
X * Osaka University requests users of this software to return to
X *
X *  Youki Kadobayashi
X *  Department of Information and Computer Sciences
X *  Osaka University, Toyonaka 560, Osaka, Japan
X *
X * any improvements or extensions that they make and grant Osaka
X * University the rights to redistribute these changes.
END_OF_FILE
  if test 1476 -ne `wc -c <'doc/Copyright'`; then
    echo shar: \"'doc/Copyright'\" unpacked with wrong size!
  fi
  # end of 'doc/Copyright'
fi
if test -f 'include/am.h' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'include/am.h'\"
else
  echo shar: Extracting \"'include/am.h'\" \(2683 characters\)
  sed "s/^X//" >'include/am.h' <<'END_OF_FILE'
X/* 
X * WorldWide File System
X * Copyright (c) 1992,1993 Youki Kadobayashi
X * Copyright (c) 1992,1993 Osaka University
X * All rights reserved.
X *
X * Permission to use, copy, modify and distribute this software and its
X * documentation is hereby granted, provided that the following conditions
X * are met:
X * 1. Both the copyright notice and this permission notice appear in
X *    all copies of the software, derivative works or modified versions,
X *    and any portions thereof, and that both notices appear in
X *    supporting documentation.
X * 2. All advertising materials mentioning features or use of this software
X *    must display the following acknowledgement:
X *      This product includes software developed by the Osaka University
X *      and its contributors.
X * 3. Neither the name of the University nor the names of its contributors
X *    may be used to endorse or promote products derived from this software
X *    without specific prior written permission.
X *
X * THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X * UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X * WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X *
X * Osaka University requests users of this software to return to
X *
X *  Youki Kadobayashi
X *  Department of Information and Computer Sciences
X *  Osaka University, Toyonaka 560, Osaka, Japan
X *
X * any improvements or extensions that they make and grant Osaka
X * University the rights to redistribute these changes.
X */
X/*
X * We need "amd" compatibility header here,
X * since I have incorporated NFS portability code of "amd" 5.3 beta 1.
X */
X
X#include "config.h"
X
X#include <sys/param.h>		/* for Ultrix */
X#include <sys/socket.h>
X#include <rpc/rpc.h>
X#include <netdb.h>		/* for hostent */
X#include "nfs_prot.h"
X#ifdef MNTENT_HDR
X#include MNTENT_HDR
X#endif /* MNTENT_HDR */
X#include <assert.h>
X
X#ifdef DEBUG_MEM
X#include <malloc.h>
X#endif /* DEBUG_MEM */
X
X#ifndef MAXHOSTNAMELEN
X#define MAXHOSTNAMELEN 64
X#endif /* MAXHOSTNAMELEN */
X
X#ifndef MNTTYPE_WWFS
X#define MNTTYPE_WWFS "nfs"
X/*
X * Different mount type string, (e.g., "wwfs") requires
X * lots of admininistrative overhead and deep understanding
X * of the internal workings of the whole system.
X */
X#endif /* MNTTYPE_WWFS */
X
X#ifndef FALSE
X#define FALSE 0
X#define TRUE 1
X#endif /* FALSE */
X#define	ALLOC(ty)	((struct ty *) malloc(sizeof(struct ty)))
X
X/*
X * List of mount table entries
X */
Xtypedef struct mntlist mntlist;
Xstruct mntlist {
X	struct mntlist *mnext;
X	struct mntent *mnt;
X};
X
X/*
X * mostly for amd compatibility
X */
Xextern char *mtab;		/* Mount table */
Xextern time_t clock_valid;	/* Clock needs recalculating */
Xextern int mypid;		/* Current process id */
END_OF_FILE
  if test 2683 -ne `wc -c <'include/am.h'`; then
    echo shar: \"'include/am.h'\" unpacked with wrong size!
  fi
  # end of 'include/am.h'
fi
if test -f 'libww/renamesym.pl' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'libww/renamesym.pl'\"
else
  echo shar: Extracting \"'libww/renamesym.pl'\" \(3030 characters\)
  sed "s/^X//" >'libww/renamesym.pl' <<'END_OF_FILE'
X#!/usr/local/bin/perl
X#
X#	renamesym.pl - rename symbol name in a object file.
X#		5minutes hack for splicing libc.
X# Author: Youki Kadobayashi <youki@ics.es.osaka-u.ac.jp>
X#
X# Usage: renamesym.pl [-l libraryfile] [-c] [-d] [-p] [-v] [-S sections]
X#	libraryfile can be either archive (.a) or object (.o).
X#	-c for capitalizing initial letter only.
X#	-d for debug! Children under age of 18 should not use this option.
X#	-p to preserve original object files with extension ".orig".
X#	-v for verbose.
X#	-S for other section letters.
X
Xrequire 'getopts.pl';
Xdo Getopts('l:cdpvS:');
X
X&usage if ((@ARGV) == 0);
X
Xsub usage {
X    system("head -14 $0");
X}
X
X$lib = $opt_l ? $opt_l : "/usr/lib/libc.a";
X$from_archive = 1 if ($lib =~ /\.a$/);
X$is_mips = 1 if (-e "/usr/lib/cmplrs");  # I guess you have MIPS cc
X$sections = $opt_S ? "[$opt_S]" : "^[0-9a-fA-F]+ [ADGIT]";
Xprint "NM target sections are: $sections\n" if $opt_v;
X
Xforeach $func (@ARGV) {
X    @objs = &search_library($lib, $func) if $from_archive;
X    next if !defined(@objs);
X
X    foreach $obj (@objs) {
X	&rename_symbol($obj, $func);
X    }
X}
X
Xsub rename_symbol {
X    local ($obj, $func) = @_;
X
X    $func = "_" . $func unless $is_mips;
X    $Func = $func;
X    if ($opt_c) {
X	$Func =~ /([^a-z]?)([a-z])(.*)$/;
X	$foo = $2;
X	$foo =~ tr/a-z/A-Z/;
X	$Func = $1 . $foo . $3;
X    } else {
X	$Func =~ tr/a-z/A-Z/;
X    }
X
X    if ($from_archive) {
X	if (-f "$obj.o" && $modified_files =~ /:$obj.o:/) {
X	    # do not extract this file again!
X	    print STDERR "Using previously modified $obj.o.\n" if $opt_v;
X	} else {
X	    print STDERR "Extracting from $lib...\n" if $opt_v;
X	    # ar x /usr/lib/libc.a foo.o
X	    $line = "ar x $lib $obj.o";
X	    system($line);
X	    $modified_files .= ":$obj.o:";
X	}
X    } else {
X	$obj = $lib;
X    }
X    
X    print STDERR "Rename $func() to $Func().\n" if $opt_v;
X    open(OBJ, "$obj.o") || die;
X    open(OUT, ">new.$obj.o") || die;
X    while (<OBJ>) {
X	# sed -e 's/foo/Foo/g' < foo.o > new.foo.o
X	s/(\W)$func\000/\1$Func\000/g;
X	print OUT;
X    }
X    close(OBJ);
X    close(OUT);
X    rename("$obj.o", "$obj.o.orig");
X    rename("new.$obj.o", "$obj.o");
X     
X    if ($opt_d) {
X	system <<"EOF";
X	echo "================ $obj.o"
X	od -c $obj.o > /tmp/b
X	od -c $obj.o.orig > /tmp/a
X	diff -c /tmp/[ab]
X	rm -f /tmp/[ab]
XEOF
X    ;
X    }
X    unlink("$obj.o.orig") unless $opt_p;
X}
X
Xsub search_library {
X    local ($lib, $func) = @_;
X    local ($obj, $matches);
X    local (@found);
X
X    print STDERR "Searching $lib for $func()...\n" if $opt_v;
X    open(NM, "nm $lib |");
X    while (<NM>) {
X	/^(\S+)\.o:/ && ($obj = $1);
X	if (/$func$/) {
X	    $matches .= $_;
X	    if (/$sections $func/) {
X		push(found, $obj);
X		last unless $opt_S;
X	    }
X	}
X    }
X    close(NM);			# yes, we love broken pipe!
X    print STDERR "Found $func() in @found.\n" if $opt_v && @found;
X    if (! scalar(@found)) {
X	print STDERR "Could not find $func() in $lib.\n";
X	print STDERR "Here's similar symbols in $lib:\n", $matches;
X    }
X    return @found;
X}
X
X# exit
X
X# Local Variables:
X# mode: perl
X# End:
END_OF_FILE
  if test 3030 -ne `wc -c <'libww/renamesym.pl'`; then
    echo shar: \"'libww/renamesym.pl'\" unpacked with wrong size!
  fi
  chmod +x 'libww/renamesym.pl'
  # end of 'libww/renamesym.pl'
fi
if test -f 'mule/wwfs-access-hook.el' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'mule/wwfs-access-hook.el'\"
else
  echo shar: Extracting \"'mule/wwfs-access-hook.el'\" \(3123 characters\)
  sed "s/^X//" >'mule/wwfs-access-hook.el' <<'END_OF_FILE'
X;;; -*-Emacs-Lisp-*-
X;;; 
X;;; WorldWide File System
X;;; Copyright (c) 1992,1993 Youki Kadobayashi
X;;; Copyright (c) 1992,1993 Osaka University
X;;; All rights reserved.
X;;;
X;;; Permission to use, copy, modify and distribute this software and its
X;;; documentation is hereby granted, provided that the following conditions
X;;; are met:
X;;; 1. Both the copyright notice and this permission notice appear in
X;;;    all copies of the software, derivative works or modified versions,
X;;;    and any portions thereof, and that both notices appear in
X;;;    supporting documentation.
X;;; 2. All advertising materials mentioning features or use of this software
X;;;    must display the following acknowledgement:
X;;;      This product includes software developed by the Osaka University
X;;;      and its contributors.
X;;; 3. Neither the name of the University nor the names of its contributors
X;;;    may be used to endorse or promote products derived from this software
X;;;    without specific prior written permission.
X;;;
X;;; THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X;;; UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X;;; WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X;;;
X;;; Osaka University requests users of this software to return to
X;;;
X;;;  Youki Kadobayashi
X;;;  Department of Information and Computer Sciences
X;;;  Osaka University, Toyonaka 560, Osaka, Japan
X;;;
X;;; any improvements or extensions that they make and grant Osaka
X;;; University the rights to redistribute these changes.
X
X;;; $Header: wwfs-access-hook.el[109.1] Tue Dec  7 23:38:35 1993 youki-k@is.aist-nara.ac.jp saved $
X;;;
X;;; This file requires modification to mule.el that adds 'access-hook'
X;;; to 'insert-file-contents'.
X;;;
X;;; You must add the following lines to ~/.emacs if you want to use this
X;;; package.
X;;;
X;;; (if (boundp 'MULE)
X;;;    (require 'wwfs-access-hook))
X
X
X(defvar wwfs-blocking-read t
X  "If set to t, block find-file if the requested file is on WWFS.
XIf set to nil, remove zero-sized buffer of the same name.")
X
X(defvar wwfs-get-program "/usr/local/ww/bin/wwget"
X  "Name of the program to request csd to transfer files and/or directories.")
X
X(defun wwfs-insert-file-contents-hook (filename &optional visit)
X  "See also wwfs-blocking-read and insert-file-contents."
X;;  (debug)
X  (if (file-exists-p
X       (concat (file-name-directory filename) ".wwfs_fh"))
X      (if wwfs-blocking-read
X	  (wwfs-get-file filename)
X	(wwfs-remove-junk-buffer filename))))
X
X(setq insert-file-contents-access-hook 'wwfs-insert-file-contents-hook)
X
X(defun wwfs-get-file (pathname &optional switches)
X  (let ((file (file-name-nondirectory pathname)))
X    (message "Retrieving %s via WWFS..." file)
X    (call-process wwfs-get-program nil t nil pathname)
X    (message "Retrieving %s via WWFS... done." file)))
X
X(defun wwfs-remove-junk-buffer (file)
X  (let ((junk-buffer (get-buffer (file-name-nondirectory file))))
X    (set-buffer junk-buffer)
X    (save-excursion
X      (if (and (zerop (buffer-size))
X	       (not (buffer-file-name junk-buffer)))
X	  (kill-buffer junk-buffer)))))
X
X(provide 'wwfs-access-hook)
END_OF_FILE
  if test 3123 -ne `wc -c <'mule/wwfs-access-hook.el'`; then
    echo shar: \"'mule/wwfs-access-hook.el'\" unpacked with wrong size!
  fi
  # end of 'mule/wwfs-access-hook.el'
fi
if test -f 'release.pl' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'release.pl'\"
else
  echo shar: Extracting \"'release.pl'\" \(3010 characters\)
  sed "s/^X//" >'release.pl' <<'END_OF_FILE'
X#!/usr/local/bin/perl
X#
X# Check out the source tree from AtFS.
X#
X# Author:	Youki Kadobayashi, Osaka University, Japan
X#		E-mail: <youki@wide.ad.jp>
X#
X# 
X# WorldWide File System
X# Copyright (c) 1992,1993 Youki Kadobayashi
X# Copyright (c) 1992,1993 Osaka University
X# All rights reserved.
X#
X# Permission to use, copy, modify and distribute this software and its
X# documentation is hereby granted, provided that the following conditions
X# are met:
X# 1. Both the copyright notice and this permission notice appear in
X#    all copies of the software, derivative works or modified versions,
X#    and any portions thereof, and that both notices appear in
X#    supporting documentation.
X# 2. All advertising materials mentioning features or use of this software
X#    must display the following acknowledgement:
X#      This product includes software developed by the Osaka University
X#      and its contributors.
X# 3. Neither the name of the University nor the names of its contributors
X#    may be used to endorse or promote products derived from this software
X#    without specific prior written permission.
X#
X# THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X# UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X# WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X#
X# Osaka University requests users of this software to return to
X#
X#  Youki Kadobayashi
X#  Department of Information and Computer Sciences
X#  Osaka University, Toyonaka 560, Osaka, Japan
X#
X# any improvements or extensions that they make and grant Osaka
X# University the rights to redistribute these changes.
X
X# $Header: release.pl[109.0] Wed Nov 24 03:46:27 1993 youki-k@is.aist-nara.ac.jp saved $
X#
X
Xrequire "find.pl";
Xrequire "getopts.pl";
X
Xdo Getopts('dn:v');
X$opt_v = 1 if $opt_d;
Xif ($opt_n) {
X    $vlcmd = "vl -n $opt_n";
X} else {
X    $vlcmd = "vl -lastsaved";
X}
X
X$release = `pwd`;
Xchop $release;
X$release .= "/../release";
X
X# Traverse desired filesystems
X
X&find('.');
X
Xexit;
X
Xsub wanted {
X    local ($dev,$ino,$mode,$nlink,$uid,$gid) = lstat($_);
X    if (-l $_) {
X	# make symbolic link
X	$dest = $_;
X	$src = readlink($dest);
X	print "Creating symbolic link $release/$dest -> $src\n" if $opt_v;
X	if (! $opt_d) {
X	    unlink("$release/$dir/$dest");
X	    symlink($src, "$release/$dir/$dest");
X	} else {
X	    print "rm $release/$dir/$dest\n";
X	    print "ln -s $src $release/$dir/$dest\n";
X	}
X    }
X    elsif (-d $_) {
X	next if ($name =~ m|/AtFS|);
X	if (! -e "$release/$name") {
X	    print "Creating directory $release/$name\n" if $opt_v;
X	    mkdir("$release/$name", 0755) unless $opt_d;
X	}
X    }
X    elsif (-f $_) {
X	next if ($dir =~ m|/AtFS|);
X	$file = `$vlcmd $_`;
X	next if ($?);		# no version object?
X	print "Retrieving $file\n" if $opt_v;
X#	&command("retrv -fq -dest $release/$dir $file");
X	&command("retrv -q -dest $release/$dir $file");
X	chmod $mode | 0200, "$release/$dir/$_" unless $opt_d;
X    }
X}
X
Xsub command {
X    local ($str) = @_;
X
X    if ($opt_d) {
X	print $str, "\n";
X    } else {
X	system($str);
X    }
X}
X
END_OF_FILE
  if test 3010 -ne `wc -c <'release.pl'`; then
    echo shar: \"'release.pl'\" unpacked with wrong size!
  fi
  chmod +x 'release.pl'
  # end of 'release.pl'
fi
if test -f 'rpc/cs_prot_svc.c' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'rpc/cs_prot_svc.c'\"
else
  echo shar: Extracting \"'rpc/cs_prot_svc.c'\" \(2948 characters\)
  sed "s/^X//" >'rpc/cs_prot_svc.c' <<'END_OF_FILE'
X/*
X * Please do not edit this file.
X * It was generated using rpcgen.
X */
X
X#include <stdio.h>
X#include <rpc/rpc.h>
X#include "util.h"
X#include "cs_prot.h"
X#ifndef NFS_FH_DEFINED
X#define NFS_FH_DEFINED
X#endif
X
Xvoid
Xcs_program_1(rqstp, transp)
X	struct svc_req *rqstp;
X	register SVCXPRT *transp;
X{
X	union {
X		cs_volargs cs_proc_mount_1_arg;
X		cs_volargs cs_proc_umount_1_arg;
X		cs_diropargs cs_proc_lookup_1_arg;
X		cs_readdirargs cs_proc_readdir_1_arg;
X		cs_readargs cs_proc_read_1_arg;
X		cs_volargs cs_proc_getvol_1_arg;
X		nfs_fh cs_proc_getxfer_1_arg;
X		cs_udaargs cs_proc_getuda_1_arg;
X		cs_geterrargs cs_proc_geterr_1_arg;
X	} argument;
X	char *result;
X	bool_t (*xdr_argument)(), (*xdr_result)();
X	char *(*local)();
X
X	switch (rqstp->rq_proc) {
X	case CS_PROC_NULL:
X		xdr_argument = xdr_void;
X		xdr_result = xdr_void;
X		local = (char *(*)()) cs_proc_null_1;
X		break;
X
X	case CS_PROC_GETPORT:
X		xdr_argument = xdr_void;
X		xdr_result = xdr_int;
X		local = (char *(*)()) cs_proc_getport_1;
X		break;
X
X	case CS_PROC_REGISTER:
X		xdr_argument = xdr_void;
X		xdr_result = xdr_cs_fhres;
X		local = (char *(*)()) cs_proc_register_1;
X		break;
X
X	case CS_PROC_UNREGISTER:
X		xdr_argument = xdr_void;
X		xdr_result = xdr_cs_res;
X		local = (char *(*)()) cs_proc_unregister_1;
X		break;
X
X	case CS_PROC_MOUNT:
X		xdr_argument = xdr_cs_volargs;
X		xdr_result = xdr_cs_res;
X		local = (char *(*)()) cs_proc_mount_1;
X		break;
X
X	case CS_PROC_UMOUNT:
X		xdr_argument = xdr_cs_volargs;
X		xdr_result = xdr_cs_res;
X		local = (char *(*)()) cs_proc_umount_1;
X		break;
X
X	case CS_PROC_LOOKUP:
X		xdr_argument = xdr_cs_diropargs;
X		xdr_result = xdr_cs_diropres;
X		local = (char *(*)()) cs_proc_lookup_1;
X		break;
X
X	case CS_PROC_READDIR:
X		xdr_argument = xdr_cs_readdirargs;
X		xdr_result = xdr_cs_readdirres;
X		local = (char *(*)()) cs_proc_readdir_1;
X		break;
X
X	case CS_PROC_READ:
X		xdr_argument = xdr_cs_readargs;
X		xdr_result = xdr_cs_readres;
X		local = (char *(*)()) cs_proc_read_1;
X		break;
X
X	case CS_PROC_GETVOL:
X		xdr_argument = xdr_cs_volargs;
X		xdr_result = xdr_cs_volres;
X		local = (char *(*)()) cs_proc_getvol_1;
X		break;
X
X	case CS_PROC_GETXFER:
X		xdr_argument = xdr_nfs_fh;
X		xdr_result = xdr_cs_xferres;
X		local = (char *(*)()) cs_proc_getxfer_1;
X		break;
X
X	case CS_PROC_GETUDA:
X		xdr_argument = xdr_cs_udaargs;
X		xdr_result = xdr_cs_udares;
X		local = (char *(*)()) cs_proc_getuda_1;
X		break;
X
X	case CS_PROC_GETERR:
X		xdr_argument = xdr_cs_geterrargs;
X		xdr_result = xdr_cs_geterrres;
X		local = (char *(*)()) cs_proc_geterr_1;
X		break;
X
X	default:
X		svcerr_noproc(transp);
X		return;
X	}
X	bzero((char *)&argument, sizeof(argument));
X	if (!svc_getargs(transp, xdr_argument, &argument)) {
X		svcerr_decode(transp);
X		return;
X	}
X	result = (*local)(&argument, rqstp);
X	if (result != NULL && !svc_sendreply(transp, xdr_result, result)) {
X		svcerr_systemerr(transp);
X	}
X	if (!svc_freeargs(transp, xdr_argument, &argument)) {
X		dlog( "unable to free arguments");
X		csd_abort(1);
X	}
X	return;
X}
END_OF_FILE
  if test 2948 -ne `wc -c <'rpc/cs_prot_svc.c'`; then
    echo shar: \"'rpc/cs_prot_svc.c'\" unpacked with wrong size!
  fi
  # end of 'rpc/cs_prot_svc.c'
fi
if test -f 'wwmount/Makefile.build' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'wwmount/Makefile.build'\"
else
  echo shar: Extracting \"'wwmount/Makefile.build'\" \(3102 characters\)
  sed "s/^X//" >'wwmount/Makefile.build' <<'END_OF_FILE'
X#
X# Makefile.build for mount/umount; part of Worldwide File System.
X#
X# Author:	Youki Kadobayashi, Osaka University, Japan
X#		E-mail: <youki@wide.ad.jp>
X#
X# 
X# WorldWide File System
X# Copyright (c) 1992,1993 Youki Kadobayashi
X# Copyright (c) 1992,1993 Osaka University
X# All rights reserved.
X#
X# Permission to use, copy, modify and distribute this software and its
X# documentation is hereby granted, provided that the following conditions
X# are met:
X# 1. Both the copyright notice and this permission notice appear in
X#    all copies of the software, derivative works or modified versions,
X#    and any portions thereof, and that both notices appear in
X#    supporting documentation.
X# 2. All advertising materials mentioning features or use of this software
X#    must display the following acknowledgement:
X#      This product includes software developed by the Osaka University
X#      and its contributors.
X# 3. Neither the name of the University nor the names of its contributors
X#    may be used to endorse or promote products derived from this software
X#    without specific prior written permission.
X#
X# THIS SOFTWARE IS PROVIDED BY THE DEVELOPER ``AS IS'' AND OSAKA
X# UNIVERSITY DISCLAIMS ANY LIABILITY OF ANY KIND FOR ANY DAMAGES
X# WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
X#
X# Osaka University requests users of this software to return to
X#
X#  Youki Kadobayashi
X#  Department of Information and Computer Sciences
X#  Osaka University, Toyonaka 560, Osaka, Japan
X#
X# any improvements or extensions that they make and grant Osaka
X# University the rights to redistribute these changes.
X
X# $Header: Makefile.build[109.0] Wed Nov 24 03:49:38 1993 youki-k@is.aist-nara.ac.jp saved $
X#
X
X# Lowest common denominator does not provide VPATH
X# VPATH = ../rpc:../config
X
XSTUBOBJS=	cs_prot_xdr.o nfs_prot_xdr.o misc_rpc.o
X
XMOUNTSRCS=	wwmount.c am_compat.c
X
XMOUNTOBJS=	$(MOUNTSRCS:.c=.o)
X
XUMOUNTSRCS=	wwumount.c am_compat.c
X
XUMOUNTOBJS=	$(UMOUNTSRCS:.c=.o)
X
XMTABOBJS=	mtab_aix.o mtab_bsd.o mtab_file.o mtab_ultrix.o
X
Xwwmount:	$(MOUNTOBJS) $(STUBOBJS) $(MTABOBJS)
X	$(CC) -o wwmount $(MOUNTOBJS) $(STUBOBJS) $(MTABOBJS) \
X	$(RPCLIB) $(RESOLV) $(SYSLIB)
X
Xwwumount:	$(UMOUNTOBJS) $(STUBOBJS) $(MTABOBJS)
X	$(CC) -o wwumount $(UMOUNTOBJS) $(STUBOBJS) $(MTABOBJS) \
X	$(RPCLIB) $(RESOLV) $(SYSLIB)
X
Xinstall-client:	wwmount wwumount
X	$(INSTBIN) wwmount $(ETCDIR)
X	$(INSTBIN) wwumount $(ETCDIR)
X
Xclean::
X	-rm -f wwmount wwumount
X
XFRC:
X
X# misc_rpc.o:		../config/misc_rpc.c ../include/am.h
X# mount_aix.o:		../config/mount_aix.c ../include/am.h
X# mount_irix.o:		../config/mount_irix.c ../include/am.h
X# mount_stellix.o:	../config/mount_stellix.c ../include/am.h
X# mtab_aix.o:		../config/mtab_aix.c ../include/am.h
X# mtab_bsd.o:		../config/mtab_bsd.c ../include/am.h
X# mtab_file.o:		../config/mtab_file.c ../include/am.h
X# mtab_ultrix.o:		../config/mtab_ultrix.c ../include/am.h
X# cs_prot_clnt.o:		../rpc/cs_prot_clnt.c ../rpc/cs_prot.h
X# cs_prot_xdr.o:		../rpc/cs_prot_xdr.c ../rpc/cs_prot.h
X# nfs_prot_clnt.o:	../rpc/nfs_prot_clnt.c ../rpc/nfs_prot.h
X# nfs_prot_xdr.o:		../rpc/nfs_prot_xdr.c ../rpc/nfs_prot.h
END_OF_FILE
  if test 3102 -ne `wc -c <'wwmount/Makefile.build'`; then
    echo shar: \"'wwmount/Makefile.build'\" unpacked with wrong size!
  fi
  # end of 'wwmount/Makefile.build'
fi
echo shar: End of archive 19 \(of 22\).
cp /dev/null ark19isdone
MISSING=""
for I in 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 ; do
    if test ! -f ark${I}isdone ; then
	MISSING="${MISSING} ${I}"
    fi
done
if test "${MISSING}" = "" ; then
    echo You have unpacked all 22 archives.
    rm -f ark[1-9]isdone ark[1-9][0-9]isdone
else
    echo You still must unpack the following archives:
    echo "        " ${MISSING}
fi
exit 0
exit 0 # Just in case...
