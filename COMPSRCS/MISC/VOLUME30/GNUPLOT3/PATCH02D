Newsgroups: comp.sources.misc
From: woo@ra-next.arc.nasa.gov (Alex Woo)
Subject:  v30i057:  gnuplot3 - interactive function plotting utility, Patch02d/7
Message-ID: <1992Jun14.214040.8487@sparky.imd.sterling.com>
X-Md4-Signature: 6bbae47c8d48b6e83cbb7d97086a72f1
Date: Sun, 14 Jun 1992 21:40:40 GMT
Approved: kent@sparky.imd.sterling.com

Submitted-by: woo@ra-next.arc.nasa.gov (Alex Woo)
Posting-number: Volume 30, Issue 57
Archive-name: gnuplot3/patch02d
Environment: UNIX, MS-DOS, VMS
Patch-To: gnuplot3: Volume 24, Issue 23-48

#! /bin/sh
# This is a shell archive.  Remove anything before this line, then feed it
# into a shell via "sh file" or similar.  To overwrite existing files,
# type "sh file -c".
# The tool that generated this appeared in the comp.sources.unix newsgroup;
# send mail to comp-sources-unix@uunet.uu.net if you want that tool.
# Contents:  patch.5 term/next.trm
# Wrapped by woo@ra-iris. on Thu May 28 22:44:40 1992
PATH=/bin:/usr/bin:/usr/ucb ; export PATH
echo If this archive is complete, you will see the following message:
echo '          "shar: End of archive 4 (of 7)."'
if test -f 'patch.5' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'patch.5'\"
else
  echo shar: Extracting \"'patch.5'\" \(36642 characters\)
  sed "s/^X//" >'patch.5' <<'END_OF_FILE'
Xdiff -rc gnuplot/makefile.vms gnuplot3.2/makefile.vms
X*** gnuplot/makefile.vms	Tue Sep 17 08:20:52 1991
X--- gnuplot3.2/makefile.vms	Wed Mar 25 07:59:51 1992
X***************
X*** 1,4 ****
X--- 1,8 ----
X  #
X+ # $Id: makefile.vms,v 3.26 92/03/24 22:36:49 woo Exp Locker: woo $
X+ #
X+ #
X+ #
X  # GNUPLOT Makefile
X  # for VMS
X  # 
X***************
X*** 26,32 ****
X  	[.term]eepic.trm [.term]epson.trm [.term]fig.trm [.term]hp26.trm \
X  	[.term]hp2648.trm [.term]hpgl.trm [.term]hpljii.trm 
X  CSOURCE6 = [.term]impcodes.h [.term]imagen.trm [.term]object.h \
X! 	[.term]iris4d.trm [.term]kyo.trm [.term]latex.trm [.term]pc.trm 
X  CSOURCE7 = [.term]post.trm [.term]qms.trm [.term]regis.trm [.term]sun.trm \
X  	[.term]t410x.trm [.term]tek.trm [.term]unixpc.trm [.term]unixplot.trm \
X  	[.term]v384.trm [.term]x11.trm gnuplot_x11.c
X--- 30,37 ----
X  	[.term]eepic.trm [.term]epson.trm [.term]fig.trm [.term]hp26.trm \
X  	[.term]hp2648.trm [.term]hpgl.trm [.term]hpljii.trm 
X  CSOURCE6 = [.term]impcodes.h [.term]imagen.trm [.term]object.h \
X! 	[.term]iris4d.trm [.term]kyo.trm [.term]latex.trm [.term]pbm.trm  \
X! 	[.term]pc.trm 
X  CSOURCE7 = [.term]post.trm [.term]qms.trm [.term]regis.trm [.term]sun.trm \
X  	[.term]t410x.trm [.term]tek.trm [.term]unixpc.trm [.term]unixplot.trm \
X  	[.term]v384.trm [.term]x11.trm gnuplot_x11.c
Xdiff -rc gnuplot/misc.c gnuplot3.2/misc.c
X*** gnuplot/misc.c	Thu Aug 22 10:20:15 1991
X--- gnuplot3.2/misc.c	Wed Mar 25 07:59:52 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - misc.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,10 ----
X+ #ifndef lint
X+ static char *RCSid = "$Id: misc.c,v 3.26 92/03/24 22:34:30 woo Exp Locker: woo $";
X+ #endif
X+ 
X  /* GNUPLOT - misc.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #include <stdio.h>
X--- 31,41 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #include <stdio.h>
X***************
X*** 514,519 ****
X--- 518,524 ----
X  		case CONTOUR_SRF:  fprintf(fp, " surface\n"); break;
X  		case CONTOUR_BOTH: fprintf(fp, " both\n"); break;
X  	}
X+ 	fprintf(fp,"set %shidden3d\n",(hidden3d) ? "" : "no");
X  	fprintf(fp,"set cntrparam order %d\n", contour_order);
X  	fprintf(fp,"set cntrparam ");
X  	switch (contour_kind) {
Xdiff -rc gnuplot/parse.c gnuplot3.2/parse.c
X*** gnuplot/parse.c	Sun Jan  5 21:33:20 1992
X--- gnuplot3.2/parse.c	Wed Mar 25 07:59:53 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - parse.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,10 ----
X+ #ifndef lint
X+ static char *RCSid = "$Id: parse.c,v 3.26 92/03/24 22:34:33 woo Exp Locker: woo $";
X+ #endif
X+ 
X  /* GNUPLOT - parse.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #include <stdio.h>
X--- 31,41 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #include <stdio.h>
X***************
X*** 66,72 ****
X  #ifdef __TURBOC__
X  void fpe()
X  #else
X! #if defined( __ZTC__ ) || defined( _CRAY )
X  void fpe(an_int)
X  int an_int;
X  #else
X--- 70,76 ----
X  #ifdef __TURBOC__
X  void fpe()
X  #else
X! #if defined( __ZTC__ ) || defined( _CRAY ) || defined( sgi )
X  void fpe(an_int)
X  int an_int;
X  #else
X***************
X*** 73,80 ****
X--- 77,90 ----
X  #ifdef NEXT
X  void fpe(int an_int)
X  #else
X+ #ifdef sgi
X+ void fpe(int sig, int code, struct sigcontext *sc)
X+ /*void fpe(an_int)
X+ int an_int;*/
X+ #else
X  fpe()
X  #endif
X+ #endif
X  #endif /* __ZTC__ || _CRAY */
X  #endif
X  {
X***************
X*** 385,391 ****
X  #if defined(AMIGA_LC_5_1) || defined(AMIGA_AC_5)
X  		(void) add_action(ABOOL);
X  #else
X! 		(void) add_action(BOOL);
X  #endif
X  	}
X  }
X--- 395,401 ----
X  #if defined(AMIGA_LC_5_1) || defined(AMIGA_AC_5)
X  		(void) add_action(ABOOL);
X  #else
X! 		(void) add_action(BOOLE);
X  #endif
X  	}
X  }
X***************
X*** 405,411 ****
X  #if defined(AMIGA_LC_5_1) || defined(AMIGA_AC_5)
X  		(void) add_action(ABOOL);
X  #else
X! 		(void) add_action(BOOL);
X  #endif
X  	}
X  }
X--- 415,421 ----
X  #if defined(AMIGA_LC_5_1) || defined(AMIGA_AC_5)
X  		(void) add_action(ABOOL);
X  #else
X! 		(void) add_action(BOOLE);
X  #endif
X  	}
X  }
Xdiff -rc gnuplot/plot.c gnuplot3.2/plot.c
X*** gnuplot/plot.c	Sun Jan  5 21:33:21 1992
X--- gnuplot3.2/plot.c	Wed Mar 25 07:59:54 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - plot.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,10 ----
X+ #ifndef lint
X+ static char *RCSid = "$Id: plot.c,v 3.26 92/03/24 22:34:34 woo Exp Locker: woo $";
X+ #endif
X+ 
X  /* GNUPLOT - plot.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #include <stdio.h>
X--- 31,41 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #include <stdio.h>
X***************
X*** 65,70 ****
X--- 69,75 ----
X  extern int term;
X  
X  BOOLEAN interactive = TRUE;	/* FALSE if stdin not a terminal */
X+ BOOLEAN noinputfiles = TRUE;	/* FALSE if there are script files */
X  char *infile_name = NULL;	/* name of command file; NULL if terminal */
X  
X  #ifndef STDOUT
X***************
X*** 164,170 ****
X  #ifdef __TURBOC__
X  void tc_interrupt()
X  #else
X! #ifdef _CRAY
X  void inter(an_int)
X  int an_int;
X  #else
X--- 169,175 ----
X  #ifdef __TURBOC__
X  void tc_interrupt()
X  #else
X! #if defined( _CRAY ) || defined( sgi )
X  void inter(an_int)
X  int an_int;
X  #else
X***************
X*** 171,180 ****
X--- 176,189 ----
X  #ifdef NEXT
X  void inter(int an_int)
X  #else
X+ #ifdef sgi
X+ void inter(int sig, int code, struct sigcontext *sc)
X+ #else
X  inter()
X  #endif
X  #endif
X  #endif
X+ #endif
X  {
X  #ifdef MSDOS
X  #ifdef __TURBOC__
X***************
X*** 217,222 ****
X--- 226,234 ----
X  #endif
X  
X  	setbuf(stderr,(char *)NULL);
X+ #ifdef UNIX
X+ 	setlinebuf(stdout);
X+ #endif
X  	outfile = stdout;
X  	(void) complex(&udv_pi.udv_value, Pi, 0.0);
X  
X***************
X*** 230,236 ****
X       interactive = isatty(fileno(stdin));
X  #endif
X       if (argc > 1)
X! 	  interactive = FALSE;
X  
X       if (interactive)
X  	  show_version();
X--- 242,250 ----
X       interactive = isatty(fileno(stdin));
X  #endif
X       if (argc > 1)
X! 	  interactive = noinputfiles = FALSE;
X!      else
X! 	  noinputfiles = TRUE;
X  
X       if (interactive)
X  	  show_version();
X***************
X*** 265,271 ****
X  		   outfile = stdout;
X  	    }
X  #endif					/* VMS */
X! 	    if (!interactive)
X  		 done(IO_ERROR);			/* exit on non-interactive error */
X  	}
X  
X--- 279,285 ----
X  		   outfile = stdout;
X  	    }
X  #endif					/* VMS */
X! 	    if (!interactive && !noinputfiles)
X  		 done(IO_ERROR);			/* exit on non-interactive error */
X  	}
X  
Xdiff -rc gnuplot/plot.h gnuplot3.2/plot.h
X*** gnuplot/plot.h	Sun Jan  5 21:33:22 1992
X--- gnuplot3.2/plot.h	Wed Mar 25 07:59:55 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - plot.h */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,11 ----
X+ /*
X+  * $Id: plot.h,v 3.26 92/03/24 22:34:13 woo Exp Locker: woo $
X+  *
X+  */
X+ 
X  /* GNUPLOT - plot.h */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #define PROGRAM "G N U P L O T"
X--- 32,42 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #define PROGRAM "G N U P L O T"
X***************
X*** 234,240 ****
X  enum operators {
X  	PUSH, PUSHC, PUSHD1, PUSHD2, CALL, CALL2, LNOT, BNOT, UMINUS, LOR, LAND,
X  	BOR, XOR, BAND, EQ, NE, GT, LT, GE, LE, PLUS, MINUS, MULT, DIV,
X! 	MOD, POWER, FACTORIAL, BOOL, JUMP, JUMPZ, JUMPNZ, JTERN, SF_START
X  };
X  #endif
X  
X--- 239,245 ----
X  enum operators {
X  	PUSH, PUSHC, PUSHD1, PUSHD2, CALL, CALL2, LNOT, BNOT, UMINUS, LOR, LAND,
X  	BOR, XOR, BAND, EQ, NE, GT, LT, GE, LE, PLUS, MINUS, MULT, DIV,
X! 	MOD, POWER, FACTORIAL, BOOLE, JUMP, JUMPZ, JUMPNZ, JTERN, SF_START
X  };
X  #endif
X  
Xdiff -rc gnuplot/readline.c gnuplot3.2/readline.c
X*** gnuplot/readline.c	Sun Jan  5 21:33:22 1992
X--- gnuplot3.2/readline.c	Wed Mar 25 07:59:56 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - readline.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,10 ----
X+ #ifndef lint
X+ static char *RCSid = "$Id: readline.c,v 3.26 92/03/24 22:34:35 woo Exp Locker: woo $";
X+ #endif
X+ 
X  /* GNUPLOT - readline.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 24,34 ****
X   *     Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #ifdef READLINE
X--- 28,38 ----
X   *     Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #ifdef READLINE
Xdiff -rc gnuplot/scanner.c gnuplot3.2/scanner.c
X*** gnuplot/scanner.c	Sun Jan  5 21:33:23 1992
X--- gnuplot3.2/scanner.c	Wed Mar 25 07:59:57 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - scanner.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,10 ----
X+ #ifndef lint
X+ static char *RCSid = "$Id: scanner.c,v 3.26 92/03/24 22:34:36 woo Exp Locker: woo $";
X+ #endif
X+ 
X  /* GNUPLOT - scanner.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #include <stdio.h>
X--- 31,41 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #include <stdio.h>
Xdiff -rc gnuplot/setshow.c gnuplot3.2/setshow.c
X*** gnuplot/setshow.c	Tue Sep  3 16:22:55 1991
X--- gnuplot3.2/setshow.c	Wed Mar 25 07:59:59 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - setshow.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,10 ----
X+ #ifndef lint
X+ static char *RCSid = "$Id: setshow.c,v 3.26 92/03/24 22:34:20 woo Exp Locker: woo $";
X+ #endif
X+ 
X  /* GNUPLOT - setshow.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #include <stdio.h>
X--- 31,41 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #include <stdio.h>
X***************
X*** 81,86 ****
X--- 85,91 ----
X  char			outstr[MAX_ID_LEN+1] = "STDOUT";
X  BOOLEAN			parametric	= FALSE;
X  BOOLEAN			polar		= FALSE;
X+ BOOLEAN			hidden3d	= FALSE;
X  int			angles_format	= ANGLES_RADIANS;
X  int			mapping3d	= MAP3D_CARTESIAN;
X  int			samples		= SAMPLES;
X***************
X*** 190,196 ****
X  static void show_polar(), show_parametric(), show_tics(), show_ticdef();
X  static void show_time(), show_term(), show_plot(), show_autoscale(), show_clip();
X  static void show_contour(), show_mapping(), show_format(), show_logscale();
X! static void show_variables(), show_surface();
X  static void delete_label();
X  static int assign_label_tag();
X  static void delete_arrow();
X--- 195,201 ----
X  static void show_polar(), show_parametric(), show_tics(), show_ticdef();
X  static void show_time(), show_term(), show_plot(), show_autoscale(), show_clip();
X  static void show_contour(), show_mapping(), show_format(), show_logscale();
X! static void show_variables(), show_surface(), show_hidden3d();
X  static void delete_label();
X  static int assign_label_tag();
X  static void delete_arrow();
X***************
X*** 208,221 ****
X  	int_error(
X  	"valid set options:  'angles' '{no}arrow', {no}autoscale', \n\
X  	'{no}border', '{no}clip', 'cntrparam', '{no}contour', 'data style', \n\
X! 	'dummy', 'format', 'function style', '{no}grid', 'isosamples', \n\
X! 	'{no}key', '{no}label', '{no}logscale', 'mapping', 'offsets', \n\
X! 	'output', '{no}parametric', '{no}polar', 'rrange', 'samples', \n\
X! 	'size', '{no}surface', 'terminal', 'tics', 'ticslevel', '{no}time', \n\
X! 	'title', 'trange', 'urange', 'view', 'vrange', 'xlabel', 'xrange', \n\
X! 	'{no}xtics', '{no}xzeroaxis', 'ylabel', 'yrange', '{no}ytics', \n\
X! 	'{no}yzeroaxis', 'zero', '{no}zeroaxis', 'zlabel', 'zrange', \n\
X! 	'{no}ztics'", c_token);
X  }
X  
X  /* return TRUE if a command match, FALSE if not */
X--- 213,226 ----
X  	int_error(
X  	"valid set options:  'angles' '{no}arrow', {no}autoscale', \n\
X  	'{no}border', '{no}clip', 'cntrparam', '{no}contour', 'data style', \n\
X! 	'dummy', 'format', 'function style', '{no}grid', '{no}hidden3d', \n\
X! 	'isosamples', '{no}key', '{no}label', '{no}logscale', 'mapping', \n\
X! 	'offsets', 'output', '{no}parametric', '{no}polar', 'rrange', \n\
X! 	'samples', 'size', '{no}surface', 'terminal', 'tics', 'ticslevel', \n\
X! 	'{no}time', 'title', 'trange', 'urange', 'view', 'vrange', 'xlabel', \n\
X! 	'xrange', '{no}xtics', '{no}xzeroaxis', 'ylabel', 'yrange', \n\
X! 	'{no}ytics', '{no}yzeroaxis', 'zero', '{no}zeroaxis', 'zlabel', \n\
X! 	'zrange', '{no}ztics'", c_token);
X  }
X  
X  /* return TRUE if a command match, FALSE if not */
X***************
X*** 318,323 ****
X--- 323,336 ----
X  		 int_error("expecting 'points', 'one', or 'two'", c_token);
X  	    c_token++;
X  	}
X+ 	else if (almost_equals(c_token,"hi$dden3d")) {
X+ 	    hidden3d = TRUE;
X+ 	    c_token++;
X+ 	}
X+ 	else if (almost_equals(c_token,"nohi$dden3d")) {
X+ 	    hidden3d = FALSE;
X+ 	    c_token++;
X+ 	}
X  	else if (almost_equals(c_token,"ma$pping3d")) {
X  	    c_token++;
X  	    if (END_OF_COMMAND)
X***************
X*** 1757,1769 ****
X  	int_error(
X  	"valid show options:  'action_table', 'all', 'angles', 'arrow', \n\
X  	'autoscale', 'border', 'clip', 'contour', 'data', 'dummy', 'format', \n\
X! 	'function', 'grid', 'key', 'label', 'logscale', 'mapping', 'offsets', \n\
X! 	'output', 'plot', 'parametric', 'polar', 'rrange', 'samples', \n\
X! 	'isosamples', 'view', 'size', 'terminal', 'tics', 'ticslevel', \n\
X! 	'time', 'title', 'trange', 'urange', 'vrange', 'variables', \n\
X! 	'version', 'xlabel', 'xrange', 'xtics', 'xzeroaxis', 'ylabel', \n\
X! 	'yrange', 'ytics', 'yzeroaxis', 'zlabel', 'zrange', 'ztics', 'zero', \n\
X! 	'zeroaxis'", c_token);
X  	screen_ok = FALSE;
X  	(void) putc('\n',stderr);
X  }
X--- 1770,1782 ----
X  	int_error(
X  	"valid show options:  'action_table', 'all', 'angles', 'arrow', \n\
X  	'autoscale', 'border', 'clip', 'contour', 'data', 'dummy', 'format', \n\
X! 	'function', 'grid', 'hidden', 'key', 'label', 'logscale', 'mapping', \n\
X! 	'offsets', 'output', 'plot', 'parametric', 'polar', 'rrange', \n\
X! 	'samples', 'isosamples', 'view', 'size', 'terminal', 'tics', \n\
X! 	'ticslevel', 'time', 'title', 'trange', 'urange', 'vrange', \n\
X! 	'variables', 'version', 'xlabel', 'xrange', 'xtics', 'xzeroaxis', \n\
X! 	'ylabel', 'yrange', 'ytics', 'yzeroaxis', 'zlabel', 'zrange', \n\
X! 	'ztics', 'zero', 'zeroaxis'", c_token);
X  	screen_ok = FALSE;
X  	(void) putc('\n',stderr);
X  }
X***************
X*** 1963,1968 ****
X--- 1976,1986 ----
X  		show_surface();
X  		c_token++;
X  	}
X+ 	else if (almost_equals(c_token,"hi$dden3d")) {
X+ 		(void) putc('\n',stderr);
X+ 		show_hidden3d();
X+ 		c_token++;
X+ 	}
X  	else if (almost_equals(c_token,"xti$cs")) {
X  	    show_tics(TRUE,FALSE,FALSE);
X  	    c_token++;
X***************
X*** 2075,2080 ****
X--- 2093,2099 ----
X  		show_isosamples();
X  		show_view();
X  		show_surface();
X+ 		show_hidden3d();
X  		show_size();
X  		show_term();
X  		show_tics(TRUE,TRUE,TRUE);
X***************
X*** 2175,2180 ****
X--- 2194,2205 ----
X  }
X  
X  static void
X+ show_hidden3d()
X+ {
X+ 	fprintf(stderr,"\thidden surface is %s\n", hidden3d ? "removed" : "drawn");
X+ }
X+ 
X+ static void
X  show_view()
X  {
X  	fprintf(stderr,"\tview is %g rot_x, %g rot_z, %g scale, %g scale_z\n",
X***************
X*** 2587,2601 ****
X  		PROGRAM, OS, version); 
X  	fprintf(stderr,"\tpatchlevel %s\n",patchlevel);
X       fprintf(stderr, "\tlast modified %s\n", date);
X! 	fprintf(stderr,"\tCopyright (C) 1986, 1987, 1990, 1991  %s, %s\n",
X  		authors[x],authors[1-x]);
X      fprintf(stderr, "\n\tSend bugs and comments to %s\n", bug_email);
X  }
X- 
X- 
X- 
X- 
X- 
X- 
X- 
X- 
X--- 2612,2618 ----
X  		PROGRAM, OS, version); 
X  	fprintf(stderr,"\tpatchlevel %s\n",patchlevel);
X       fprintf(stderr, "\tlast modified %s\n", date);
X! 	fprintf(stderr,"\nCopyright(C) 1986, 1987, 1990, 1991, 1992  %s, %s\n",
X  		authors[x],authors[1-x]);
X      fprintf(stderr, "\n\tSend bugs and comments to %s\n", bug_email);
X  }
Xdiff -rc gnuplot/setshow.h gnuplot3.2/setshow.h
X*** gnuplot/setshow.h	Thu Jul 18 12:01:58 1991
X--- gnuplot3.2/setshow.h	Wed Mar 25 07:59:59 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - setshow.h */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,11 ----
X+ /*
X+  * $Id: setshow.h,v 3.26 92/03/24 22:34:15 woo Exp Locker: woo $
X+  *
X+  */
X+ 
X  /* GNUPLOT - setshow.h */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  /*
X--- 32,42 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  /*
X***************
X*** 70,75 ****
X--- 75,81 ----
X  extern char			outstr[];
X  extern BOOLEAN			parametric;
X  extern BOOLEAN			polar;
X+ extern BOOLEAN			hidden3d;
X  extern int			angles_format;
X  extern int			mapping3d;
X  extern int			samples;
Xdiff -rc gnuplot/standard.c gnuplot3.2/standard.c
X*** gnuplot/standard.c	Sun Jan  5 21:33:24 1992
X--- gnuplot3.2/standard.c	Wed Mar 25 08:00:00 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - standard.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,10 ----
X+ #ifndef lint
X+ static char *RCSid = "$Id: standard.c,v 3.26 92/03/24 22:34:37 woo Exp Locker: woo $";
X+ #endif
X+ 
X  /* GNUPLOT - standard.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #include <math.h>
X--- 31,41 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #include <math.h>
XCommon subdirectories: gnuplot/term and gnuplot3.2/term
Xdiff -rc gnuplot/term.c gnuplot3.2/term.c
X*** gnuplot/term.c	Sun Jan  5 21:33:25 1992
X--- gnuplot3.2/term.c	Wed Mar 25 08:00:02 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - term.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,10 ----
X+ #ifndef lint
X+ static char *RCSid = "$Id: term.c,v 3.26 92/03/24 22:34:41 woo Exp Locker: woo $";
X+ #endif
X+ 
X  /* GNUPLOT - term.c */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  #include <stdio.h>
X--- 31,41 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  #include <stdio.h>
X***************
X*** 39,44 ****
X--- 43,52 ----
X  #include "setshow.h"
X  #include "term.h"
X  #include "bitmap.h"
X+ #ifdef NEXT
X+ #include <stdlib.h>
X+ #include "EpsViewer.h"
X+ #endif /* NEXT */
X  
X  /* for use by all drivers */
X  #define sign(x) ((x) >= 0 ? 1 : -1)
X***************
X*** 338,343 ****
X--- 346,355 ----
X  #include "term/latex.trm"
X  #endif
X  
X+ #ifdef PBM		/* PBMPLUS portable bitmap */
X+ #include "term/pbm.trm"
X+ #endif
X+ 
X  #ifdef POSTSCRIPT	/* POSTSCRIPT type */
X  #include "term/post.trm"
X  #endif
X***************
X*** 392,397 ****
X--- 404,413 ----
X  #include "term/iris4d.trm"
X  #endif /* IRIS4D */
X  
X+ #ifdef NEXT
X+ #include "term/next.trm"
X+ #endif /* NEXT */
X+ 
X  #ifdef QMS
X  #include "term/qms.trm"
X  #endif /* QMS */
X***************
X*** 426,432 ****
X    
X  #ifdef AMIGASCREEN
X  #include "term/amiga.trm"
X! #endif
X  
X  
X  /* Dummy functions for unavailable features */
X--- 442,448 ----
X    
X  #ifdef AMIGASCREEN
X  #include "term/amiga.trm"
X! #endif /* AMIGASCREEN */
X  
X  
X  /* Dummy functions for unavailable features */
X***************
X*** 483,488 ****
X--- 499,511 ----
X  	  UNKNOWN_null, UNKNOWN_null, null_text_angle, 
X  	  null_justify_text, UNKNOWN_null, UNKNOWN_null}
X  
X+     ,{"table", "Dump ASCII table of X Y [Z] values to output",
X+ 	  100, 100, 1, 1,
X+ 	  1, 1, options_null, UNKNOWN_null, UNKNOWN_null, 
X+ 	  UNKNOWN_null, null_scale, UNKNOWN_null, UNKNOWN_null, UNKNOWN_null, 
X+ 	  UNKNOWN_null, UNKNOWN_null, null_text_angle, 
X+ 	  null_justify_text, UNKNOWN_null, UNKNOWN_null}
X+ 
X  #ifdef AMIGASCREEN
X      ,{"amiga", "Amiga Custom Screen",
X  	   AMIGA_XMAX, AMIGA_YMAX, AMIGA_VCHAR, AMIGA_HCHAR, 
X***************
X*** 813,828 ****
X  
X  #ifdef HPLJIII
X      ,{"pcl5_port", "HP laserjet iii (using HPGL plot vectors), portrait mode",
X! 	HPGL_XMAX, HPGL_YMAX, HPGL_VCHAR, HPGL_HCHAR,
X! 	HPGL_VTIC, HPGL_HTIC, options_null, HPLJIII_PORT_init, HPLJIII_reset,
X! 	HPGL_text, null_scale, HPGL_graphics, HPGL_move, HPGL_vector,
X! 	HPGL_linetype, HPGL_put_text, HPGL_text_angle,
X  	null_justify_text, do_point, do_arrow}
X       ,{"pcl5_land", "HP laserjet iii (using HPGL plot vectors), landscape mode",
X! 	HPGL_XMAX, HPGL_YMAX, HPGL_VCHAR, HPGL_HCHAR,
X! 	HPGL_VTIC, HPGL_HTIC, options_null, HPLJIII_LAND_init, HPLJIII_reset,
X! 	HPGL_text, null_scale, HPGL_graphics, HPGL_move, HPGL_vector,
X! 	HPGL_linetype, HPGL_put_text, HPGL_text_angle,
X  	null_justify_text, do_point, do_arrow}
X  #endif
X  
X--- 836,851 ----
X  
X  #ifdef HPLJIII
X      ,{"pcl5_port", "HP laserjet iii (using HPGL plot vectors), portrait mode",
X! 	PCL_YMAX, PCL_XMAX, PCL_VCHAR, PCL_HCHAR,
X! 	PCL_VTIC, PCL_HTIC, options_null, PCL_PORT_init, PCL_reset,
X! 	PCL_text, null_scale, PCL_graphics, HPGL_move, HPGL_vector,
X! 	HPGL_linetype, PCL_put_text, HPGL_text_angle,
X  	null_justify_text, do_point, do_arrow}
X       ,{"pcl5_land", "HP laserjet iii (using HPGL plot vectors), landscape mode",
X! 	PCL_XMAX, PCL_YMAX, PCL_VCHAR, PCL_HCHAR,
X! 	PCL_VTIC, PCL_HTIC, options_null, PCL_LAND_init, PCL_reset,
X! 	PCL_text, null_scale, PCL_graphics, HPGL_move, HPGL_vector,
X! 	HPGL_linetype, PCL_put_text, HPGL_text_angle,
X  	null_justify_text, do_point, do_arrow}
X  #endif
X  
X***************
X*** 898,903 ****
X--- 921,959 ----
X  	   null_justify_text, line_and_point, do_arrow}
X  #endif
X  
X+ #ifdef NEXT
X+     ,{"next", "NeXTstep window system",
X+ 	   NEXT_XMAX, NEXT_YMAX, NEXT_VCHAR, NEXT_HCHAR, 
X+ 	   NEXT_VTIC, NEXT_HTIC, NEXT_options, NEXT_init, NEXT_reset, 
X+ 	   NEXT_text, do_scale, NEXT_graphics, NEXT_move, NEXT_vector, 
X+ 	   NEXT_linetype, NEXT_put_text, NEXT_text_angle, 
X+ 	   NEXT_justify_text, NEXT_point, do_arrow}
X+ #endif /* The postscript driver with NXImage displaying the postscript on screen */
X+ 
X+ #ifdef PBM
X+     ,{"pbm", "Portable bitmap",
X+        PBM_XMAX, PBM_YMAX, PBM_VCHAR,
X+        PBM_HCHAR, PBM_VTIC, PBM_HTIC, PBMoptions,
X+        PBMinit, PBMreset, PBMtext, null_scale,
X+        PBMgraphics, PBMmove, PBMvector, PBMlinetype,
X+        PBMput_text, PBMtext_angle, null_justify_text, line_and_point,
X+        do_arrow}
X+     ,{"pgm", "Portable graymap",
X+        PBM_XMAX, PBM_YMAX, PBM_VCHAR,
X+        PBM_HCHAR, PBM_VTIC, PBM_HTIC, PBMoptions,
X+        PBMinit, PBMreset, PGMtext, null_scale,
X+        PGMgraphics, PBMmove, PBMvector, PGMlinetype,
X+        PBMput_text, PBMtext_angle, null_justify_text, do_point,
X+        do_arrow}
X+     ,{"ppm", "Portable pixmap (color)",
X+        PBM_XMAX, PBM_YMAX, PBM_VCHAR,
X+        PBM_HCHAR, PBM_VTIC, PBM_HTIC, PBMoptions,
X+        PBMinit, PBMreset, PPMtext, null_scale,
X+        PPMgraphics, PBMmove, PBMvector, PPMlinetype,
X+        PBMput_text, PBMtext_angle, null_justify_text, do_point,
X+        do_arrow}
X+ #endif
X+ 
X  #ifdef POSTSCRIPT
X      ,{"postscript", "PostScript graphics language [mode \042fontname\042 font_size]",
X  	   PS_XMAX, PS_YMAX, PS_VCHAR, PS_HCHAR, 
X***************
X*** 1157,1164 ****
X  
X      /* GNUTERM environment variable is primary */
X      gnuterm = getenv("GNUTERM");
X!     if (gnuterm != (char *)NULL)
X  	 term_name = gnuterm;
X      else {
X  #ifdef __TURBOC__
X  	   term_name = turboc_init();
X--- 1213,1224 ----
X  
X      /* GNUTERM environment variable is primary */
X      gnuterm = getenv("GNUTERM");
X!     if (gnuterm != (char *)NULL) {
X  	 term_name = gnuterm;
X+ #ifdef __TURBOC__
X+          get_path();   /* So *_init() can find the BGI driver */
X+ #endif
X+     }
X      else {
X  #ifdef __TURBOC__
X  	   term_name = turboc_init();
X***************
X*** 1168,1173 ****
X--- 1228,1240 ----
X  #ifdef vms
X  	   term_name = vms_init();
X  #endif
X+ 
X+ #ifdef NEXT
X+ 	term = getenv("TERM");
X+ 	if (term_name == (char *)NULL
X+ 		&& term != (char *)NULL && strcmp(term,"next") == 0)
X+ 	      term_name = "next";
X+ #endif /* NeXT */
X  	   
X  #ifdef SUN
X  	   term = getenv("TERM");	/* try $TERM */
Xdiff -rc gnuplot/term.h gnuplot3.2/term.h
X*** gnuplot/term.h	Sun Jan  5 21:33:26 1992
X--- gnuplot3.2/term.h	Wed Mar 25 08:00:03 1992
X***************
X*** 1,6 ****
X  /* GNUPLOT - term.h */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X--- 1,11 ----
X+ /*
X+  * $Id: term.h,v 3.26 92/03/24 22:34:17 woo Exp Locker: woo $
X+  *
X+  */
X+ 
X  /* GNUPLOT - term.h */
X  /*
X!  * Copyright (C) 1986, 1987, 1990, 1991, 1992   Thomas Williams, Colin Kelley
X   *
X   * Permission to use, copy, and distribute this software and its
X   * documentation for any purpose with or without fee is hereby granted, 
X***************
X*** 27,37 ****
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  pixar!info-gnuplot@sun.com.
X   * This is a mailing list; to join it send a note to 
X!  *  pixar!info-gnuplot-request@sun.com.  
X   * Send bug reports to
X!  *  pixar!bug-gnuplot@sun.com.
X   */
X  
X  /*
X--- 32,42 ----
X   *       Gershon Elber and many others.
X   * 
X   * Send your comments or suggestions to 
X!  *  info-gnuplot@ames.arc.nasa.gov.
X   * This is a mailing list; to join it send a note to 
X!  *  info-gnuplot-request@ames.arc.nasa.gov.  
X   * Send bug reports to
X!  *  bug-gnuplot@ames.arc.nasa.gov.
X   */
X  
X  /*
X***************
X*** 55,68 ****
X  #define AMIGASCREEN	/* Amiga custom screen */
X  #endif
X  #define AED		/* AED 512 and AED 767 */
X  #define BITGRAPH	/* BBN BitGraph */
X  /* #define CGI		/* SCO CGI */
X  /* #define IRIS4D	/* IRIS4D series computer */
X  #define KERMIT		/* MS-Kermit Tektronix 4010 emulator */
X  #define FIG 	  	/* Fig graphics language */
X  #define REGIS		/* ReGis graphics (vt125, vt220, vt240, Gigis...) */
X  #define SELANAR		/* Selanar */
X- /* #define SUN		/* Sun Microsystems Workstation */
X  #define T410X		/* Tektronix 4106, 4107, 4109 and 420x terminals */
X  #define TEK		/* Tektronix 4010, and probably others */
X  /* #define UNIXPC	/* unixpc (ATT 3b1 or ATT 7300) */
X--- 60,75 ----
X  #define AMIGASCREEN	/* Amiga custom screen */
X  #endif
X  #define AED		/* AED 512 and AED 767 */
X+ #define AIFM		/* Adobe Illustrator Format */
X  #define BITGRAPH	/* BBN BitGraph */
X  /* #define CGI		/* SCO CGI */
X  /* #define IRIS4D	/* IRIS4D series computer */
X  #define KERMIT		/* MS-Kermit Tektronix 4010 emulator */
X  #define FIG 	  	/* Fig graphics language */
X+ /* #define NEXT		/* NeXT workstation console */
X+ /* #define SUN		/* Sun Microsystems Workstation */
X  #define REGIS		/* ReGis graphics (vt125, vt220, vt240, Gigis...) */
X  #define SELANAR		/* Selanar */
X  #define T410X		/* Tektronix 4106, 4107, 4109 and 420x terminals */
X  #define TEK		/* Tektronix 4010, and probably others */
X  /* #define UNIXPC	/* unixpc (ATT 3b1 or ATT 7300) */
X***************
X*** 72,77 ****
X--- 79,86 ----
X  
X  #endif /* AMIGA_LC_5_1 */
X  
X+ #ifndef AMIGA_LC_5_1
X+ 
X  #define DXY800A		/* Roland DXY800A plotter */
X  
X  #define HP2648		/* HP2648, HP2647 */
X***************
X*** 79,87 ****
X  #define HP75		/* HP7580, and probably other HPs */
X  #define IMAGEN  	/* Imagen laser printers (300dpi) (requires -Iterm also) */
X  
X- #define NEC		/* NEC CP6 pinwriter printer */
X  #define PRESCRIBE	/* Kyocera Laser printer */
X  #define QMS		/* QMS/QUIC laserprinter (Talaris 1200 and others) */
X  #define STARC		/* Star Color Printer */
X  #define TANDY60		/* Tandy DMP-130 series 60-dot per inch graphics */
X  #define V384		/* Vectrix 384 and tandy color printer */
X--- 88,102 ----
X  #define HP75		/* HP7580, and probably other HPs */
X  #define IMAGEN  	/* Imagen laser printers (300dpi) (requires -Iterm also) */
X  
X  #define PRESCRIBE	/* Kyocera Laser printer */
X  #define QMS		/* QMS/QUIC laserprinter (Talaris 1200 and others) */
X+ 
X+ #else /* AMIGA_LC_5_1 */
X+ #define FIG 	  	/* Fig graphics language */
X+ 
X+ #endif /* AMIGA_LC_5_1 */
X+ 
X+ #define NEC		/* NEC CP6 pinwriter printer */
X  #define STARC		/* Star Color Printer */
X  #define TANDY60		/* Tandy DMP-130 series 60-dot per inch graphics */
X  #define V384		/* Vectrix 384 and tandy color printer */
X***************
X*** 93,98 ****
X--- 108,114 ----
X  
X  #define HPGL		/* HP7475, HP7220 plotters, and (hopefully) lots of others */
X  
X+ #define PBM		/* PBMPLUS portable bitmap */
X  #define POSTSCRIPT	/* Postscript */
X  
X  /* #define DXF		/* DXF format for use with AutoCad (Release 10.x) */
END_OF_FILE
  if test 36642 -ne `wc -c <'patch.5'`; then
    echo shar: \"'patch.5'\" unpacked with wrong size!
  fi
  # end of 'patch.5'
fi
if test -f 'term/next.trm' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'term/next.trm'\"
else
  echo shar: Extracting \"'term/next.trm'\" \(11343 characters\)
  sed "s/^X//" >'term/next.trm' <<'END_OF_FILE'
X/*
X * $Id$
X *
X * $Log$
X */
X
X/* GNUPLOT - next.trm */
X/*
X * Copyright (C) 1991, 1992   
X *
X * Permission to use, copy, and distribute this software and its
X * documentation for any purpose with or without fee is hereby granted, 
X * provided that the above copyright notice appear in all copies and 
X * that both that copyright notice and this permission notice appear 
X * in supporting documentation.
X *
X * Permission to modify the software is granted, but not the right to
X * distribute the modified code.  Modifications are to be distributed 
X * as patches to released version.
X *  
X * This software  is provided "as is" without express or implied warranty.
X * 
X * This file is included by ../term.c.
X *
X * This terminal driver supports:
X *     next
X *
X * AUTHORS
X *  Nick Strobel from Russell Lang's post.trm
X * 
X * send your comments or suggestions to (info-gnuplot@ames.arc.nasa.gov).
X *
X * The 'postscript' driver produces landscape output 10" wide and 7" high.  
X * To get a smaller epsf output use 'set size 0.5,0.5', 
X * 'set term postscript portrait', make only one plot per file
X * and change the first line of the postscript file from
X * '%!PS-Adobe-2.0' to '%!PS-Adobe-2.0 EPSF-2.0'
X * To change font to Times-Roman and font size to 20pts use 
X * 'set term postscript "Times-Roman" 20'.
X */
X
X
X/* NeXT driver by Nick Strobel, strobel@phast.phys.washington.edu */
X#import <math.h>
X#import <dpsclient/dpsclient.h>
X#import <dpsclient/dpsNeXT.h>
X#import <stdlib.h>
X#import "../EpsViewer.h"
X
XDPSContext d;
Xstatic void window_create(float width, float height);
Xfloat width,height;	
Xfloat xsize_orig,ysize_orig;  
X
Xchar next_font[MAX_ID_LEN+1] = "Courier" ; /* name of font */
Xint next_fontsize = 14;					 /* size of font in pts */
XBOOLEAN next_portrait = FALSE;				 /* vertical page */
XBOOLEAN next_color = FALSE;
XBOOLEAN init_called = FALSE;
XBOOLEAN initframe_called = FALSE;
X
Xint next_page=0;			/* page count */
Xint next_path_count=0; 	/* count of lines in path */
Xint next_ang=0;			/* text angle */
Xenum JUSTIFY next_justify=LEFT;	/* text is flush left */
X
Xchar *NEXT_header[] = {
X"/vpt2 vpt 2 mul def\n",
X"/hpt2 hpt 2 mul def\n",
X/* flush left show */
X"/Lshow { currentpoint stroke moveto\n",
X"  0 vshift rmoveto show } def\n", 
X/* flush right show */
X"/Rshow { currentpoint stroke moveto\n",
X"  dup stringwidth pop neg vshift rmoveto show } def\n", 
X/* centred show */
X"/Cshow { currentpoint stroke moveto\n",
X"  dup stringwidth pop -2 div vshift rmoveto show } def\n", 
X/* Dash or Color Line */
X"/DL { Color {setrgbcolor [] 0 setdash pop}\n",
X" {pop pop pop 0 setdash} ifelse } def\n",
X/* Border Lines */
X"/BL { stroke gnulinewidth 2 mul setlinewidth } def\n",
X/* Axes Lines */
X"/AL { stroke gnulinewidth 2 div setlinewidth } def\n",
X/* Plot Lines */
X"/PL { stroke gnulinewidth setlinewidth } def\n",
X/* Line Types */
X"/LTb { BL [] 0 0 0 DL } def\n", /* border */
X"/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def\n", /* axes */
X"/LT0 { PL [] 0 1 0 DL } def\n",
X"/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def\n",
X"/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def\n",
X"/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def\n",
X"/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def\n",
X"/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def\n",
X"/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def\n",
X"/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def\n",
X"/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def\n",
X"/M {moveto} def\n",
X"/L {lineto} def\n",
X"/P { stroke [] 0 setdash\n", /* Point */
X"  currentlinewidth 2 div sub moveto\n",
X"  0 currentlinewidth rlineto  stroke } def\n",
X"/D { stroke [] 0 setdash  2 copy  vpt add moveto\n", /* Diamond */
X"  hpt neg vpt neg rlineto  hpt vpt neg rlineto\n",
X"  hpt vpt rlineto  hpt neg vpt rlineto  closepath  stroke\n",
X"  P  } def\n",
X"/A { stroke [] 0 setdash  vpt sub moveto  0 vpt2 rlineto\n", /* Plus (Add) */
X"  currentpoint stroke moveto\n",
X"  hpt neg vpt neg rmoveto  hpt2 0 rlineto stroke\n",
X"  } def\n",
X"/B { stroke [] 0 setdash  2 copy  exch hpt sub exch vpt add moveto\n", /* Box */
X"  0 vpt2 neg rlineto  hpt2 0 rlineto  0 vpt2 rlineto\n",
X"  hpt2 neg 0 rlineto  closepath  stroke\n",
X"  P  } def\n",
X"/C { stroke [] 0 setdash  exch hpt sub exch vpt add moveto\n", /* Cross */
X"  hpt2 vpt2 neg rlineto  currentpoint  stroke  moveto\n",
X"  hpt2 neg 0 rmoveto  hpt2 vpt2 rlineto stroke  } def\n",
X"/T { stroke [] 0 setdash  2 copy  vpt 1.12 mul add moveto\n", /* Triangle */
X"  hpt neg vpt -1.62 mul rlineto\n",
X"  hpt 2 mul 0 rlineto\n",
X"  hpt neg vpt 1.62 mul rlineto  closepath  stroke\n",
X"  P  } def\n",
X"/S { 2 copy A C} def\n", /* Star */
XNULL
X};
X
X#define NEXT_XOFF	50	/* page offset in pts */
X#define NEXT_YOFF	50
X
X#define NEXT_XMAX 7200
X#define NEXT_YMAX 5040
X
X#define NEXT_XLAST (NEXT_XMAX - 1)
X#define NEXT_YLAST (NEXT_YMAX - 1)
X
X#define NEXT_VTIC (NEXT_YMAX/80)
X#define NEXT_HTIC (NEXT_YMAX/80)
X
X#define NEXT_SC (10)				/* scale is 1pt = 10 units */
X#define	NEXT_LW (0.5*NEXT_SC)		/* linewidth = 0.5 pts */
X
X#define NEXT_VCHAR (14*NEXT_SC)		/* default is 14 point characters */
X#define NEXT_HCHAR (14*NEXT_SC*6/10)
X
XNEXT_options()
X{
X	extern struct value *const_express();
X	extern double real();
X
X	if (!END_OF_COMMAND) {
X		if (almost_equals(c_token,"p$ortrait")) {
X			next_portrait=TRUE;
X			c_token++;
X		}
X		else if (almost_equals(c_token,"l$andscape")) {
X			next_portrait=FALSE;
X			c_token++;
X		}
X		else if (almost_equals(c_token,"d$efault")) {
X			next_portrait=FALSE;
X			next_color=FALSE;
X			strcpy(next_font,"Courier");
X			next_fontsize = 14;
X			c_token++;
X		}
X	}
X
X	if (!END_OF_COMMAND) {
X		if (almost_equals(c_token,"m$onochrome")) {
X			next_color=FALSE;
X			c_token++;
X		}
X		else if (almost_equals(c_token,"c$olor")) {
X			next_color=TRUE;
X			c_token++;
X		}
X	}
X
X	if (!END_OF_COMMAND && isstring(c_token)) {
X		quote_str(next_font,c_token);
X		c_token++;
X	}
X
X	if (!END_OF_COMMAND) {
X		/* We have font size specified */
X		struct value a;
X		next_fontsize = (int)real(const_express(&a));
X		c_token++;
X		term_tbl[term].v_char = (unsigned int)(next_fontsize*NEXT_SC);
X		term_tbl[term].h_char = (unsigned int)(next_fontsize*NEXT_SC*6/10);
X	}
X
X	sprintf(term_options,"%s %s \"%s\" %d",
X		next_portrait ? "portrait" : "landscape",
X		next_color ? "color" : "monochrome",next_font,next_fontsize);
X}
X
X
XNEXT_init()
X{
Xstruct termentry *t = &term_tbl[term];
Xint i;
Xfloat llx,lly,urx,ury;
X/* I commented out the postscript comment fields because they are not really 
X*  needed (even the bounding box). However, if you'd like to send all the
X*  postscript to the context d, they're still there for you
X*/
X
X		llx=NEXT_XOFF;
X		lly=NEXT_YOFF;
X
X	if(!initframe_called) {
X		if(!next_portrait){
X			urx=(xsize*(NEXT_XMAX)/NEXT_SC+0.5+NEXT_XOFF);
X			ury=(ysize*(NEXT_YMAX)/NEXT_SC+0.5+NEXT_YOFF);
X		} else {
X			urx=(ysize*(NEXT_YMAX)/NEXT_SC+0.5+NEXT_XOFF);
X			ury=(xsize*(NEXT_XMAX)/NEXT_SC+0.5+NEXT_YOFF);
X		}
X		  width=urx-llx;	
X		  height=ury-lly;
X		  xsize_orig=xsize;
X		  ysize_orig=ysize;	
X		  window_create(width,height);
X	   	  d=DPSGetCurrentContext();
X	   DPSPrintf(d,"/showpage {initgraphics} bind def\n");
X  	}
X		DPSPrintf(d,"1 setgray\n");
X		DPSPrintf(d,"0 1 %g %g rectfill\n",rint(width),rint(height));
X		DPSPrintf(d,"0 setgray\n");
X		DPSPrintf(d,"0 1 %g %g rectstroke\n",rint(width),rint(height));
X//       	DPSPrintf(d,"/_the_saved_vm_ save def\n");
X		DPSPrintf(d,"%g %g translate\n",-llx,-lly); /* KEEP this IN! */
X
X//		DPSPrintf(d,"%%!PS-ADOBE-2.0 EPSF-2.0\n");
X//		DPSPrintf(d,"%%%%Creator: gnuplot\n");
X//		DPSPrintf(d,"%%%%DocumentFonts: %s\n", next_font);
X//		DPSPrintf(d,"%%%%BoundingBox: %d %d ", NEXT_XOFF,NEXT_YOFF);
X//		if (!next_portrait)
X//			DPSPrintf(d,"%d %d\n",(int)width, (int)height);
X//		else 
X//			DPSPrintf(d,"%d %d\n",(int)width, (int)height);
X//		DPSPrintf(d,"%%%%Pages: (atend)\n");
X//		DPSPrintf(d,"%%%%EndComments\n");
X		DPSPrintf(d,"/gnudict 40 dict def\ngnudict begin\n");
X		DPSPrintf(d,"/Color %s def\n",next_color ? "true" : "false");
X		DPSPrintf(d,"/gnulinewidth %.3f def\n",NEXT_LW);
X		DPSPrintf(d,"/vshift %d def\n", (int)(t->v_char)/(-3));
X		DPSPrintf(d,"/dl {%d mul} def\n",NEXT_SC); /* dash length */
X		DPSPrintf(d,"/hpt %.1f def\n",NEXT_HTIC/2.0);
X		DPSPrintf(d,"/vpt %.1f def\n",NEXT_VTIC/2.0);
X		for ( i=0; NEXT_header[i] != NULL; i++)
X			DPSPrintf(d,"%s",NEXT_header[i]);
X		DPSPrintf(d,"end\n");
X//		DPSPrintf(d,"%%%%EndProlog\n");
X		init_called=TRUE;
X}
X
Xstatic void window_create(float width, float height)
X{
X	initframe_called=TRUE;
X	
X	NXApp=[EpsViewer new];
X	[NXApp windowCreate:width Height:height];
X}
X
XNEXT_graphics()
X{
Xstruct termentry *t = &term_tbl[term];
X	next_page++;
X	if(!init_called)
X		NEXT_init();	/* set up the frame properly */
X	init_called=FALSE;
X//	DPSPrintf(d,"%%%%Page: %d %d\n",next_page,next_page);
X	DPSPrintf(d,"gnudict begin\n");
X	DPSPrintf(d,"gsave\n");
X	DPSPrintf(d,"%d %d translate\n",NEXT_XOFF,NEXT_YOFF);
X	if (!next_portrait) {
X/* keep plot entirely in the window */
X		if(xsize>xsize_orig)
X			xsize=xsize_orig;
X		if(ysize>ysize_orig)
X			ysize=ysize_orig;
X	    DPSPrintf(d,"%.3f %.3f scale\n", xsize/NEXT_SC, ysize/NEXT_SC);
X	}
X	else {
X		if(xsize>xsize_orig)
X			xsize=xsize_orig;
X		if(ysize>ysize_orig)
X			ysize=ysize_orig;
X	    DPSPrintf(d,"%.3f %.3f scale\n", ysize/NEXT_SC, xsize/NEXT_SC);
X	    DPSPrintf(d,"90 rotate\n0 %d translate\n", -NEXT_YMAX);
X	}
X	DPSPrintf(d,"0 setgray\n");
X	DPSPrintf(d,"/%s findfont %d ", next_font, (t->v_char) );
X	DPSPrintf(d,"scalefont setfont\n");
X	DPSPrintf(d,"newpath\n");
X	next_path_count = 0;	
X}
X
X
XNEXT_text()
X{
X	next_path_count = 0;
X	DPSPrintf(d,"stroke\ngrestore\nend\nshowpage\n");
X//	DPSPrintf(d,"\ngrestoreall _the_saved_vm_ restore\n");
X		
X	DPSFlushContext(d);
X	
X	
X}
X
X
XNEXT_reset()
X{	
X	DPSPrintf(d,"currentwindow termwindow\n");
X	DPSPrintf(d,"nulldevice\n");
X
X	DPSFlushContext(d);
X	initframe_called=FALSE;
X}
X
X
XNEXT_linetype(linetype)
Xint linetype;
X{
Xchar *line = "ba012345678"; 
X	DPSPrintf(d,"LT%c\n", line[(linetype%9)+2]);
X	next_path_count = 0;
X}
X
X
XNEXT_move(x,y)
Xunsigned int x,y;
X{
X	DPSPrintf(d,"%d %d M\n", x, y);
X	next_path_count += 1;
X}
X
X
XNEXT_vector(x,y)
Xunsigned int x,y;
X{
X	DPSPrintf(d,"%d %d L\n", x, y);
X	next_path_count += 1;
X	if (next_path_count >= 400) {
X		DPSPrintf(d,"currentpoint stroke moveto\n");
X		next_path_count = 0;
X	}
X}
X
X
XNEXT_put_text(x,y,str)
Xunsigned int x, y;
Xchar *str;
X{
Xchar ch;
X	NEXT_move(x,y);
X	if (next_ang != 0)
X		DPSPrintf(d,"currentpoint gsave translate %d rotate 0 0 moveto\n"
X			,next_ang*90);
X/*	NXPutc(psStream,'(');			*/
X	DPSPrintf(d,"%c",'(');
X	ch = *str++;
X	while(ch!='\0') {
X		if ( (ch=='(') || (ch==')') || (ch=='\\') )
X/*			NXPutc(psStream,'\\');
X		NXPutc(psStream,ch);			*/
X			DPSPrintf(d,"%c",'\\');
X		DPSPrintf(d,"%c",ch);
X		ch = *str++;
X	}
X	switch(next_justify) {
X		case LEFT : DPSPrintf(d,") Lshow\n");
X			break;
X		case CENTRE : DPSPrintf(d,") Cshow\n");
X			break;
X		case RIGHT : DPSPrintf(d,") Rshow\n");
X			break;
X	}
X	if (next_ang != 0)
X		DPSPrintf(d,"grestore\n");
X	next_path_count = 0;
X}
X
Xint NEXT_text_angle(ang)
Xint ang;
X{
X	next_ang=ang;
X	return TRUE;
X}
X
Xint NEXT_justify_text(mode)
Xenum JUSTIFY mode;
X{
X	next_justify=mode;
X	return TRUE;
X}
X
X/* postscript point routines */
XNEXT_point(x,y,number)
Xint x,y;
Xint number;
X{
Xchar *point = "PDABCTS";
X	number %= POINT_TYPES;
X 	if (number < -1)
X		number = -1;		/* negative types are all 'dot' */
X	DPSPrintf(d,"%d %d %c\n", x, y, point[number+1]);
X	next_path_count = 0;
X}
X
END_OF_FILE
  if test 11343 -ne `wc -c <'term/next.trm'`; then
    echo shar: \"'term/next.trm'\" unpacked with wrong size!
  fi
  # end of 'term/next.trm'
fi
echo shar: End of archive 4 \(of 7\).
cp /dev/null ark4isdone
MISSING=""
for I in 1 2 3 4 5 6 7 ; do
    if test ! -f ark${I}isdone ; then
	MISSING="${MISSING} ${I}"
    fi
done
if test "${MISSING}" = "" ; then
    echo You have unpacked all 7 archives.
    rm -f ark[1-9]isdone
else
    echo You still must unpack the following archives:
    echo "        " ${MISSING}
fi
exit 0

exit 0 # Just in case...
