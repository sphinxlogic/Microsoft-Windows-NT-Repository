Path: uunet!zephyr.ens.tek.com!master!saab!billr
From: billr@saab.CNA.TEK.COM (Bill Randle)
Newsgroups: comp.sources.games
Subject: v14i037:  umoria4 - single player dungeon simulation (ver. 5.5), Part05/39
Message-ID: <3395@master.CNA.TEK.COM>
Date: 20 Aug 92 18:02:38 GMT
Sender: news@master.CNA.TEK.COM
Lines: 1454
Approved: billr@saab.CNA.TEK.COM

Submitted-by: grabiner@math.harvard.edu (David Grabiner)
Posting-number: Volume 14, Issue 37
Archive-name: umoria4/Part05
Supersedes: umoria3: Volume 9, Issue 55-97; Volume 10, Issue 15-17
Environment: Curses, Unix, Mac, MS-DOS, Atari-ST, Amiga, VMS



#! /bin/sh
# This is a shell archive.  Remove anything before this line, then unpack
# it by saving it into a file and typing "sh file".  To overwrite existing
# files, type "sh file -c".  You can also feed this as standard input via
# unshar, or by typing "sh <file", e.g..  If this archive is complete, you
# will see the following message at the end:
#		"End of archive 5 (of 39)."
# Contents:  doc/moria1.txt source/prayer.c
# Wrapped by billr@saab on Thu Aug 20 09:11:27 1992
PATH=/bin:/usr/bin:/usr/ucb ; export PATH
if test -f 'doc/moria1.txt' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'doc/moria1.txt'\"
else
echo shar: Extracting \"'doc/moria1.txt'\" \(49267 characters\)
sed "s/^X//" >'doc/moria1.txt' <<'END_OF_FILE'
X
X
X
X
X
X
X
X
X
X                      The Dungeons of Moria
X
X
X                       Robert Alan Koeneke
X                         James E. Wilson
X
X
X
X
X          Moria may be copied and modified freely,  but  may
X     not be sold or marketed IN ANY FORM without the permis-
X     sion and written consent of  the  authors  Robert  Alan
X     Koeneke  and James E. Wilson.  We retain all copyrights
X     to this program, in either  the  original  or  modified
X     forms,  and  no  violation,  deletion, or change of the
X     copyright notice is allowed.  Furthermore, we will have
X     no liability or responsibility to any user with respect
X     to loss or damage caused directly or indirectly by this
X     program.
X
X
X
XSeptember 26, 1990
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X                                The Dungeons of Moria
X
X
X                                 Robert Alan Koeneke
X                                   James E. Wilson
X
X
X
X
X          1.  Introduction
X
X          The game of moria is  a  single  player  dungeon  simulation.   A
X          player  may choose from a number of races and classes when creat-
X          ing a character, and then `run' that character over a  period  of
X          days, weeks, even months, attempting to win the game by defeating
X          the Balrog which lurks in the deeper levels.
X
X          The player will begin his adventure on the town  level  where  he
X          may acquire supplies, weapons, armor, and magical devices by bar-
X          tering with various shop owners.  After preparing for his  adven-
X          ture,  the  player  can  descend into the dungeons of moria where
X          fantastic adventures await his coming!
X
X          Before beginning your first adventure, you should read this docu-
X          ment  carefully.   The  game  of moria is a complicated game, and
X          will require a dedicated player to win.
X
X
X          2.  The Character
X
X          All characters have six main attributes which modify their  basic
X          abilities.   These  six  attributes,  called stats, are strength,
X          intelligence,  wisdom,  dexterity,  constitution,  and  charisma.
X          Stats  may  vary  from a minimum of 3 to a maximum of 18.  At the
X          highest level, stats are further qualified by a number from  zero
X          to  one hundred, so that the highest value is actually 18/100.  A
X          value of 18/100 can be thought of as equivalent to 19, and  18/00
X          (not  actually used) is equivalent to 18.  Because adventurers of
X          interest tend to be better than average characters,  moria  stats
X          will  average  about  13,  and  are  further adjusted by race and
X          class.  Some races are just naturally  better  at  being  certain
X          classes, as will be shown later.
X
X          In addition to the more visible stats, each character has certain
X          abilities  which  are  mainly  determined by his race, class, and
X          level, but are also modified by his  stats.   The  abilities  are
X          fighting,  throwing/bows, saving throw, stealth, disarming, magi-
X          cal devices, perception, searching, and infravision.
X
X          Characters will be assigned an early history, with  money  and  a
X          social  class  based on that history.  Starting money is assigned
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                 Page 2
X
X
X          based on history, charisma, and somewhat upon the  average  of  a
X          character's  stats.   A  character  with below average stats will
X          receive extra money to help him survive the first adventure.
X
X          Each character will also have physical attributes such  as  race,
X          height,  weight, sex, and a physical description.  None of these,
X          except weight, play any part in the game other than to  give  the
X          player a "feeling" for his character.  Weight is used for comput-
X          ing carrying capacity and also for bashing.
X
X          Finally, each character is assigned hit  points  based  on  their
X          race,  class,  and constitution.  Spell casters will also receive
X          mana which is expended when casting spells.   Mana  is  based  on
X          Wisdom for Priests and Intelligence for Mages.
X
X
X          2.1.  Character Stats
X
X          Strength
X               Strength is important in fighting with weapons and  hand  to
X               hand  combat.   A  high strength can improve your chances of
X               hitting, and the amount of damage done with each hit.  Char-
X               acters  with  low strengths may receive penalties.  Strength
X               is also useful in tunneling, body and shield bashing, and in
X               carrying heavy items.
X
X          Intelligence
X               Intelligence is the prime stat of a mage,  or  magician.   A
X               high  intelligence  increases  a  mage's chances of learning
X               spells, and it also increases the amount of mana a mage has.
X               No spell may be learned by mages with intelligences under 8.
X               Intelligence also modifies a character's chance of disarming
X               traps, picking locks, and using magic devices.
X
X          Wisdom
X               Wisdom is the  prime  stat  of  a  priest.   A  high  wisdom
X               increases the chance of receiving new spells from a priest's
X               deity, and it also increases the amount  of  mana  a  priest
X               has.   No  spell may be learned by priests with wisdom under
X               8.  Wisdom also modifies a character's chance  of  resisting
X               magical spells cast upon his person.
X
X          Dexterity
X               Dexterity is a combination of agility and quickness.  A high
X               dexterity  may  allow a character to get multiple blows with
X               lighter weapons, thus greatly increasing his kill power, and
X               may  increase  his  chances  of  hitting with any weapon and
X               dodging blows from enemies.  Dexterity  is  also  useful  in
X               picking locks, disarming traps, and protecting yourself from
X               pick pockets.
X
X          Constitution
X               Constitution is a character's ability to  resist  damage  to
X               his  body, and to recover from damage received.  Therefore a
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                 Page 3
X
X
X               character with a high constitution  will  receive  more  hit
X               points, and be more resistant to poisons.
X
X          Charisma
X               Charisma represents a character's personality,  as  well  as
X               physical  looks.   A  character  with  a  high charisma will
X               receive better prices from store owners, whereas a character
X               with  a  very  low  charisma  will  be robbed blind.  A high
X               charisma will also mean more starting money for the  charac-
X               ter.
X
X
X          2.2.  Character Sex
X
X          You may choose to be either a male or a female  character.   Only
X          height  and  weight  are  affected  by a character's sex.  Female
X          characters tend to be somewhat smaller  and  lighter  than  their
X          male counterparts.  No adjustments to stats or abilities are made
X          because of the sex of a character.  Female characters  start  out
X          with  slightly more money than male characters to help offset the
X          weight penalty.
X
X
X          2.3.  Character Abilities
X
X          Characters possess nine different abilities which can  help  them
X          to survive.  The starting abilities of a character are based upon
X          race and class.  Abilities may be adjusted by high or low  stats,
X          and may increase with the level of the character.
X
X          Fighting
X               Fighting is the ability to hit and do damage with weapons or
X               fists.   Normally  a  character  gets a single blow from any
X               weapon, but if his dexterity and strength are  high  enough,
X               he  may  receive  more blows per round with lighter weapons.
X               Strength and dexterity both modify the  ability  to  hit  an
X               opponent.   This skill increases with the level of the char-
X               acter.
X
X          Throwing/Bows
X               Using  ranged  missile  weapons  and  throwing  objects   is
X               included  in this skill.  Different stats apply to different
X               weapons, but this ability may modify the distance an  object
X               is  thrown/fired, the amount of damage done, and the ability
X               to hit a creature.  This skill increases with the  level  of
X               the character.
X
X          Saving Throw
X               A Saving Throw is the ability of a character to  resist  the
X               effects  of  a spell cast on him by another person/creature.
X               This does not include spells cast on the player by  his  own
X               stupidity,  such  as  quaffing a nasty potion.  This ability
X               increases with the level of the  character,  but  then  most
X               high  level  creatures  are  better at casting spells, so it
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                 Page 4
X
X
X               tends to even out.  A high wisdom also increases this  abil-
X               ity.
X
X          Stealth
X               The ability to move silently about is very useful.   Charac-
X               ters with good stealth can usually surprise their opponents,
X               gaining the first blow.  Also, creatures may fail to  notice
X               a  stealthy  character  entirely, allowing a player to avoid
X               certain fights.  This skill is based entirely upon race  and
X               class, and will never improve unless magically enhanced.
X
X          Disarming
X               Disarming is the  ability  to  remove  traps  (safely),  and
X               includes  picking  locks  on  traps and doors.  A successful
X               disarming will gain the character some experience.   A  trap
X               must  be  found  before  it  can be disarmed.  Dexterity and
X               intelligence both modify the ability  to  disarm,  and  this
X               ability increases with the level of the character.
X
X          Using Magical Devices
X               Using a magical device such as  a  wand  or  staff  requires
X               experience  and  knowledge.   Spell  users such as mages and
X               priests are therefore much better at using a magical  device
X               than say a warrior.  This skill is modified by intelligence,
X               and increases with the level of the character.
X
X          Perception
X               Perception  is  the  ability  to  notice  something  without
X               actively  seeking it out.  This skill is based entirely upon
X               race and class, and  will  never  improve  unless  magically
X               enhanced.
X
X          Searching
X               To search is to actively look for secret doors, floor traps,
X               and  traps on chests.  Rogues are the best at searching, but
X               mages, rangers, and priests are also good at it.  This skill
X               is  based  entirely  upon  race  and  class,  and will never
X               improve unless magically enhanced.
X
X          Infravision
X               Infravision is the ability to see heat sources.  Since  most
X               of  the  dungeon is cool or cold, infravision will not allow
X               the player to see walls and objects.  Infravision will allow
X               a  character  to see any warm-blooded creatures up to a cer-
X               tain distance.  This ability works equally well with or with
X               out  a  light source.  The majority of moria's creatures are
X               cold-blooded, and will not be detected unless lit  up  by  a
X               light  source.   All non human races have innate infravision
X               ability.  Human can gain infravision only if it is magically
X               enhanced.
X
X
X
X
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                 Page 5
X
X
X          2.4.  Choosing A Race
X
X          There are eight different races  that  you  can  choose  from  in
X          moria.   Some races are restricted as to what profession they may
X          be, and each race has its own adjustments to a character's  stats
X          and abilities.
X
X          Human
X               The human is the base character, all other  races  are  com-
X               pared  to him.  Humans can choose any class, and are average
X               at everything.  Humans tend to go up levels faster than  any
X               other  race, because of their shorter life spans.  No racial
X               adjustments occur to characters choosing human.
X
X          Half-Elf
X               Half-elves tend to be smarter and faster than a  human,  but
X               not as strong.  Half-elves are slightly better at searching,
X               disarming, perception, stealth, and magic, but they are  not
X               as good at hand weapons.  Half-elves may choose any class.
X
X          Elf
X               Elves are better magicians then humans, but not as  good  at
X               fighting.   They  tend  to be smarter and faster than either
X               humans or half-elves, and also have  better  wisdom.   Elves
X               are better at searching, disarming, perception, stealth, and
X               magic, but they are not as good at hand weapons.  Elves  may
X               choose any class except Paladin.
X
X          Halfling
X               Halflings, or Hobbits, are very good at bows, throwing,  and
X               have good saving throws.  They also are very good at search-
X               ing, disarming, perception, and stealth; so they make excel-
X               lent  thieves  (but  prefer to be called burglars...).  They
X               will be much weaker than humans, and  no  good  at  bashing.
X               Halflings  have  fair  infravision,  so they can detect warm
X               creatures at a distance.  Halflings can choose between being
X               a warrior, mage, or rogue.
X
X          Gnome
X               Gnomes are smaller than dwarfs, but larger  than  halflings.
X               They,  like  the halflings, live in the earth in burrow-like
X               homes.  Gnomes are practical jokers, so  if  they  can  kill
X               something  in  a  humorous  way, so much the better.  Gnomes
X               make excellent mages, and  have  very  good  saving  throws.
X               They  are  good  at  searching,  disarming,  perception, and
X               stealth.  They have lower strength than humans so  they  are
X               not  very  good  at fighting with hand weapons.  Gnomes have
X               fair infravision, so they can detect  warm  creatures  at  a
X               distance.  A gnome may choose between being a warrior, mage,
X               priest, or rogue.
X
X          Dwarf
X               Dwarves are the headstrong miners and  fighters  of  legend.
X               Since  dungeons  are  the  natural home of a dwarf, they are
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                 Page 6
X
X
X               excellent choices for a warrior or priest.  Dwarves tend  to
X               be  stronger  and  have higher constitutions, but are slower
X               and less intelligent than humans.  Because they are so head-
X               strong  and  are somewhat wise, they resist spells which are
X               cast on them.  Dwarves also have  good  infravision  because
X               they  live  underground.   They  do  have  one  big drawback
X               though.  Dwarves are loudmouthed and proud, singing in  loud
X               voices,  arguing with themselves for no good reason, scream-
X               ing out  challenges  at  imagined  foes.   In  other  words,
X               dwarves have a miserable stealth.
X
X          Half-Orc
X               Half-Orcs make excellent warriors, and decent  priests,  but
X               are  terrible  at  magic.   They  are  as  bad as dwarves at
X               stealth, and horrible at searching, disarming,  and  percep-
X               tion.  Half-Orcs are, let's face it, ugly.  They tend to pay
X               more for goods in town.  Half-Orcs do make good priests  and
X               rogues,  for  the  simple reason that Half-Orcs tend to have
X               great constitutions and lots of hit points.
X
X          Half-Troll
X               Half-Trolls are incredibly strong, and have the highest  hit
X               points of any character race.  They are also very stupid and
X               slow.  They will make great warriors and iffy priests.  They
X               are  bad  at  searching, disarming, perception, and stealth.
X               They are so ugly that a Half-Orc grimaces in their presence.
X               They also happen to be fun to run...
X
X
X          2.4.1.  Race Versus Skills and Stats
X
X          Stat, hit dice, and experience points per level modifications due
X          to race are listed in the following table.
X
X                      Str  Int  Wis  Dex  Con  Chr  Hit Dice  Rqd Exp/level
X
X          Human        0    0    0    0    0    0      10          +0%
X          Half-Elf    -1   +1    0   +1   -1   +1       9         +10%
X          Elf         -1   +2   +1   +1   -2   +1       8         +20%
X          Halfling    -2   +2   +1   +3   +1   +1       6         +10%
X          Gnome       -1   +2    0   +2   +1   -2       7         +25%
X          Dwarf       +2   -3   +1   -2   +2   -3       9         +20%
X          Half-Orc    +2   -1    0    0   +1   -4      10         +10%
X          Half-Troll  +4   -4   -2   -4   +3   -6      12         +20%
X
X          Racial abilities as compared to each other, with 1 the lowest, or
X          worst,  and  10 the highest, or best, are listed in the following
X          table.
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                 Page 7
X
X
X
X                      Disarm Search Stealth Percep Fight Bows Save Infra
X
X           Human         5      5      5       5     5     5    5  None
X           Half-Elf      6      7      7       6     4     6    6  20 feet
X           Elf           8      9      7       7     3     9    7  30 feet
X           Halfling     10     10     10      10     1    10   10  40 feet
X           Gnome         9      7      9       9     2     8    9  30 feet
X           Dwarf         6      8      3       5     9     5    8  50 feet
X           Half-Orc      3      5      3       2     8     3    3  30 feet
X           Half-Troll    1      1      1       1    10     1    1  30 feet
X
X
X
X          2.5.  Choosing A Class
X
X          Once a race has been chosen, you will need to pick a class.  Some
X          classes  will  not be available to certain races, for instance, a
X          Half-Troll cannot become a Paladin.  For the first few adventures
X          it  is  suggested that you run a warrior or rogue.  Spell casting
X          generally requires a more experienced  player  that  is  familiar
X          with survival techniques.
X
X          Warrior
X               A Warrior is a hack-and-slash character, who solves most  of
X               his  problems  by cutting them to pieces, but will occasion-
X               ally fall back on the help of a magical device.   His  prime
X               stats  are  Strength  and Constitution, and a good Dexterity
X               can really help at times.  A Warrior will be good at  Fight-
X               ing and Throwing/Bows, but bad at most other skills.
X
X          Mage
X               A Mage must live by his wits.  He cannot hope to simply hack
X               his  way  through the dungeon, and so must therefore use his
X               magic to defeat, deceive, confuse, and escape.   A  mage  is
X               not really complete without an assortment of magical devices
X               to use in addition to his spells.  He can master the  higher
X               level  magical  devices far easier than anyone else, and has
X               the best saving throw to resist effects of  spells  cast  at
X               him.   Intelligence  and  Dexterity  are  his primary stats.
X               There is no rule that says  a  mage  cannot  become  a  good
X               fighter, but spells are his true realm.
X
X          Priest
X               A Priest is a character of holy devotion.  They explore  the
X               dungeon  only  to destroy the evil that lurks within, and if
X               treasure just happens to fall into  their  packs,  well,  so
X               much  more  to  the  glory of their church!  Priests receive
X               their spells from a deity, and therefore do not choose which
X               spells they will learn.  They are familiar with magical dev-
X               ices, preferring to call them instruments of  god,  but  are
X               not  as good as a mage in their use.  Priests have good sav-
X               ing throws,  and  make  decent  fighters,  preferring  blunt
X               weapons  over  edged  ones.   Wisdom  and  Charisma  are the
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                 Page 8
X
X
X               priest's primary stats.
X
X          Rogue
X               A Rogue is a character that prefers to live by his  cunning,
X               but  is capable of fighting his way out of a tight spot.  He
X               is the master of traps and locks, no device being impossible
X               for  him  to  overcome.  A rogue has a high stealth allowing
X               him to sneak around many creatures without having to  fight,
X               or sneak up and get the first blow.  A rogue's perception is
X               higher than any other class, and many times he will notice a
X               trap  or  secret  door  before having to search.  A rogue is
X               better than warriors or paladins with magical  devices,  but
X               still  can  not  rely on their performance.  Rogues can also
X               learn a few spells, but not the  powerful  offensive  spells
X               mages can use.  A rogue's primary stats are Intelligence and
X               Dexterity.
X
X          Ranger
X               A Ranger is a warrior/mage.  He is a good fighter,  and  the
X               best  of  the  classes  with a missile weapon such as a bow.
X               The ranger learns spells much more slowly than a  mage,  but
X               is  capable  of  learning  all  but the most powerful spell.
X               Because a ranger is really  a  dual  class  character,  more
X               experience  is  required for him to advance.  A ranger has a
X               good stealth, good perception, good searching, a good saving
X               throw,  and is good with magical devices.  His primary stats
X               are Intelligence and Dexterity.
X
X          Paladin
X               A Paladin is a warrior/priest.  He is a very  good  fighter,
X               second  only to the warrior class, but not very good at mis-
X               sile weapons.  He receives prayers at a slower pace then the
X               priest,  and  can  receive all but the most powerful prayer.
X               Because a paladin is  really  a  dual  class  character,  it
X               requires  more  experience  to advance him.  A paladin lacks
X               much in the way of abilities.  He is poor at  stealth,  per-
X               ception,  searching,  and  magical devices.  He has a decent
X               saving throw due to his divine alliance.  His primary  stats
X               are Strength and Charisma.
X
X
X          2.5.1.  Race Versus Class
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                 Page 9
X
X
X
X                      Warrior   Mage    Priest    Rogue   Ranger   Paladin
X
X          Human         Yes      Yes      Yes      Yes      Yes      Yes
X          Half-Elf      Yes      Yes      Yes      Yes      Yes      Yes
X          Elf           Yes      Yes      Yes      Yes      Yes      No
X          Halfling      Yes      Yes      No       Yes      No       No
X          Gnome         Yes      Yes      Yes      Yes      No       No
X          Dwarf         Yes      No       Yes      No       No       No
X          Half-Orc      Yes      No       Yes      Yes      No       No
X          Half-Troll    Yes      No       Yes      No       No       No
X
X
X
X          2.5.2.  Class Versus Skills
X
X          Class abilities as compared to each other, with 1 as the  lowest,
X          or worst, and 10 as the highest, or best are shown in the follow-
X          ing table.
X
X                             Save  Stea-        Magic                 Extra
X                  Fight Bows Throw  lth  Disarm Device Percep Search Exp/lev
X
X          Warrior  10     6    3     2      4      3      2      2       +0%
X          Mage      2     1   10     5      6     10      8      5      +30%
X          Priest    4     3    6     5      3      8      4      4      +20%
X          Rogue     8     9    7    10     10      6     10     10       +0%
X          Ranger    6    10    8     7      6      7      6      6      +40%
X          Paladin   9     5    4     2      2      4      2      2      +35%
X
X
X
X          3.  Adventuring
X
X          After you have created your character, you will begin your  moria
X          adventure.   Symbols  appearing on your screen will represent the
X          dungeon's walls, floor, objects, features, and creatures  lurking
X          about.   In order to direct your character through his adventure,
X          you will enter single character commands.
X
X          Moria symbols and commands each have a help  section  devoted  to
X          them.   You  should  review  these  sections before attempting an
X          adventure.  Finally, a description of the  town  level  and  some
X          general help on adventuring are included.
X
X
X          4.  Symbols On Your Map
X
X          Symbols on your map can be broken  down  into  three  categories:
X          Features  of  the dungeon such as walls, floor, doors, and traps;
X          Objects which can be picked up such as treasure, weapons, magical
X          devices,  etc;  and creatures which may or may not move about the
X          dungeon, but are mostly harmful to your character's well being.
X
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                Page 10
X
X
X          Some symbols can be in more than one category.   Also  note  that
X          treasure  may be embedded in a wall, and the wall must be removed
X          before the treasure can be picked up.
X
X          It will not be necessary to remember all of the symbols and their
X          meanings.  A simple command, the `/', will identify any character
X          appearing on your map.  See the section on commands  for  further
X          help.
X
X
X                                      Features
X
X          .   A floor space, or hidden trap   1   Entrance to General Store
X          #   A wall                          2   Entrance to Armory
X          '   An open door                    3   Entrance to Weapon Smith
X          +   A closed door                   4   Entrance to Temple
X          ^   A trap                          5   Entrance to Alchemy Shop
X          <   A staircase up                  6   Entrance to Magic Shop
X          >   A staircase down                :   Obstructing rubble
X          ;   A loose floor stone                 An open pit (Blank)
X          %   A mineral vein                  @   The character
X
X
X
X                                       Objects
X
X          !   A flask or potion         ?   A scroll
X          "   An amulet                 [   Hard armor
X          $   Money (Can be embedded)   \   A hafted weapon
X          &   A chest                   ]   Misc. armor
X          (   Soft armor                _   A staff
X          )   A shield                  {   Missile (arrow, bolt, pebble)
X          *   Gems (Can be embedded)    |   Sword or dagger
X          -   A wand                    }   Missile arm (Bow, X-bow, sling)
X          /   A pole-arm                ~   Misc
X          =   A ring                    ,   Food
X          s   A skeleton
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                Page 11
X
X
X
X                                     Creatures
X
X                    a   Giant Ant           A   Giant Ant Lion
X                    b   Giant Bat           B   The Balrog
X                    c   Giant Centipede     C   Gelatinous Cube
X                    d   Dragon              D   Ancient Dragon
X                    e   Floating Eye        E   Elemental
X                    f   Giant Frog          F   Fly
X                    g   Golem               G   Ghost
X                    h   Harpy               H   Hobgoblin
X                    i   Icky-Thing          I
X                    j   Jackal              J   Jelly
X                    k   Kobold              K   Killer Beetle
X                    l   Giant Louse         L   Lich
X                    m   Mold                M   Mummy
X                    n   Naga                N
X                    o   Orc or Ogre         O   Ooze
X                    p   Human(oid)          P   Giant Human(oid)
X                    q   Quasit              Q   Quylthulg
X                    r   Rodent              R   Reptile
X                    s   Skeleton            S   Scorpion
X                    t   Giant Tick          T   Troll
X                    u                       U   Umber Hulk
X                    v                       V   Vampire
X                    w   Worm or Worm Mass   W   Wight or Wraith.
X                    x                       X   Xorn
X                    y   Yeek                Y   Yeti
X                    z   Zombie              Z
X                    $   Creeping Coins      ,   Mushroom Patch
X
X
X
X          5.  Commands
X
X          All commands are entered by pressing a single key.  Some commands
X          are capital or control characters, which require you to hold down
X          the shift or control key while pressing another key.  As  a  spe-
X          cial  feature, control keys may be entered in a single stroke, or
X          in two strokes, with a `^' character first.
X
X          There are two command sets: the original command set which is the
X          default,  and the rogue like command set.  The rogue like command
X          is generally more convenient, especially  if  you  don't  have  a
X          keypad.
X
X          The following tables summarize the  two  command  sets.   Certain
X          commands  may  be preceded by an optional count, and certain com-
X          mands must be followed by  a  direction.   These  conditions  are
X          indicated in the tables by `@' for an optional count, and `~' for
X          a direction.  If a particular  command  requires  additional  key
X          strokes, then they will be prompted for.
X
X
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                Page 12
X
X
X
X                              Original command summary.
X            a   Aim and fire a wand         @ B ~    Bash (object/creature)
X            b   Browse a book                 C      Change name
X            c ~ Close a door                @ D ~    Disarm a trap/chest
X            d   Drop an item                  E      Eat some food
X            e   Equipment list                F      Fill lamp with oil
X            f   Fire/Throw an item            G      Gain new magic spells
X            i   Inventory list                L      Locate with map
X          @ j ~ Jam a door with spike         M      Map shown reduced size
X            l ~ Look given direction        @ R      Rest for a period
X            m   Magic spell casting           S      Search Mode
X          @ o ~ Open a door/chest           @ T ~    Tunnel in a direction
X            p   Pray                          V      View scoreboard
X            q   Quaff a potion                =      Set options
X            r   Read a scroll                 ?      Command quick reference
X          @ s   Search for trap or door       {      Inscribe an object
X            t   Take off an item            @ - ~    Move without pickup
X            u   Use a staff                   . ~    Run in direction
X            v   Version, credits and manual   /      Identify a character
X            w   Wear/Wield an item            CTRL-K Quit the game
X            x   Exchange weapon             @ CTRL-P Repeat the last message
X            <   Go up an up staircase         CTRL-X Save character and quit
X            >   Go down a down staircase    @ ~      for movement
X
X
X                            Rogue like command summary.
X            c ~    Close a door              C      Character description
X            d      Drop an item            @ D ~    Disarm a trap/chest
X            e      Equipment list            E      Eat some food
X          @ f ~    Force/bash item/monster   F      Fill lamp with oil
X            i      Inventory list            G      Gain new magic spells
X            m      magic spell casting       M      Map shown reduced size
X          @ o ~    Open a door/chest         P      Peruse a book
X            p      Pray                      Q      Quit the game
X            q      Quaff a potion          @ R      Rest for a period
X            r      Read a scroll           @ S ~    Spike a door
X          @ s      Search for trap or door   T      Take off an item
X            t      Throw an item             V      View scores
X            v      Version, and manual       W      Where: locate self
X            w      Wear/Wield an item        X      Exchange weapon
X            x ~    Examine surroundings      Z      Zap a staff
X            z      Zap a wand                #      Search Mode
X            =      Set options               <      Go up an up staircase
X            /      Identify a character      >      Go down a down stair
X          @ CTRL-P Previous message review   {      Inscribe an object
X          @ - ~    Move without pickup       ?      Type this page
X          @ CTRL ~ Tunnel in a direction     CTRL-X Save game and exit
X          @ SHFT ~ Run in direction        @ ~      for movement
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                Page 13
X
X
X          5.1.  Special keys.
X
X          Certain commands may be entered at any time  input  is  accepted.
X          The  special character control-R, entered as a single key stroke,
X          will always refresh the screen.  This may be used at  any  prompt
X          for input, and is otherwise ignored.
X
X          If you are playing on a UNIX or similar system,  then  there  are
X          some  additional  special  characters used by moria.  The special
X          character control-C will interrupt moria, and ask if  you  really
X          want  to  die and quit the game.  If you choose not to die, moria
X          merely  continues  as  before,  except  that  resting,   running,
X          repeated  commands,  etc will be terminated.  You can suspend the
X          game with control-Z, and return to the  original  command  shell.
X          In  this  case,  moria is not terminated, and may be restarted at
X          any time from the shell.  Alternatively, the special command  `!'
X          is  available  to  run any normal shell command.  When it is com-
X          plete, moria will restart.
X
X          For many input requests or queries, the special character  ESCAPE
X          will abort the command.  For the "-more-" message prompts, any of
X          SPACE, ESCAPE, RETURN (control-m), or LINEFEED (control-j) can be
X          used to continue after pausing to read the displayed message.
X
X          It is possible to give control  character  commands  in  two  key
X          stroke, by typing a `^' followed by the appropriate letter of the
X          alphabet.  This is useful when  running  moria  in  circumstances
X          where  control  characters  are intercepted by some external pro-
X          cess, or by the operating system.
X
X          5.2.  Direction.
X
X          For the original style command set, a direction  is  given  by  a
X          digit  which  is  in  the appropriate orientation on your keypad.
X          For the rogue like command set, a direction is given  by  one  of
X          the letters `hykulnjb'.  Again, the relative position of the keys
X          on the keyboard gives a clue as to the direction.  The digit  `5'
X          for the original commands, and the period `.' for rogue like com-
X          mands, is a null direction indicator.  This is only allowed in  a
X          movement  command (to stay in one place) or in a look command (to
X          look in all directions).
X
X               Original Directions
X
X                 \     |      /
X                  7    8     9
X
X               -  4          6  -
X
X                  1    2     3
X                 /     |      \
X
X
X
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                Page 14
X
X
X
X               Rogue-like Directions
X
X                 \      |       /
X                  y     k      u
X
X               -  h            l  -
X
X                  b     j      n
X                 /      |       \
X
X
X          Movement is accomplished by specifying a  direction  immediately.
X          Simply  press the appropriate key and you character will move one
X          step in that direction.  You can only move onto and through floor
X          spots,  and  only  if  they  contain  no creatures or obstructing
X          objects such as a closed door.
X
X          Other commands that require a direction will prompt for it.
X
X          Moving your character one step at a time can  be  time  consuming
X          and boring, so a faster method has been supplied.  For the origi-
X          nal style command set, by using the Run command `.', you may move
X          in   a   direction  until  something  interesting  happens.   For
X          instance, by pressing the period key `.' followed by  the  direc-
X          tion 8, your character would continue to move up the screen, only
X          coming to a stop after at least one condition is satisfied.   For
X          the  rogue  like command set, typing a shifted directional letter
X          will move you in that direction until something interesting  hap-
X          pens.   The  stopping conditions are described more completely in
X          the run command description below.
X
X
X          5.3.  Command counts.
X
X          Some commands can be executed a fixed number of times by  preced-
X          ing  them  with a count.  Counted commands will execute until the
X          count expires, or until you type any character,  or  until  some-
X          thing  significant  happens,  such  as  being  attacked.  Thus, a
X          counted command doesn't work to attack another  creature.   While
X          the  command  is  being  repeated, the number of times left to be
X          repeated will flash by on the command line at the bottom  of  the
X          screen.
X
X          To give a count to a command in the rogue  like  mode,  type  the
X          number  in digits, then the command.  A count of zero defaults to
X          a count of 99.
X
X          To give a count to a command in the original mode,  type  a  `#',
X          followed  by  the  digits.  To count a movement command (which is
X          itself a digit), type a space after the number, and you will then
X          be prompted for the command.
X
X          Counted commands are very useful for searching or  tunneling,  as
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                Page 15
X
X
X          they  automatically terminate on success, or if you are attacked.
X          You may also terminate a counted command, or a  Run  command,  by
X          typing  any  character.   This  character  is  ignored, but it is
X          safest to use a SPACE or ESCAPE which are always ignored as  com-
X          mands.
X
X
X          5.4.  Selection of objects.
X
X          Many commands will also prompt for  a  particular  object  to  be
X          used.   For  example,  the  command to read a scroll will ask you
X          which of the scrolls that you are carrying that you wish to read.
X          In  such  cases,  the selection is made by typing a letter of the
X          alphabet.  The prompt will indicate  the  possible  letters,  and
X          will  also allow you to type the key `*', which causes all of the
X          available options to be described.
X
X          The particular object may be selected by an upper case or a lower
X          case  letter.   If  lower case is used, the selection takes place
X          immediately.  If upper case is used, then the  particular  option
X          is  described,  and  you  are  given  the option of confirming or
X          retracting that choice.  Upper case selection is thus safer,  but
X          requires an extra key stroke.
X
X
X          5.5.  Command descriptions
X
X          In the following command descriptions, the original style key  is
X          given.  If the rogue like key for that command is different, then
X          it will be shown inside the braces following the command name.
X
X          B <Dir> - Bash. {f - force}
X               The bash command includes breaking open doors and chests, or
X               bashing  an  opponent.   Your bashing ability increases with
X               weight and strength.  In addition, when bashing an opponent,
X               you  will  either  perform  a  body  bash, or, if wielding a
X               shield, perform a shield bash which is more effective.
X
X               Bashing a door can throw you off balance, but this will  not
X               generally  be a problem.  Doors that have been jammed closed
X               with spikes can only be opened by bashing.  Locked doors may
X               also  be  bashed open.  Bashing a door open will permanently
X               break it.
X
X               Bashing a  creature  affects  both  you  and  the  opponent.
X               Depending  on  your  dexterity, you may or may not be thrown
X               off balance allowing free moves to your  opponent.   If  the
X               bash is successful, your opponent may be thrown off balance,
X               thus giving you some free hits or a  chance  to  run.   Huge
X               creatures  such  as  ancient  dragons  will  be difficult or
X               impossible to bash successfully.
X
X               A player automatically performs a shield bash instead  of  a
X               body  bash,  if  he is currently wearing a shield.  A shield
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                Page 16
X
X
X               bash adds the damage of a shield to that of the bash, so  it
X               is more effective.  Size and material both affect the damage
X               that a shield will do.
X
X               You can apply a count to this command, but if you are thrown
X               off balance, the count will be reset straight away.
X
X          C  - Print character (to screen or file).
X               This command allows the player to either display his charac-
X               ter  on the terminal screen, or to print an entire character
X               info listing to a file.  The character's history, equipment,
X               and  inventory  list are also included if you chose to print
X               it to a file.
X
X          D <Dir> - Disarm a trap.
X               You can attempt to disarm floor traps,  or  trapped  chests.
X               If  you  fail  to  disarm a trap, there is a chance that you
X               blunder and set it off.  You can only disarm  a  trap  on  a
X               chest  after  finding it with the search command.  This com-
X               mand can have a count.
X
X          E  - Eat some food.
X               A character must eat occasionally to remain effective.  As a
X               character  grows hungry, a message will appear at the bottom
X               of the screen  saying  "Hungry".   If  a  character  remains
X               hungry long enough, he will become weak and eventually start
X               fainting.  Eventually, you will die of starvation if you  do
X               not eat.
X
X          F  - Fill a lamp or lantern with oil.
X               If your character is currently using a lamp for  light,  and
X               if  he  has  a  flask of oil in inventory, he may refill the
X               lamp by using this command.  A lamp is capable of a  maximum
X               of  15000  turns  of light, and each flask has 7500 turns of
X               oil contained in it.
X
X          G  - Gain new spells.
X               To actually learn new spells, you  must  use  this  command.
X               When  you  are  able  to learn some spells, the word "Study"
X               will appear on the status line at the bottom of the  screen.
X               Mages,  rogues,  and  rangers must have the magic books con-
X               taining new spells to be able to learn  them.   Priests  and
X               Paladins are given their prayers by their gods, and hence do
X               not need a holy book before learning the spells in it.
X
X          L  - Location on map. {W - where}
X               The location command allows you to look at all parts of  the
X               current dungeon level.  The displayed view of the dungeon is
X               shifted to bring your  current  position  as  close  to  the
X               center as possible.  You may then shift the displayed map in
X               any of the eight possible directions.  Each shift moves your
X               view  point by one half screen.  The top line displays a map
X               section number, each map section having a height  and  width
X               one half that of the display, and indicates the direction of
X
X
X
X
X
X
X
X
X
X          The Dungeons of Moria                                Page 17
X
X
X               the display from your current position.  If  you  exit  this
X               command  while  you are not on the display, then the display
X               is centered again.
X
X          M  - Map shown reduced size.
X               This command will show the entire map, reduced by  a  factor
X               of  nine,  on  the screen.  Since nine places map into every
X               character on the screen, only  the  major  dungeon  features
X               will  be  visible.   This  is  especially useful for finding
X               where the stairs are in relation to your  current  position.
X               It is also useful for identifying unexplored areas.
X
X          R  - Rest for a number of turns.
X               You may rest one turn with the null movement command.  Rest-
X               ing  for longer periods of time is accomplished by using the
X               Rest command, followed by the number of turns  you  want  to
X               rest your character.  Resting will continue until the speci-
X               fied duration has expired, or something to wake the  charac-
X               ter  happens,  such  as  a creature wandering by, or getting
X               hungry, or some disability like blindness expiring.   It  is
X               sometimes  a  good idea to rest a beat up character until he
X               regains some of his hit points, but be sure to  have  plenty
X               of food if you rest often.
X
X               If you have accidentally entered in a rest period too large,
X               or  change  your mind about the resting period, you may wake
X               your character up by typing any character.  Space  is  best,
X               since  if  the rest ends just before the character is typed,
X               the space is ignored as a command.
X
X               It is also possible to rest by typing the count  first,  and
X               using either the Rest or the null movement command.
X
X               If you type `*' for the rest count, your character will rest
X               until  both  hp  and  mana  reach  their maximum values.  As
X               above,  you  will  immediately  stop  resting  if   anything
X               interesting happens.
X
X          S  - Search mode toggle. {#}
X               The Searching toggle will take you into and  out  of  search
X               mode.   When  first  pressed,  the  message "Searching" will
X               appear at the bottom of the screen.  You are now taking  two
X               turns  for each command, one for the command and one turn to
X               search.  This means that you are taking twice  the  time  to
X               move  about the dungeon, and therefore twice the food.  If a
X               creature should happen by or attack you,  search  mode  will
X               automatically  shut  off.  You may also turn off search mode
X               by again pressing the `S' {or #} key.
X
X          T <Dir> - Tunnel through rock. {control-<Dir>}
X               Tunneling (Mining) is a very useful  art.   There  are  four
X               kinds  of  rock  present in the dungeons of moria: Permanent
X               Rock, Granite Rock, Magma Intrusion, and Quartz Veins.  Per-
X               manent  Rock  is  exactly  that, permanent.  Granite is very
X
X
X
X
X
X
END_OF_FILE
if test 49267 -ne `wc -c <'doc/moria1.txt'`; then
    echo shar: \"'doc/moria1.txt'\" unpacked with wrong size!
fi
# end of 'doc/moria1.txt'
fi
if test -f 'source/prayer.c' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'source/prayer.c'\"
else
echo shar: Extracting \"'source/prayer.c'\" \(4788 characters\)
sed "s/^X//" >'source/prayer.c' <<'END_OF_FILE'
X/* source/prayer.c: code for priest spells
X
X   Copyright (c) 1989-92 James E. Wilson, Robert A. Koeneke
X
X   This software may be copied and distributed for educational, research, and
X   not for profit purposes provided that this copyright and statement are
X   included in all such copies. */
X
X#include "config.h"
X#include "constant.h"
X#include "types.h"
X#include "externs.h"
X
X
X/* Pray like HELL.					-RAK-	*/
Xvoid pray()
X{
X  int i, j, item_val, dir;
X  int choice, chance, result;
X  register spell_type *s_ptr;
X  register struct misc *m_ptr;
X  register struct flags *f_ptr;
X  register inven_type *i_ptr;
X#ifdef ATARIST_MWC
X  int32u holder;
X#endif
X
X  free_turn_flag = TRUE;
X  if (py.flags.blind > 0)
X    msg_print("You can't see to read your prayer!");
X  else if (no_light())
X    msg_print("You have no light to read by.");
X  else if (py.flags.confused > 0)
X    msg_print("You are too confused.");
X  else if (class[py.misc.pclass].spell != PRIEST)
X    msg_print("Pray hard enough and your prayers may be answered.");
X  else if (inven_ctr == 0)
X    msg_print ("But you are not carrying anything!");
X  else if (!find_range(TV_PRAYER_BOOK, TV_NEVER, &i, &j))
X    msg_print ("You are not carrying any Holy Books!");
X  else if (get_item(&item_val, "Use which Holy Book?", i, j, CNIL, CNIL))
X    {
X      result = cast_spell("Recite which prayer?", item_val, &choice, &chance);
X      if (result < 0)
X	msg_print("You don't know any prayers in that book.");
X      else if (result > 0)
X	{
X	  s_ptr = &magic_spell[py.misc.pclass-1][choice];
X	  free_turn_flag = FALSE;
X
X	  if (randint(100) < chance)
X	    msg_print("You lost your concentration!");
X	  else
X	    {
X	      /* Prayers.					*/
X	      switch(choice+1)
X		{
X		case 1:
X		  (void) detect_evil();
X		  break;
X		case 2:
X		  (void) hp_player(damroll(3, 3));
X		  break;
X		case 3:
X		  bless(randint(12)+12);
X		  break;
X		case 4:
X		  (void) remove_fear();
X		  break;
X		case 5:
X		  (void) light_area(char_row, char_col);
X		  break;
X		case 6:
X		  (void) detect_trap();
X		  break;
X		case 7:
X		  (void) detect_sdoor();
X		  break;
X		case 8:
X		  (void) slow_poison();
X		  break;
X		case 9:
X		  if (get_dir(CNIL, &dir))
X		    (void) confuse_monster(dir, char_row, char_col);
X		  break;
X		case 10:
X		  teleport((int)(py.misc.lev*3));
X		  break;
X		case 11:
X		  (void) hp_player(damroll(4, 4));
X		  break;
X		case 12:
X		  bless(randint(24)+24);
X		  break;
X		case 13:
X		  (void) sleep_monsters1(char_row, char_col);
X		  break;
X		case 14:
X		  create_food();
X		  break;
X		case 15:
X		  for (i = 0; i < INVEN_ARRAY_SIZE; i++)
X		    {
X		      i_ptr = &inventory[i];
X		      /* only clear flag for items that are wielded or worn */
X		      if (i_ptr->tval >= TV_MIN_WEAR
X			  && i_ptr->tval <= TV_MAX_WEAR)
X#ifdef ATARIST_MWC
X			i_ptr->flags &= ~(holder = TR_CURSED);
X#else
X			i_ptr->flags &= ~TR_CURSED;
X#endif
X		    }
X		  break;
X		case 16:
X		  f_ptr = &py.flags;
X		  f_ptr->resist_heat += randint(10) + 10;
X		  f_ptr->resist_cold += randint(10) + 10;
X		  break;
X		case 17:
X		  (void) cure_poison();
X		  break;
X		case 18:
X		  if (get_dir(CNIL, &dir))
X		    fire_ball(GF_HOLY_ORB, dir, char_row, char_col,
X			      (int)(damroll(3, 6)+py.misc.lev),
X			      "Black Sphere");
X		  break;
X		case 19:
X		  (void) hp_player(damroll(8, 4));
X		  break;
X		case 20:
X		  detect_inv2(randint(24)+24);
X		  break;
X		case 21:
X		  (void) protect_evil();
X		  break;
X		case 22:
X		  earthquake();
X		  break;
X		case 23:
X		  map_area();
X		  break;
X		case 24:
X		  (void) hp_player(damroll(16, 4));
X		  break;
X		case 25:
X		  (void) turn_undead();
X		  break;
X		case 26:
X		  bless(randint(48)+48);
X		  break;
X		case 27:
X		  (void) dispel_creature(CD_UNDEAD, (int)(3*py.misc.lev));
X		  break;
X		case 28:
X		  (void) hp_player(200);
X		  break;
X		case 29:
X		  (void) dispel_creature(CD_EVIL, (int)(3*py.misc.lev));
X		  break;
X		case 30:
X		  warding_glyph();
X		  break;
X		case 31:
X		  (void) dispel_creature(CD_EVIL, (int)(4*py.misc.lev));
X		  (void) remove_fear();
X		  (void) cure_poison();
X		  (void) hp_player(1000);
X		  break;
X		default:
X		  break;
X		}
X	      /* End of prayers.				*/
X	      if (!free_turn_flag)
X		{
X		  m_ptr = &py.misc;
X		  if ((spell_worked & (1L << choice)) == 0)
X		    {
X		      m_ptr->exp += s_ptr->sexp << 2;
X		      prt_experience();
X		      spell_worked |= (1L << choice);
X		    }
X		}
X	    }
X	  m_ptr = &py.misc;
X	  if (!free_turn_flag)
X	    {
X	      if (s_ptr->smana > m_ptr->cmana)
X		{
X		  msg_print("You faint from fatigue!");
X		  py.flags.paralysis =
X		    randint((int)(5 * (s_ptr->smana-m_ptr->cmana)));
X		  m_ptr->cmana = 0;
X		  m_ptr->cmana_frac = 0;
X		  if (randint(3) == 1)
X		    {
X		      msg_print("You have damaged your health!");
X		      (void) dec_stat (A_CON);
X		    }
X		}
X	      else
X		m_ptr->cmana -= s_ptr->smana;
X	      prt_cmana();
X	    }
X	}
X    }
X}
END_OF_FILE
if test 4788 -ne `wc -c <'source/prayer.c'`; then
    echo shar: \"'source/prayer.c'\" unpacked with wrong size!
fi
# end of 'source/prayer.c'
fi
echo shar: End of archive 5 \(of 39\).
cp /dev/null ark5isdone
MISSING=""
for I in 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 ; do
    if test ! -f ark${I}isdone ; then
	MISSING="${MISSING} ${I}"
    fi
done
if test "${MISSING}" = "" ; then
    echo You have unpacked all 39 archives.
    echo "Now run "bldfiles.sh" to build split files"
    rm -f ark[1-9]isdone ark[1-9][0-9]isdone
else
    echo You still need to unpack the following archives:
    echo "        " ${MISSING}
fi
##  End of shell archive.
exit 0
