


XKAL(1)                  USER COMMANDS                    XKAL(1)



NNNNAAAAMMMMEEEE
     xkal - graphical appointment calendar

SSSSYYYYNNNNOOOOPPPPSSSSIIIISSSS
     xxxxkkkkaaaallll [X Toolkit options]  [-appoints filename]  [-date date]
     [-listOnly]      [-silent]      [-numMonths 1|2|3|12]     [-
     [no]exitUsesLevels] [-[no]bothShown]  [-[no]opaqueDates]  [-
     [no]dowLabels] [-[no]titlebar] [-version] [-help]

DDDDEEEESSSSCCCCRRRRIIIIPPPPTTTTIIIIOOOONNNN
     Xkal is a graphical appointment calendar that allows you  to
     maintain  many  types of reminders, displays them in several
     different formats, and allows you  to  add  and  edit  them.
     Silent  and  non-graphic modes are provided to allow xkal to
     be used to check for appointments without interaction.

     The general behaviour of xkal is  to  display  one  or  more
     months.  Clicking  Button1 on a particular day displays that
     day's reminder information, either next to the month or in a
     popup  window  (see the bbbbooootttthhhhSSSShhhhoooowwwwnnnn resource, below). The rem-
     inders can be edited within this  window,  and  changes  are
     automatically  saved when the tool is exited. Changes can be
     aborted or the appointments can be saved  immediately  using
     other actions.  Most available actions are provided by a set
     of menuButtons above the month display. Clicking and holding
     on  these  buttons  displays  a  menu from which the desired
     action can be selected. (See below under Translation Actions
     for  a  list  of  the  actions  and ways to customize xkal's
     behaviour.)

     Reminders can come from two different sources:  ssssyyyysssstttteeeemmmm  rem-
     inders  cannot be edited or deleted; ppppeeeerrrrssssoooonnnnaaaallll reminders can.
     See below under OPTIONS, FILE FORMATS, and  FILES  for  more
     details  about  these files. When appointments conflict (ie.
     there is more than one reminder that applies for a given day
     and  time),  xkal moves one of them to a different time (see
     the rrrreeeeaaaarrrrrrrraaaannnnggggeeeeSSSSiiiilllleeeennnnttttllllyyyy resource).

     Each reminder can have a "criticality level" associated with
     it,  indicating  its  importance.  This  is reflected in the
     month display by shading (on monochrome displays) or  color-
     ing  (on  color displays) days depending on the total criti-
     cality of their appointments. Typically, frequent or regular
     reminders would be given level zero, and only more important
     or unique reminders would influence  the  display  (although
     they would all be displayed when the day is selected).

     Double-clicking on a reminder will pop up a window in  which
     the  entry can be edited, changing things such as the criti-
     cality level as desired. Other fields can also  be  changed,
     for  example  to  make the reminder weekly or monthly rather
     than for that specific day.   Clicking  on  the  applyButton



U of Rochester        Last change: 26/10/90                     1






XKAL(1)                  USER COMMANDS                    XKAL(1)



     adds the appointment, the revertButton resets the text items
     but does NOT undo the  effects  of  previous  "apply"s,  the
     deleteButton deletes any reminders matching the given infor-
     mation exactly, and the dismissButton pops down the window.

     Xkal is designed to be completely customizable. The  section
     below,  CUSTOMIZING  XKAL,  describes the widget hierarchies
     and other relevant resources to help with this. In  particu-
     lar,  the  relative  positions  of  most of xkal's main com-
     ponents is completely flexible. This version  of  xkal  also
     supports  full customization of names for use with languages
     other than English.

OOOOPPPPTTTTIIIIOOOONNNNSSSS
     The following non-widget resources can be set on the command
     line  as well as in a resource file. As usual, when given on
     the command line they can be abbreviated to  their  shortest
     unique  prefix,  often  the first letter.  Furthermore, xkal
     accepts all the standard X Toolkit options.

     ----aaaappppppppooooiiiinnnnttttssss filename
          Uses the given filename as the  name  of  the  personal
          appointment file.  The format of this file is described
          below under FILE FORMATS.  A  leading  tilde  (`~')  is
          expanded   to  the  value  of  $HOME.  The  default  is
          `~/.appoints'.  This option corresponds to the resource
          ppppeeeerrrrssssoooonnnnaaaallllAAAAppppppppooooiiiinnnnttttssss.

     ----ddddaaaatttteeee date
          Changes xkal's notion  of  the  current  date  (usually
          obtained from the system). The date string should be as
          described below under  DATE  FORMATS,  with  whitespace
          escaped if given on the command line.

     ----lllliiiissssttttOOOOnnnnllllyyyy
          If given, then xkal simply lists the  appointments  and
          weekly  reminders to stdout, and exits without interac-
          tion. The exit status is the number of appointments for
          the day. See also eeeexxxxiiiittttUUUUsssseeeessssLLLLeeeevvvveeeellllssss, below.

     ----ssssiiiilllleeeennnntttt
          Like above, but simply sets the exit status and doesn't
          print  anything.  Useful for checking whether there are
          any appointments. See also ----eeeexxxxiiiittttUUUUsssseeeessssLLLLeeeevvvveeeellllssss, below.

     ----eeeexxxxiiiittttUUUUsssseeeessssLLLLeeeevvvveeeellllssss
          If given, then the exit status returned in lllliiiissssttttOOOOnnnnllllyyyy and
          ssssiiiilllleeeennnntttt  modes is the total of the criticality levels of
          the day's appointments, rather than the number of them.

     ----nnnnooooeeeexxxxiiiittttUUUUsssseeeessssLLLLeeeevvvveeeellllssss
          The opposite of ----eeeexxxxiiiittttUUUUsssseeeessssLLLLeeeevvvveeeellllssss....  The  exit  status  is



U of Rochester        Last change: 26/10/90                     2






XKAL(1)                  USER COMMANDS                    XKAL(1)



          the number of appointments, rather than their critical-
          ity total. This is the default.

     ----nnnnuuuummmmMMMMoooonnnntttthhhhssss 1|3|12
          Determines whether  xkal  will  start  displaying  one,
          three,  or  twelve  months.   This can be changed while
          xkal  is  running  using  the  xxxxkkkkaaaallll----nnnnuuuummmmMMMMoooonnnntttthhhhssss(((())))  action
          described  below under Translation Actions. The default
          is to show one month.

     ----bbbbooootttthhhhSSSShhhhoooowwwwnnnn
          If given, then the day's appointments are displayed  in
          the  main  tool  window,  otherwise  a  popup window is
          created for them. When a day window is  popped  up,  it
          becomes  the selected window and subsequent appointment
          updates  are  done  in  it.  It  can  be  selected  and
          deselected  using  the  buttons.  If no popup window is
          selected when a day is clicked on,  then  a  new  popup
          window will be created. The DDDDiiiissssmmmmiiiissssssss button destroys the
          popup window. When this option is given (the  default),
          no popup windows are ever created.

     ----nnnnoooobbbbooootttthhhhSSSShhhhoooowwwwnnnn
          The opposite of ----bbbbooootttthhhhSSSShhhhoooowwwwnnnn.

     ----ooooppppaaaaqqqquuuueeeeDDDDaaaatttteeeessss
          If given, then the numbers in the dayButtons are  drawn
          opaquely,  which  some  people find easier to read when
          the day is stippled. This is the default.

     ----nnnnooooooooppppaaaaqqqquuuueeeeDDDDaaaatttteeeessss
          The opposite of ----ooooppppaaaaqqqquuuueeeeDDDDaaaatttteeeessss.

     ----ddddoooowwwwLLLLaaaabbbbeeeellllssss
          If given, labels are provided at the top of each column
          in each month indicating the day of the week.

     ----nnnnooooddddoooowwwwLLLLaaaabbbbeeeellllssss
          The opposite of ----ddddoooowwwwLLLLaaaabbbbeeeellllssss.  The  default  is  nnnnooooddddoooowwwwLLLLaaaa----
          bbbbeeeellllssss.

     ----ttttiiiittttlllleeeebbbbaaaarrrr
          If true, the titlebar of the main window and any  popup
          day  windows  is  changed  to reflect the selected day.
          This is the default. This  option  corresponds  to  the
          resource uuuusssseeeeTTTTiiiittttlllleeeebbbbaaaarrrr.

     ----nnnnoooottttiiiittttlllleeeebbbbaaaarrrr
          The opposite of ----uuuusssseeeeTTTTiiiittttlllleeeebbbbaaaarrrr.

     ----uuuuppppddddaaaatttteeeeIIIInnnntttteeeerrrrvvvvaaaallll mins
          The number of minutes between  automatic  checkpointing



U of Rochester        Last change: 26/10/90                     3






XKAL(1)                  USER COMMANDS                    XKAL(1)



          (saving)  of the appointments. If this is zero, then no
          automatic checkpointing is done.   The  default  is  to
          checkpoint every five minutes.

     ----vvvveeeerrrrssssiiiioooonnnn
          Prints the current version of xkal to stdout and exits.

     ----hhhheeeellllpppp
          Prints the usage message, summarizing these options.

CCCCUUUUSSSSTTTTOOOOMMMMIIIIZZZZIIIINNNNGGGG XXXXKKKKAAAALLLL
     Xkal has a default set of resources built in. If you wish to
     customize  the  tool, take a copy of the default application
     defaults file (see FILES below) and modify it. Then,  before
     invoking  xkal,  set the environment variable XXXXAAAAPPPPPPPPLLLLRRRREEEESSSSDDDDIIIIRRRR to
     the directory containing your private  copy.  Alternatively,
     you  can  place  entries  in your .Xdefaults file or provide
     them with the -xrm toolkit option.

OOOOtttthhhheeeerrrr NNNNoooonnnn----WWWWiiiiddddggggeeeetttt RRRReeeessssoooouuuurrrrcccceeeessss
     The following resources customize xkal's file operations:

     ssssyyyysssstttteeeemmmmAAAAppppppppooooiiiinnnnttttssss
          The file for system (non-editable)  reminders.  Default
          is to not have a system reminder file.

     bbbbaaaacccckkkkuuuuppppEEEExxxxtttteeeennnnssssiiiioooonnnn
          The suffix used when the personal appointments file  is
          backed  up  before saving it. If this is empty then the
          file is not backed up. The default is to append a tilde
          (`~').

     oooouuuuttttppppuuuuttttFFFFoooorrrrmmmmaaaatttt
          This resource specifies the desired "canonical"  output
          format. It should be a string with printf-style escapes
          that are replaced with parts of the  reminder  as  fol-
          lows:
               %w   short form of day of the week
               %W   long form of day of the week
               %d   day
               %m   short form of month
               %M   long form of month
               %n   numeric form of month
               %y   year
               %Y   year modulo 100
               %t   time
               %l   criticality level
               %~   space iff previous pattern was printed
               %/   slash iff previous pattern was printed
          The default is "%w%~%d%~%m%~%y%~%t%~%l%~". Another pos-
          sibility   might  be  "~%n%/%d%/%Y%~%w%~%t%~%l%~"  (see
          ddddaaaayyyySSSSllllaaaasssshhhhMMMMoooonnnntttthhhh, below).



U of Rochester        Last change: 26/10/90                     4






XKAL(1)                  USER COMMANDS                    XKAL(1)



     ddddaaaayyyySSSSllllaaaasssshhhhMMMMoooonnnntttthhhh
          This resource  controls  how  dates  with  slashes  are
          interpreted. If it is True, then these dates are inter-
          preted as "day/month" or "day/month/year"  rather  than
          the default "mon/day" or "mon/day/year".

     lllleeeevvvveeeellllDDDDeeeelllliiiimmmm
          This  resource  specifies  the  characters  that,  when
          encountered while parsing a reminder, indicate its cri-
          ticality level. If it is one character, then that char-
          acter is used for both the opening and the closing del-
          imiter. The default is to have  the  criticality  level
          enclosed in ampersands (`@').

     ddddeeeeffffaaaauuuullllttttLLLLeeeevvvveeeellll
          The  default  criticality   level   for   newly-created
          appointments.  This  can  be  changed  by  editing  the
          appointment. The default is one (`1').

     The following resources customize various aspects of dates:

     lllloooonnnnggggDDDDoooowwwwSSSSttttrrrriiiinnnnggggssss
          This resource should be a whitespace-separated list  of
          seven strings (sorry, no escapes for blanks yet) speci-
          fying the full names of the days of the week, in  order
          from Sunday to Saturday.

     sssshhhhoooorrrrttttDDDDoooowwwwSSSSttttrrrriiiinnnnggggssss
          This resource specifies the seven abbreviated forms  of
          the names of the days of the week.

     lllloooonnnnggggMMMMoooonnnntttthhhhSSSSttttrrrriiiinnnnggggssss
          This resource specifies the twelve full  names  of  the
          months, in order from January to December.

     sssshhhhoooorrrrttttMMMMoooonnnntttthhhhSSSSttttrrrriiiinnnnggggssss
          This resource specifies the twelve abbreviated forms of
          the names of the months.

     ddddoooowwwwOOOOffffffffsssseeeetttt
          This resource specifies which day of the week  is  con-
          sidered  "first", relative to the lists above. If it is
          zero (the default), then the first string ("Sunday") is
          the  first  day  of  the  week;  if it is one, then the
          second string ("Monday") is first (leftmost in a calen-
          dar).  This  resource  might not be needed as you could
          probably just rearrange the strings.

     The following resources  customize  the  appearance  of  the
     day's reminders:

     aaaappppppppssssSSSSttttaaaarrrrttttTTTTiiiimmmmeeee



U of Rochester        Last change: 26/10/90                     5






XKAL(1)                  USER COMMANDS                    XKAL(1)



          Specifies the time of the earliest entry for a day.  It
          should  be of the form "hours:mins", with optional "am"
          or "pm" indicator. The "mins"  field  (with  colon)  is
          optional. The default is "8:00".

     aaaappppppppssssEEEEnnnnddddTTTTiiiimmmmeeee
          Specifies the time of the latest entry for a  day.  The
          default is "17:00".

     aaaappppppppssssIIIInnnnccccrrrreeeemmmmeeeennnntttt
          Specifies the interval between entries. The default  is
          ":30".

     aaaappppppppssssUUUUsssseeeeAAAAmmmmPPPPmmmm
          If True, then reminder slots are  labelled  in  12-hour
          (with  "am"  or "pm") notation, rather than the default
          24-hour form.

     nnnnuuuummmmNNNNooootttteeeessss
          Specifies the number of entries that are not associated
          with a time. The default is two (`2').

     nnnnooootttteeeessssLLLLaaaabbbbeeeellll
          Specifies the label for those entries without  a  time.
          The default is "NOTES".

     nnnnoooooooonnnnSSSSttttrrrr
          Specifies the string used for representing  12:00.  The
          default  is  "Noon".   When  aaaappppppppssssUUUUsssseeeeAAAAmmmmPPPPmmmm  is  True this
          string is used  to  label  the  appropriate  slot.  The
          string  is  also  understood  in  reminder files (so be
          careful when changing it  or  old  files  written  with
          aaaappppppppssssUUUUsssseeeeAAAAmmmmPPPPmmmm True will not be readable).

     mmmmiiiiddddnnnniiiigggghhhhttttSSSSttttrrrr
          Like  nnnnoooooooonnnnSSSSttttrrrr  but  specifies  the  string   used   for
          representing 0:00. The default is "Midnight".

     rrrreeeeaaaarrrrrrrraaaannnnggggeeeeSSSSiiiilllleeeennnnttttllllyyyy
          When two or more reminders are specified for  the  same
          time  (either  because they are from different files or
          because one or more is weekly or monthly or  whatever),
          xkal will move some of the reminders to other slots. If
          this resource is True, then it will do so without indi-
          cating  it.  If False (the default), then it will indi-
          cate the original time in square  brackets  before  the
          text  of  the  reminder.  If there is an reminder for a
          time for which there is no slot, then this reminder  is
          moved to the notes section and labelled as above.

     The following resources control how criticality  levels  are
     reflected  in  the calendar display. Where bitmaps are to be



U of Rochester        Last change: 26/10/90                     6






XKAL(1)                  USER COMMANDS                    XKAL(1)



     specified, they can either be absolute pathnames or else are
     taken  relative  to the global resource bbbbiiiittttmmmmaaaappppFFFFiiiilllleeeePPPPaaaatttthhhh.  See
     XXXXmmmmuuuuLLLLooooccccaaaatttteeeeBBBBiiiittttmmmmaaaappppFFFFiiiilllleeee(3X) for details.

     nnnnooooDDDDaaaayyyySSSShhhhaaaaddddeeee
          Specifies the bitmap for  shading  boxes  that  do  not
          correspond  to a day in that month. These boxes are not
          selectable, obviously. Default is "cross_weave".

     mmmmaaaaxxxxLLLLeeeevvvveeeellll
          Specifies the number of different levels of criticality
          that can be displayed. Levels greater than this use the
          maximum level. The default is seven (`7').

     sssshhhhaaaaddddeeeessss
          This resource should be a whitespace-separated list  of
          bitmap   names.  They  will  be  used  with  monochrome
          displays to shade the day appropriately. Days for which
          the  total reminder criticality is 1 will use the first
          shade, etc. If fewer than mmmmaaaaxxxxLLLLeeeevvvveeeellll  bitmaps  are  given
          then  the  last entry is used for levels for which none
          was given. The default is a series of gray shades.

     ccccoooolllloooorrrrssss
          Like sssshhhhaaaaddddeeeessss, but specifies the colors to be  used  with
          color  displays. The default is green, blue, and yellow
          for two levels each, then red for the rest.

WWWWiiiiddddggggeeeetttt HHHHiiiieeeerrrraaaarrrrcccchhhhyyyy
     Xkal uses standard Athena widgets which can be customized as
     usual.   Some  of the resources used to describe the widgets
     must be given as non-widget resources due to  problems  with
     the  creation/realization order.  These are identified below
     and in the resource file.  The widget hierarchy is  as  fol-
     lows:

             TopLevelShell Xkal
                 Form bothForm
                     MenuButton fileButton,viewButton,otherButton
                     Form allMonthsForm
                     Form dayForm [if bbbbooootttthhhhSSSShhhhoooowwwwnnnn is True]

     The Form widget aaaallllllllMMMMoooonnnntttthhhhssssFFFFoooorrrrmmmm contains the months, depending
     on  the  value  of the nnnnuuuummmmMMMMoooonnnntttthhhhssss resource these will be one,
     three, or  twelve  Forms  named  mmmmoooonnnntttthhhhFFFFoooorrrrmmmm1111,  mmmmoooonnnntttthhhhFFFFoooorrrrmmmm3333  or
     mmmmoooonnnntttthhhhFFFFoooorrrrmmmm11112222  respectively.  This separation of specification
     allows each type of display  to  be  customized  separately.
     Each  monthForm will contain a Label MMMMoooonnnntttthhhhLLLLaaaabbbbeeeellllX (where X is
     1, 3, or 12) and Toggles for the days named ddddaaaayyyyBBBBuuuuttttttttoooonnnnX.   In
     order  to correctly allocate pixmaps, the size of these but-
     tons must be set in the non-widget resources ddddaaaatttteeeeWWWWiiiiddddtttthhhhX  and
     ddddaaaatttteeeeHHHHeeeeiiiigggghhhhttttX,   rather   than  using  the  width  and  height



U of Rochester        Last change: 26/10/90                     7






XKAL(1)                  USER COMMANDS                    XKAL(1)



     resources of the ddddaaaayyyyBBBBuuuuttttttttoooonnnnX.  The printing of  the  date  in
     the  ddddaaaayyyyBBBBuuuuttttttttoooonnnn  is  controlled  by  the non-widget resources
     ddddaaaatttteeeeFFFFoooonnnnttttX and ddddaaaatttteeeePPPPoooossssiiiittttiiiioooonnnnX; this last should be a  geometry
     string  of  the  form `+x+y' taken as an offset from the top
     left corner of the button.

     If bbbbooootttthhhhSSSShhhhoooowwwwnnnn is not True, then the popup window looks like

             TopLevelShell popupDayShell
                 Form popupDayForm
                     Command dismissButton
                     Command selectButton
                     Command unselectButton
                     Form dayForm

     In either case, the ddddaaaayyyyFFFFoooorrrrmmmm contains a  Label  ddddaaaayyyyLLLLaaaabbbbeeeellll  (to
     display the date), and enough instances of pairs of: a Label
     aaaappppppppooooiiiinnnnttttLLLLaaaabbbbeeeellll to display the time of the appointment  and  an
     AsciiText   aaaappppppppooooiiiinnnnttttTTTTeeeexxxxtttt   for  displaying  and  editing  the
     appointment itself. The number of these is of course  deter-
     mined  by  the resources aaaappppppppssssSSSSttttaaaarrrrttttTTTTiiiimmmmeeee, aaaappppppppssssEEEEnnnnddddTTTTiiiimmmmeeee, aaaappppppppssssIIIInnnn----
     ccccrrrreeeemmmmeeeennnntttt, and the like (see above).  The  relative  positions
     of  these  are  hard-coded  and  so  cannot be changed using
     resources.

     Xkal provides three menuButtons on the main  window,  called
     ffffiiiilllleeeeBBBBuuuuttttttttoooonnnn, vvvviiiieeeewwwwBBBBuuuuttttttttoooonnnn, and ooootttthhhheeeerrrrBBBBuuuuttttttttoooonnnn.  They are all chil-
     dren of  bbbbooootttthhhhFFFFoooorrrrmmmm.   Since  aaaallllllllMMMMoooonnnntttthhhhssssFFFFoooorrrrmmmm  and  ddddaaaayyyyFFFFoooorrrrmmmm  (if
     bbbbooootttthhhhSSSShhhhoooowwwwnnnn  is  True) are also children of bbbbooootttthhhhFFFFoooorrrrmmmm, the but-
     tons can be placed arbitrarily in the tool. The  correspond-
     ing  ezMenu widgets ffffiiiilllleeeeMMMMeeeennnnuuuu, vvvviiiieeeewwwwMMMMeeeennnnuuuu, and ooootttthhhheeeerrrrMMMMeeeennnnuuuu can be
     customized  to  provide  other  actions  if   desired   (see
     eeeezzzzMMMMeeeennnnuuuu(3)).

     When the xxxxkkkkaaaallll----eeeeddddiiiitttt----aaaappppppppooooiiiinnnntttt(((()))) action is invoked  (by  default
     by  double-clicking on a reminder or its label), a window is
     popped up to allow the selected reminder to be edited.  This
     widget hierarchy is:

             TopLevelShell editShell
                 Form editForm
                     Command applyButton
                     Command revertButton
                     Command deleteButton
                     Command dismissButton
                     Label,Text dow{Label,Text}
                     Label,Text day{Label,Text}
                     Label,Text mon{Label,Text}
                     Label,Text year{Label,Text}
                     Label,Text time{Label,Text}
                     Label,Text level{Label,Text}




U of Rochester        Last change: 26/10/90                     8






XKAL(1)                  USER COMMANDS                    XKAL(1)



     Clicking  on  the  applyButton  adds  the  appointment,  the
     revertButton  resets  the  text  items but does NOT undo the
     effects of previous "apply"s, the deleteButton  deletes  any
     reminders  matching  the  given information exactly, and the
     dismissButton pops down the window.  The  effects  of  these
     buttons  can be bound to different events using the nnnnoooottttiiiiffffyyyy(((())))
     action.

     When the xxxxkkkkaaaallll----eeeeddddiiiitttt----ddddeeeeffffaaaauuuullllttttssss(((()))) action is invoked (by  default
     by  selecting "Edit defaults" from the Other menu), a window
     is popped up to allow some of the application defaults to be
     edited. This widget hierarchy is:

             TopLevelShell defaultsShell
                 Form defaultsForm
                     Command applyButton
                     Command revertButton
                     Command dismissButton
                     Label,Text personalAppoints{Label,Text}
                     Label,Text backupExtension{Label,Text}
                     Label,Text date{Label,Text}
                     Label,Text numMonths{Label,Text}
                     Label,Text checkpointInterval{Label,Text}
                     Label,Text rearrangeSilently{Label,Text}
                     Label,Text defaultLevel{Label,Text}
                     Label,Text levelDelim{Label,Text}

     Clicking on the applyButton sets  the  application  defaults
     from  the  appropriately  labelled  item,  the  revertButton
     resets the text items but does NOT undo the effects of  pre-
     vious  "apply"s, and the dismissButton pops down the window.
     The effects of these  buttons  can  be  bound  to  different
     events  using the nnnnoooottttiiiiffffyyyy(((()))) action. There is unfortunately no
     way to save defaults edited in this way; you have to  modify
     the resource file yourself.


TTTTrrrraaaannnnssssllllaaaattttiiiioooonnnn AAAAccccttttiiiioooonnnnssss
     The following action procedures are registered for xkal  and
     can  be  bound  to  widget  events  using  the  ttttrrrraaaannnnssssllllaaaattttiiiioooonnnnssss
     resource (see the Xt manual, Appendix  C).  Certain  actions
     are  hard-coded to widgets (for example, setting the dayForm
     when a dayButton is clicked on) since they are so  essential
     to  correct behaviour. They can be bound to different events
     using the nnnnoooottttiiiiffffyyyy(((()))) action.

     xxxxkkkkaaaallll----qqqquuuuiiiitttt(((())))
          Update the appointments file,  destroy  the  tool,  and
          exit  with  status  0.  By default this is performed by
          selecting QQQQuuuuiiiitttt from the File menu, or typing `q'  in  a
          dayButton.




U of Rochester        Last change: 26/10/90                     9






XKAL(1)                  USER COMMANDS                    XKAL(1)



     xxxxkkkkaaaallll----eeeexxxxiiiitttt(((())))
          Destroy the tool and exit without saving any changes to
          the  appointments  file.  By  default  this is bound to
          selecting EEEExxxxiiiitttt from the File menu, and to  `x'  in  the
          dayButtons.

     xxxxkkkkaaaallll----ssssaaaavvvveeee(((())))
          Updates the appointments file, saving any  changes.  By
          default,  this is invoked by the SSSSaaaavvvveeee entry of the File
          menu, or by typing `s'. See also the  resources  bbbbaaaacccckkkkuuuu----
          ppppEEEExxxxtttteeeennnnssssiiiioooonnnn and cccchhhheeeecccckkkkppppooooiiiinnnnttttIIIInnnntttteeeerrrrvvvvaaaallll.

     xxxxkkkkaaaallll----nnnneeeexxxxtttt(((())))
          If nnnnuuuummmmMMMMoooonnnntttthhhhssss is 1 or 3, this action will move the month
          display  ahead  to the next month.  If nnnnuuuummmmMMMMoooonnnntttthhhhssss is 12,
          it will move to the next year. By default this is  pro-
          vided  by the NNNNeeeexxxxtttt entry of the View menu, or by typing
          `n' in the dayButtons.

     xxxxkkkkaaaallll----pppprrrreeeevvvv(((())))
          Like above, but  moves  back  one  month  or  year.  By
          default  this is provided by the PPPPrrrreeeevvvv entry of the View
          menu, and by typing `p'.

     xxxxkkkkaaaallll----ttttooooddddaaaayyyy(((())))
          Selects the current date. Note that this can be altered
          by the ----ddddaaaatttteeee flag or set using the defaults editor.  By
          default this is available from the View menu or by typ-
          ing  `t'.   Note  that  if xkal's notion of the current
          date comes form the system (ie.  was not given  by  the
          ddddaaaatttteeee  resource) then it will recheck the current system
          date whenever this action is invoked, in  case  it  has
          been running for a long time.

     xxxxkkkkaaaallll----nnnnuuuummmmMMMMoooonnnntttthhhhssss((((num))))
          Set the month display to 1, 3, or 12, depending on  the
          value  of  `num'.   This  is provided by default by the
          three appropriately entries of the View  menu,  and  by
          typing  `1',  `3',  and  `12'  (ie.  `1' then `2' "fast
          enough") respectively.

     xxxxkkkkaaaallll----eeeeddddiiiitttt----aaaappppppppooooiiiinnnntttt(((())))
          This action should be bound to either  an  appointLabel
          or  an appointText widget. It pops up the reminder edi-
          tor (if it is not already up) and sets the  text  items
          in it from the current appointment. See the description
          of its widget hierarchy above for details  of  how  the
          editor  works.  By  default  this  is  bound to double-
          clicking on an appointLabel or appointText.

     xxxxkkkkaaaallll----eeeeddddiiiitttt----ddddeeeeffffaaaauuuullllttttssss(((())))
          Pops up the defaults editor (if it is not already  up).



U of Rochester        Last change: 26/10/90                    10






XKAL(1)                  USER COMMANDS                    XKAL(1)



          See  the  description of its widget hierarchy above for
          details of how the editor works.  By  default  this  is
          available  from  the  Other  menu or by typing `e' in a
          dayButton.

     xxxxkkkkaaaallll----ssssyyyysssstttteeeemmmm((((cmd))))
          This action provides a general  escape  mechanism.  The
          argument  will  be  passed  to  the shell for execution
          using ssssyyyysssstttteeeemmmm(3).  You might use this, for  example,  to
          automatically  run  a filter over your appointment file
          every time it is saved. To do this, replace any  trans-
          lations using xxxxkkkkaaaallll----ssssaaaavvvveeee(((()))) with

                     xxxxkkkkaaaallll----ssssaaaavvvveeee(((()))),xxxxkkkkaaaallll----ssssyyyysssstttteeeemmmm((((script))))....

          You could also provide additional escapes on the  Other
          menu,  or  even  pop  up  an xterm to do something more
          long-lived. By default, the Other  menu's  "Help"  item
          pops up an xterm with this man page using this action.

FFFFIIIILLLLEEEE FFFFOOOORRRRMMMMAAAATTTT
     Xkal understands almost any kind of date in its  appointment
     files.   Reminders  consist  of  the  date,  time, and level
     specifiers, followed by the text of the reminder,  one  rem-
     inder  per  line.  Fields should be separated by whitespace.
     Leading whitespace and lines beginning with `#' are  ignored
     with the exception that is a line is of the form

             #include filename

     then xkal reads the specified file (no quotes  or  brackets,
     filename taken to end-of-line) at that point.

     The following specifiers are understood;  the  text  of  the
     reminder is assumed to start when none of these apply (so be
     careful about reminders that start  with  numbers).  In  the
     following table `#' indicates a string of digits:

             #:#     =       hours:mins (24hr)
             #:#     =       hours:mins (24hr)
             #:#am   =       hours:mins
             #:#pm   =       hours+12:mins
             #/#     =       month/day (depends on ddddaaaayyyySSSSllllaaaasssshhhhMMMMoooonnnntttthhhh)
             #/#/#   =       month/day/year ("   "        "     )
             #am     =       hours
             #pm     =       hours (+12)
             # <= 31 =       day
             # > 31  =       year
             @#@     =       level (depends on lllleeeevvvveeeellllDDDDeeeelllliiiimmmm)

     In addition, either long or short forms of the days  of  the
     week  or  of  the months are understood (see lllloooonnnnggggDDDDoooowwwwSSSSttttrrrriiiinnnnggggssss,



U of Rochester        Last change: 26/10/90                    11






XKAL(1)                  USER COMMANDS                    XKAL(1)



     etc.).

     Any of the fields can be omitted from a reminder's date. The
     decision  as  to  whether a reminder applies to a particular
     day is made using the following (hopefully intuitive)  algo-
     rithm:

     -    If no time is given for the reminder, then it is  taken
          to belong in the Notes section.

     -    If the reminder does not specify a  day  of  the  week,
          then the day, month, and year must match if given, oth-
          erwise they are assumed to match. For example:
                  25 Dec Christmas of every year
                  Nov 13 1991 My 26th birthday
                  Mar Every day in March
                  1 The first day of every month

     -    If the reminder specifies a day of the week but no day,
          the  the  day  of  the week of the day in question must
          match, and the month and year must match if given.  For
          example:
                  Wed 11:00 My weekly Wednesday meeting
                  Fri Mar 1991 Every Friday in March, 1991

     -    If both a day of the week and a day are given, then the
          interpretation  is  "the  first  day  of the week on or
          after the given day". For example (assuming the  actual
          calendar):
                  Wed 1 February 1991 This matches Feb 6, 1991
                  Fri 14 1991 Matches Jan 18, Feb 15, Mar 15, ...

     Although this is not totally flexible, it is hoped  that  it
     will cover the vast majority of cases efficiently (since the
     algorithm must be performed often during execution).


DDDDAAAATTTTEEEE FFFFOOOORRRRMMMMAAAATTTT
     When using the ddddaaaatttteeee resource to change xkal's notion of  the
     current  date,  the  value  of the resource can be either an
     absolute or a relative date, as follows.

     -    A relative date begins with either `+' or `-'  followed
          by   any   amount  of  `number'`specifer'  pairs  where
          `specifier' is one of `d', `m', or `y' indicating days,
          months, and years respectively.  Xkal's current date is
          set to the current system date offset by  the  relative
          date. For example:

                  % xkal -listOnly -date +1d

          would list tomorrow's reminders, and



U of Rochester        Last change: 26/10/90                    12






XKAL(1)                  USER COMMANDS                    XKAL(1)



                  % xkal -date +1d1y

          would start interaction at the day one year from tomor-
          row. If a number without a specifier terminates a date,
          the specifier is taken to be `d' (so `+1' is  the  same
          as `+1d').

     -    An absolute date is specified by giving any of the day,
          month,  or  year desired, using the same formats as for
          appointment files (see above).  Note  that  years  less
          than  1900  have no meaning in UNIX and years less than
          1970 will confuse the system time routines. Thus

                  % xkal -date 25Dec  and  % xkal -date Dec25

          specify Christmas of the current year,

                  % xkal -date 'Dec 1925'

          specifies today's day in December of 1925, and

                  % xkal -date 25Dec1925

          specifies Christmas Day, 1925.  Note  that  spaces  are
          allowed  within  a  date  but  must be escaped from the
          shell if given on the command line.

EEEENNNNVVVVIIIIRRRROOOONNNNMMMMEEEENNNNTTTT
     XAPPLRESDIR     - Directory containing xkal resource file

FFFFIIIILLLLEEEESSSS
     ~/.appoints             - default appointment file
     $LIBDIR/xkal.appoints   - default system appintment file
     $XAPPLRESDIR/Xkal       - default xkal resource file

DDDDIIIIAAAAGGGGNNNNOOOOSSSSTTTTIIIICCCCSSSS
     Xkal  complains  about  incorrectly   formatted   appoinment
     entries,  specifying  the exact location of the error. These
     messages go to stderr.

     Other error messages will either result in popup windows  or
     messages to standard error.

SSSSEEEEEEEE AAAALLLLSSSSOOOO
     X(1), kal(1), cal(1), calend(1), calendar(1).

BBBBUUUUGGGGSSSS
     Xkal will not think the appointments have changed  unless  a
     key  has  been  pressed  in  one of the appointText widgets.
     Thus, pasting a selection into one of these will  work,  but
     you will have to hit a key (eg. Return) before attempting to
     save or switch days.



U of Rochester        Last change: 26/10/90                    13






XKAL(1)                  USER COMMANDS                    XKAL(1)



     When invoked in one of the non-interactive modes,  a  custom
     resource  parser  is  used to avoid opening an X connection.
     This parser does not understand the "-xrm" resource  specif-
     iers.  This  should  not  be  a  problem since all resources
     relevant to these modes can be specified with  command  line
     options instead.

AAAAUUUUTTTTHHHHOOOORRRR
     George Ferguson, University of Rochester
     (ferguson@cs.rochester.edu)













































U of Rochester        Last change: 26/10/90                    14



