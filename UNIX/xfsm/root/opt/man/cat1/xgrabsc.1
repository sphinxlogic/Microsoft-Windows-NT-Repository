


XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



NNNNAAAAMMMMEEEE
     xgrabsc - grab rectangular screen images and store in files

SSSSYYYYNNNNOOOOPPPPSSSSIIIISSSS
     _x_g_r_a_b_s_c    [----dddd _d_i_s_p_l_a_y]    [----iiiidddd _w_i_n_d_o_w_I_d]    [----oooo _o_u_t_p_u_t_F_i_l_e]
             [----ssss _s_e_c_o_n_d_s]       [----ppppoooosssstttt _s_e_c_o_n_d_s]      [----bbbb _p_e_r_c_e_n_t]
             [----aaaannnndddd _a_n_d_B_i_t_s]   [----oooorrrr _o_r_B_i_t_s]   [----ppppaaaaggggeeee _w_i_d_t_h_x_h_e_i_g_h_t-
             _h_m_a_r_g-_v_m_a_r_g]  [----bbbbeeeellllllll  ----ggggrrrraaaabbbb  ----vvvveeeerrrrbbbboooosssseeee  ----bbbbddddrrrrssss ----nnnnoooobbbbddddrrrrssss
             ----kkkkeeeeyyyy ----ssssttttrrrreeeettttcccchhhh ----rrrrooooooootttt ----cccclllliiiicccckkkk
             ----rrrreeeevvvveeeerrrrsssseeee ----bbbbwwww ----mmmmddddiiiitttthhhheeeerrrr ----ddddiiiitttthhhheeeerrrr ----hhhhaaaallllffffttttoooonnnneeee
             ----ppppssss ----ccccppppssss ----ssssiiiimmmmpppplllleeee ----xxxxwwwwdddd ----bbbbmmmm ----bbbbmmmm2222 ----bbbbmmmm3333 ----ppppuuuuzzzzzzzzlllleeee
             ----bbbbiiiinnnn ----ccccoooommmmpppp  ----eeeeppppssss  ----llll  ----lllliiiimmmmiiiitttt  ----pppprrrreeeevvvviiiieeeewwww  ----pppprrrreeeevvvv  ----pppprrrreeee----
             vvvviiiieeeewwwwoooonnnnllllyyyy ----ccccoooollllpppprrrroooocccc]

DDDDEEEESSSSCCCCRRRRIIIIPPPPTTTTIIIIOOOONNNN
     _x_g_r_a_b_s_c lets you grab arbitrary rectangular images from an X
     server  and  writes  them to standard output in a variety of
     formats.

     Command line options  also  allow  reduction  of  colormaps,
     halftoning and dithering of color images, and direct mapping
     of color images to monochrome.

     Options must be seperated with spaces or tabs.  They may  be
     preceded  with  a  dash,  but this optional and provided for
     Un*x addicts.  Many may also be prefixed with  'no',  or  an
     additional dash, to turn them off.

     The default output  format  is  gray-scale  non-encapsulated
     Postscript,  with  image  compression  (if image compression
     significantly reduces the amount of output).

     If you desire an output format not produced by xgrabsc,  try
     using the PBM package by Jef Poskanzer to convert xgrabsc to
     that format.  PBM can read xgrabsc's XWD output and  convert
     it to a lot of different formats.

GGGGEEEENNNNEEEERRRRAAAALLLL OOOOPPPPTTTTIIIIOOOONNNNSSSS
     -d _d_i_s_p_l_a_y_N_a_m_e or -display _d_i_s_p_l_a_y_N_a_m_e
             Use an alternate display.  If no display  is  speci-
             fied  on  the  command  line,  xgrabsc looks for the
             environment variable DISPLAY for  the  name  of  the
             display and screen to grab from.  Note that you must
             have permission to access  the  display  on  another
             computer.

     -bell   The display's bell is normally rung while the screen
             is  being  accessed.   This turns the bell on or off
             (-_n_o_b_e_l_l will turn it _o_f_f).

     -grab   Enable server grabs.  Normally xgrabsc  will  "grab"
             the  server  so  that  the  screen is frozen while a



AT&T Bell Laboratories    Last change:                          1






XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



             rectangle is selected and the  image  is  extracted.
             If  the  screen  is  not  frozen, rubber-banding may
             cause video droppings on portions of the screen that
             are changing.  Use -_n_o_g_r_a_b to turn off server grabs.

     -o _o_u_t_p_u_t-_f_i_l_e or -output _o_u_t_p_u_t-_f_i_l_e
             Write output to _o_u_t_p_u_t-_f_i_l_e instead of standard out-
             put.   The  output-file  name,  minus  directory and
             extension, is used as  the  internal  name  for  the
             image    in    formats   supporting   image   names.
             Postscript, xwd, pixmap and bitmap formats all  sup-
             port image names.

     -s _s_e_c_o_n_d_s or -sleep _s_e_c_o_n_d_s
             Sleep for _s_e_c_o_n_d_s seconds before  commencing  opera-
             tion.   This should be used if you need some time to
             get the target image ready.

     -post _s_e_c_o_n_d_s
             Sleep for  _s_e_c_o_n_d_s  seconds  after  window/rectangle
             selection.   This  is  commonly used to pop up menus
             after a window has been selected but before  xgrabsc
             takes its snapshot.

     -verbose
             Display processing  information  on  standard  error
             output (stderr).




SSSSEEEELLLLEEEECCCCTTTTIIIIOOOONNNN OOOOPPPPTTTTIIIIOOOONNNNSSSS
     -id _w_i_n_d_o_w _I_D
          Dump the window with the given ID.

     -key Select the window under the mouse when the Control  key
          is  pressed.   This  option is normally used in getting
          images of menus.  Pop up the menu, optionally move  the
          pointer  to  the window containing the menu, and strike
          the Control key to begin the dump.

     -root
          Dump the entire screen (root window).

     -stretch
          Use rubber-band rectangle to  select  region  to  grab.
          This is the default.

     -click
          Wait for a click on a window and dump the selected win-
          dow.




AT&T Bell Laboratories    Last change:                          2






XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



IIIIMMMMAAAAGGGGEEEE PPPPRRRROOOOCCCCEEEESSSSSSSSIIIINNNNGGGG OOOOPPPPTTTTIIIIOOOONNNNSSSS
     -nobdrs or -noborders
          Remove window-manager borders from window images.  This
          option  applies  only  to selection by ID (-_i_d) or xwd-
          style selection (-_c_l_i_c_k).

     -bdrs or -borders
          Include window-manager borders in window images.   This
          option  applies  only  to selection by ID (-_i_d) or xwd-
          style selection (-_c_l_i_c_k).  Use -_n_o_b_d_r_s or -_n_o_b_o_r_d_e_r_s to
          turn it off.

     -b _p_e_r_c_e_n_t or -brighten _p_e_r_c_e_n_t
          brighten or darken the image by  _p_e_r_c_e_n_t.   Percentages
          are  given  as  integers.  100 is the base and a larger
          number will brighten the image while a  smaller  number
          will darken the image.

     -and _a_n_d_B_i_t_s
          Clear all colormap bits up to the  given  plane.   This
          has  the  effect  of  darkening  the image somewhat and
          shrinking the apparent depth of the image (and,  conse-
          quently,  the size of the color table).  _A_n_d_B_i_t_s should
          be in the range [1-8] inclusive.

     -or _o_r_B_i_t_s
          Set all colormap bits up  to  the  given  plane.   This
          brightens  the  image  somewhat  and  also  shrinks the
          apparent depth of the image.  When both -A and  -O  are
          specified, ANDing will occur before ORing.

     -reverse
          Reverse the colors in the  image.   The  bits  of  each
          color used in the image are inverted.

     -bw  Convert the source color image to a monochrome  bitmap.
          All  colors  falling  below the average color intensity
          are mapped to black.  Others are mapped to white.

     -halftone
          Convert the source color image to a halftoned monchrome
          bitmap.   Resolution  is  maintained  by increasing the
          size of the image by a factor of four on both axes.

     -mdither
          Convert the source color image to a dithered monochrome
          bitmap.   This  is  like  halftoning, but resolution is
          sacrificed to keep the resulting image the same size as
          the original.  The matrix dithering algorithm used with
          this option is  most  suitable  for  line-drawings  and
          text.   For more complex graphics the -_d_i_t_h_e_r option is
          recommended.



AT&T Bell Laboratories    Last change:                          3






XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



     -dither
          Convert the source color image to a dithered monochrome
          bitmap with the Floyd-Steinberg algorithm.

     -nodither
          Turns off any dithering.   Use  this  if  your  XXXXGGGGRRRRAAAABBBBSSSSCCCC
          environment  variable  specifies dithering and you want
          to override it to produce an undithered image.




OOOOUUUUTTTTPPPPUUUUTTTT FFFFOOOORRRRMMMMAAAATTTT OOOOPPPPTTTTIIIIOOOONNNNSSSS
     -cps Write output in _P_o_s_t_s_c_r_i_p_t format using the  colorimage
          operator   for  color  printers.   Color  to  grayscale
          conversion is bundled into the output so you can  actu-
          ally  use  either  color or cheaper grayscale printers.
          For monochrome displays, the -_p_s option will give  more
          compact output.

     -ps  Write  output  in  _P_o_s_t_s_c_r_i_p_t  format   for   greyscale
          printers.   The number of bits per Postscript sample is
          determined by the depth of the image.

     -xwd Write output in _x_w_d format.  Use this if  you  want  to
          convert to another output format with PPPPbbbbmmmm++++.

     -bm  Write the output in X Bitmap format  if  the  image  is
          black  and  white,  or  X Pixmap format if the image is
          gray or color.

     -bm2 Write the output in X Bitmap format  if  the  image  is
          black  and  white, or X Pixmap format 2 if the image is
          gray or color.  -bm3 Write the output in X Bitmap  for-
          mat if the image is black and white, or X Pixmap format
          3 if the image is gray or color.

     -puzzle
          Write output in a format suitable for loading into  the
          _p_u_z_z_l_e program (see example below).



PPPPOOOOSSSSTTTTSSSSCCCCRRRRIIIIPPPPTTTT OOOOPPPPTTTTIIIIOOOONNNNSSSS
     -compress
          Enable or suppress Postscript image  run-length  encod-
          ing.   Postscript  output  is  normally  compressed  to
          minimize the size of output.   If  your  printer  can't
          handle compressed output, you should use -_n_o_c_o_m_p_r_e_s_s to
          turn off compression.

     -eps Create  Encapsulated  Postscript  output,  rather  than



AT&T Bell Laboratories    Last change:                          4






XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



          normal  stand-alone  Postscript.  This adds EPSF header
          comments and removes all scaling and translation of the
          image.

     -l or -landscape
          Use  landscape  layout  (with  page  width  and  height
          exchanged)  for  Postscript  output.   This  option  is
          ignored if Encapsulated Postscript output is requested.
          Width  and  height  may  be  specified  with  the -page
          option.

     -bin Write Postscript output in  binary  rather  than  using
          hexidecimal encoding.  This causes the image portion of
          the output  to  use  half  as  much  space,  decreasing
          transmission  time  to  the printer.  Note that not all
          print spoolers can handle 8 bit binary  data,  so  this
          may not work on your system!

     -limit
          For Postscript output, check printer memory  availabil-
          ity  before  attempting  to print an image (the code to
          perform the checks is integrated  into  the  output  of
          xgrabsc).    This   is   turned   off  if  Encapsulated
          Postscript output is requested,  and  may  be  disabled
          completely  when  building the xgrabsc program.  On the
          command line it may be turned off with -_n_o_l_i_m_i_t.

     -preview or -prev
          Selects Encapsulated Postscript  output  with  an  EPSI
          preview  image  in  its  header.   The preview image is
          dithered to black and white.  Programs such as xfig can
          display  these  preview  images.  Ghostscript and other
          Postscript interpreters can  be  used  to  preview  EPS
          files without generating preview images, so if you have
          one of these packages there is not much point in  using
          this option.

     -previewonly
          Like -_p_r_e_v_i_e_w but writes only the preview portion,  not
          the postscript image.  This may be used to add the pre-
          view to an existing EPS file after having displayed  it
          using a PostScript interpreter.

     -page _w_i_d_t_h_x_h_e_i_g_h_t-_m_a_r_g_i_n_W_i_d_t_h-_m_a_r_g_i_n_H_e_i_g_h_t
          Sets the size of the paper and the borders  you  desire
          around  the edge of the paper.  Xgrabsc will reduce the
          image if necessary to keep it within  the  borders  you
          specify.   The  default  page  size and margins are set
          when xgrabsc is  built.   Measurements  are  in  inches
          (e.g., 8.5x11.0-0.5-0.5)





AT&T Bell Laboratories    Last change:                          5






XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



PPPPRRRROOOOCCCCEEEESSSSSSSSIIIINNNNGGGG OOOORRRRDDDDEEEERRRR
     It is helpful to know the order of processing when  multiple
     processing options are given on the command line.

     Processing is done in five phases:  1)  set  up,  2)  obtain
     image,  3)  process colors, 4) poly->monochrome conversions,
     and 5) output conversion.

     The set-up phase includes processing  command-line  options,
     sleeping,  connecting to X-Windows, freezing the screen, and
     grabbing the mouse if necessary.

     If the mouse is grabbed for rubber-banding,  an  upper-left-
     corner  cursor  is  displayed until the left mouse button is
     pressed.  A lower-left-corner cursor is then displayed while
     drawing   rubber-rectangles   until   the  mouse  button  is
     released.

     If the mouse is grabbed for xwd-style window  selection,  an
     xwd-style cursor is displayed until the left mouse button is
     pressed.

     The mouse is then released.

     The bell is then run  and  the  image  is  pulled  from  the
     screen.

     Following the image-grab, the bell  is  run  twice  and  the
     screen is released.

     If the image is not monochrome, the color manipulation func-
     tions are then applied in this order: brighten, AND, and OR,
     reverse.

     Only one polychrome to monochrome conversion is allowed.  If
     none  of  these  is  chosen, the color table of a polychrome
     image is compressed in preparation for output conversion.

     The output stream is then opened and the image is written in
     the selected output format.



EEEENNNNVVVVIIIIRRRROOOONNNNMMMMEEEENNNNTTTT
     XGRABSC - specifies command line arguments to  be  processed
     before those actually entered on the command line.

     DISPLAY - specifies the name of  the  display  that  xgrabsc
     should grab from.






AT&T Bell Laboratories    Last change:                          6






XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



EEEEXXXXAAAAMMMMPPPPLLLLEEEESSSS
     The simplest form of use, giving Postscript output, is

          xgrabsc >outfile.ps


     To write  output  in  _P_o_s_t_s_c_r_i_p_t  format  and  send  to  the
     printer, use

          xgrabsc | lpr

     It is sometimes helpful to brighten an image somewhat before
     it is formatted for Postscript output.  E.g., to brighten by
     30%

          xgrabsc -b 130 | lpr


     If your printer supports color, and your display  is  color,
     you  can  have xgrabsc generate color output instead of gray
     scale:

          xgrabsc -cps | lpr


     The default Postscript output attempts to scale the image so
     that  it  will  all  fit on one page, and is centered on the
     page.  If you are grabbing images to include  in  documents,
     such  as  with  FrameMaker,  you should ask for Encapsulated
     Postscript output with the -_e_p_s switch.  For example:

            xgrabsc -eps -o image1.eps

     To select an entire window, write output  in  _p_u_z_z_l_e  format
     and read into the puzzle program, use the commands

          xgrabsc -click -puzzle >outfile.pzl
          puzzle -picture outfile.pzl


     To have xgrabsc  sleep  for  three  seconds  before  rubber-
     banding, display processing information, and have the result
     displayed with xwud,

          xgrabsc -xwd -verbose -s 3 | xwud


     To grab an image from another server  and  then  reduce  the
     colormap to three bits by ANDing, use

          xgrabsc -d other:0.0 -and 5 -bm >outfile.xpm




AT&T Bell Laboratories    Last change:                          7






XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



     You will, of course, have to go  to  the  other  machine  to
     select the image with that machine's mouse.



LLLLIIIIMMMMIIIITTTTAAAATTTTIIIIOOOONNNNSSSS
     Colormaps larger than 256 entries  are  not  currently  sup-
     ported. This means that it won't work with your fancy 24-bit
     display.

     The default screen visual is used  as  the  visual  for  the
     image.   Visuals are associated with particular windows, and
     xgrabsc pretends ignorance about any windows but the root.

     This software has been tested with  StaticGray  and  8-plane
     PseudoColor  on  DECStations  (using  both  UWS  2.2 and X11
     Release 4).  It has also  been  tested  with  8-plane  Pseu-
     doColor  on  Sun  SparcStations  and various other platforms
     using X11 Release 4 and Release 5.

     X11 Pixmap format is rather verbose.  You may  want  to  run
     large  images  through  the  _c_o_m_p_r_e_s_s utility before storing
     them in a file.  E.g.,

          xgrabsc -bm | compress >outfile.xpm.Z


AAAAUUUUTTTTHHHHOOOORRRR
          Bruce Schuchardt
         Servio Corporation
           bruce@slc.com



AAAACCCCKKKKNNNNOOOOWWWWLLLLEEEEGGGGEEEEMMMMEEEENNNNTTTTSSSS
     Some of the source code for xgrabsc came from the xloadimage
     project  by  Jim  Frost  (jimf@saber.com) and others.  Jim's
     copyright has been included both  here  and  in  the  source
     code.

     The idea for using run-length encoding for Postscript output
     came  from  the  xwd2ps project by Robert Tatar and Craig A.
     McGowan, as did the colorimage hack for  monochrome  display
     devices.

     The ad2c.sed script that makes it possible to  let  you  run
     xgrab  without installing XGrab.ad everywhere is part of the
     ad2c package developed by George Ferguson.







AT&T Bell Laboratories    Last change:                          8






XGRABSC(1X)       MISC. REFERENCE MANUAL PAGES        XGRABSC(1X)



CCCCOOOONNNNTTTTRRRRIIIIBBBBUUUUTTTTOOOORRRRSSSS
     Johan Garpendal did the initial color postscript work.

     Hal R. Brand wrote the binary Postscript enhancements.

     Yves Arrouye wrote the EPS  Preview  and  page-configuration
     enhancements.



CCCCOOOOPPPPYYYYRRRRIIIIGGGGHHHHTTTT
     Copyright (c) 1990-92 Bruce Schuchardt

     _X_g_r_a_b_s_c is copywritten material with a very loose  copyright
     allowing  unlimited  modification  and  distribution  if the
     copyright notices are left  intact.   Various  portions  are
     copywritten by various people, but all use a modification of
     the MIT copyright notice.  Please check the  cpyright.h  for
     complete  copyright  information.  The intent is to keep the
     source free, not to stifle its distribution, so please write
     to me if you have any questions.

     THE AUTHOR DISCLAIMS ALL  WARRANTIES  WITH  REGARD  TO  THIS
     SOFTWARE,  INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABIL-
     ITY AND FITNESS, IN NO EVENT SHALL THE AUTHOR BE LIABLE  FOR
     ANY  SPECIAL,  INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAM-
     AGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
     WHETHER  IN  AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TOR-
     TIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH  THE  USE
     OR PERFORMANCE OF THIS SOFTWARE.

SSSSEEEEEEEE AAAALLLLSSSSOOOO
     X(1X),    xhost(1),    xwd(1X),    xwud(1X),     xwd2ps(1X),
     xloadimage(1X),  xpm(1X),  xpr(1X), puzzle(1X), compress(1),
     uncompress(1), xv(1X)




















AT&T Bell Laboratories    Last change:                          9



