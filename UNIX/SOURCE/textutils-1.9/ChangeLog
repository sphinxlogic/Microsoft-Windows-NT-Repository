Sun Nov 07 00:50:05 1993  Jim Meyering  (meyering@comco.com)

	* Version 1.9.

Sat Nov 06 22:51:31 1993  Jim Meyering  (meyering@comco.com)

	* cut.c (cut_fields): Revert July 27 change.  Instead, strip off
	trailing delimiter unless given a range of fields like `3-' that
	extends to end of line.
	(set_fields): Moved local `eol_range_start' to file-scope.
	Reported by Arne H. Juul (arnej@solan.unit.no).

Tue Nov 02 00:53:41 1993  Jim Meyering  (meyering@comco.com)

	* fold.c (fold_file): Don't get stuck in an endless loop when
	width is smaller than 8 and there are TABs in the input.

Sat Oct 30 15:31:28 1993  Jim Meyering  (meyering@comco.com)

	* join.c: Remove now-unused dcls of show_help and show_version.

Fri Oct 29 13:58:50 1993  Jim Meyering  (meyering@comco.com)

	* csplit.c [INT_MAX]: Make sure it's defined.
	[not HAVE_LIMITS_H]: Don't include limits.h.
	From Kaveh R. Ghazi (ghazi@noc.rutgers.edu).

Wed Oct 27 01:13:52 1993  Jim Meyering  (meyering@comco.com)

	* Version 1.8.1.

Mon Oct 25 20:16:33 1993  Jim Meyering  (meyering@comco.com)

	* sort.c: Accept but ignore -y0 for compatibility with Solaris 2.
	From Chuck Hedrick (hedrick@klinzhai.rutgers.edu).

	* sort.c (main): Handle --help and --version options.
	* Makefile.in (sort.o): Depend on long-options.h.

Sun Oct 24 00:31:02 1993  Jim Meyering  (meyering@comco.com)

	* csplit.c, cut.c, expand.c, fold.c, head.c, nl.c, od.c, paste.c,
	split.c, tac.c, tail.c, unexpand.c, uniq.c: Use the preferred
	`--longopt=arg' syntax in --help message rather than `--longopt arg'.
	From Francois Pinard.

	* tail.c: Don't include <signal.h>.  It hasn't been necessary
	since the Dec 12, 1992 change.

	* join.c (main): Accept `-v 1' again.  Adding the --version
	long option had broken it, although -v1 still worked.  Call
	parse_long_options instead of adding "help" and "version"
	to join's longopt strct.
	* Makefile.in [SOURCES, OBJECTS, DISTFILES]: Add long-options.c
	and long-options.h.
	* (join): Depend on and link with long-options.o.
	* (join.o): Depend on long-options.h.

	* od.c: Change --compatible (-C) to --backward-compatible (-B).

	* csplit.c: Change --abandon-null-files to --elide-empty-files.

Sat Oct 23 01:00:12 1993  Jim Meyering  (meyering@comco.com)

	* tr.c (get_next, string2_extend): Add default: label to switch stmt.

	* cat.c, cksum.c, comm.c, csplit.c, cut.c, expand.c, fold.c, head.c,
	join.c, nl.c, od.c, paste.c, pr.c, split.c, sum.c, tac.c, tail.c,
	tr.c, unexpand.c, uniq.c, wc.c (usage): Add long --help.
	Exit successfully for --help, non-zero for usage error.
	From Francois Pinard.

	* configure.in: Add AC_STAT_MACROS_BROKEN.
	* system.h [AC_STAT_MACROS_BROKEN]: Test it.

Fri Oct 22 23:26:17 1993  Jim Meyering  (meyering@comco.com)

	* linebuffer.c, memchr.c [HAVE_CONFIG_H, CONFIG_BROKETS]: Include
	<config.h> or "config.h".
	* cat.c, cksum.c, comm.c, csplit.c, cut.c, expand.c, fold.c, head.c,
	join.c, nl.c, od.c, paste.c, pr.c, sort.c, split.c, sum.c, tac.c,
	tail.c, tr.c, unexpand.c, uniq.c, version.c, wc.c: Ditto.

	* configure.in: Use AC_CONFIG_HEADER.
	* Makefile.in [DIST]: Add config.h.in.

	* Makefile.in: Convert so make may be run from subdirectories.
	Add dependencies on config.h.
	* src/Makefile.in: Ditto.
	* lib/Makefile.in: Ditto.
	* man/Makefile.in: Ditto.

Wed Oct 20 20:05:48 1993  Jim Meyering  (meyering@comco.com)

	* memchr.c (memchr): Do the 32-bit assignment only if !LONG_64_BITS.
	In the 64-bit assignment, be careful to cast the shift operand to
	long.
	Abort if sizeof (unsigned long) > 8.

Tue Oct 19 22:37:58 1993  Jim Meyering  (meyering@comco.com)

	* csplit.c: Allow repeat counts to be specified via `{*}'.
	New option --suffix=format.  Supercedes --digits option.
	New option --abandon-null-files.
	From Ronald F. Guilmette (rfg@netcom.com).

	* csplit.1: Updated.
	From Ronald F. Guilmette.
	
	* csplit.c: Remove register keyword (replace with `int' in two cases).

	* csplit.c: [MAX]: Macro renamed from max and moved to top of file.
	(bytes_to_octal_digits): New static array.
	(get_format_flags): Combine '+' and ' ' cases of switch stmt.
	Return count if for loop terminates.
	(get_format_width): Use `bytes_to_octal_digits' instead of just 11.
	(get_format_prec): Make sure is_negative is defined before used.
	(get_format_conv_type): Give a different error message if there
	is no conversion specifier.
	Test ISPRINT (ch) instead of `ch < '~' && ch > ' ''.
	(max_out): Use `%%' rather than `%' in format string.

Sat Oct 16 10:45:17 1993  Jim Meyering  (meyering@comco.com)

	* pr.c (main): When argc == 1, don't try to xmalloc (0).

Tue Oct 12 00:53:26 1993  Jim Meyering  (meyering@comco.com)

	* xwrite.c [HAVE_CONFIG_H, CONFIG_BROKETS]: Include <config.h>
	or "config.h".

Sat Oct 09 23:37:43 1993  Jim Meyering  (meyering@comco.com)

	* configure.in: Remove AC_UNISTD_H; add unistd.h to AC_HAVE_HEADERS.

Thu Sep  9 21:52:10 1993  Jim Meyering  (meyering@comco.com)

	* src/*.c: Print version on standard output, not stderr.

	* configure.in: Add AC_LONG_64_BITS.
	* memchr.c: Use #ifdef LONG_64_BITS instead of
	`if (sizeof(longword) > 4)'.

Tue Jul 27 22:19:39 1993  Jim Meyering  (meyering@comco.com)

	* cat.c (cat): Don't fail just because ioctl (d, FIONREAD,... can't
	always handle devices.  Ignore errno == EINVAL and errno == ENODEV.
	`cat -v /dev/null' was failing on many systems.

	* cut.c (cut_fields): Don't strip off trailing delimiter e.g.
	`echo 'a:b:c:' | cut -d: -f3-' should print `c:', not just `c'.
	From William Dowling <will@franklin.com>.

Thu May 27 01:37:51 1993  Jim Meyering  (meyering@comco.com)

	* Version 1.8.

	* memchr.c: De-ansify the fixed version from glibc.
	It is supposed to work on systems with 64-bit long ints.

Mon May 24 00:32:43 1993  Jim Meyering  (meyering@comco.com)

	* Version 1.7.

Sat May 22 02:13:12 1993  Jim Meyering  (meyering@comco.com)

	* Version 1.6.

Fri May 21 22:57:53 1993  Jim Meyering  (meyering@comco.com)

	* pr.c (cols_ready_to_print): New function.  It replaces a global
	variable by the same name and computes on the fly the value that
	was supposed to be maintained through that variable.  This should
	put to rest the `pr -2a' bug.
	(main): Don't let getopt_long reorder arguments so we can
	distinguish between `pr -1 -2' and `pr -12'.  Rework handling of
	-n and +n options.

	* fold.c: Declare xmalloc.

Wed May 19 19:12:18 1993  Karl Berry  (karl@owl.hq.ileaf.com)

	* sort.c (main): fflush before exit, so a closed stdout doesn't lose.

Tue May 18 23:49:26 1993  Jim Meyering (meyering@comco.com)

	* mkinstalldirs: New file.
	* Makefile.in (installdirs): Use it to create installation directories.

Fri May 14 23:45:52 1993  Jim Meyering  (meyering@comco.com)

	* all source: With --version, print version and exit immediately.

Thu May 13 01:03:16 1993  Jim Meyering  (meyering@comco.com)

	* Makefile.in (installdirs): New rules for creating installation
	directories. (install): depend on it.

	* tail.c (main): Remove --compatible since `+1f' may be used
	to get the BSD `-0f' behavior portably.

	* fold.c (main): Turn -N arguments, where N is a digit, into -wN.
	From Ian Lance Taylor (ian@cygnus.com).

Mon May 10 22:33:44 1993  Jim Meyering  (meyering@comco.com)

	* tail.c (main): New option -C, --compatible to make `tail -0f'
	work like `tail +1f' for compatibility with BSD tail.

Thu May  6 23:28:56 1993  Jim Meyering  (meyering@comco.com)

	* pr.c (print_page): Decrement cols_ready_to_print even when
	lines_to_print == 0.  The command `echo |pr -2ta' *still* didn't
	terminate.  Add parentheses for clarity.

Mon May  3 23:57:47 1993  Jim Meyering  (meyering@comco.com)

	* Version 1.5.

	* od.c (main): Remove set-but-not-used variable, `usage_error'.

	* split.c (main): Call usage with an argument.

Sun May  2 16:05:04 1993  Jim Meyering  (meyering@comco.com)

	* configure.in: Reverse if-else branches in AC_TEST_PROGRAM test
	for 8-bit clean memcmp.

	* cat.c (usage, main): Remove unused argument.

	* csplit.c (remove_line): Remove set-but-not-used variable, `line_got.'
	(check_for_offset): Remove unused argument `argnum.'

	* configure.in: Add AC_SIZE_T.

Sat May  1 09:03:19 1993  Jim Meyering  (meyering@comco.com)

	* uniq.c (main): Interpret non-option arguments with a leading `+'
	only if we haven't seen `--'.

	* tr.c (main): Change variable name to avoid shadowed dcl.
	* wc.c (write_counts): Ditto.

	* sum.1: Make documentation agree with the code.

	* od.c: Depend only on HAVE_LONG_DOUBLE for long double support.

Fri Apr 30 20:16:03 1993  Jim Meyering  (meyering@comco.com)

	* configure.in [AC_HAVE_HEADERS]: Add limits.h.

	* configure.in [CFLAGS, LDFLAGS]: Assign reasonable defaults.

	* od.c (parse_old_offset): Don't use prototype in function
	definition.  Remove unnecessary conjunct from test for hexadecimal
	prefix.

	* od.c: Depend on __GNUC__ || HAVE_LONG_DOUBLE rather than __STDC__
	for long double support;  there are compilers (Stardent Vistra svr4)
	without long double but still define __STDC__.

Thu Apr 29 02:01:27 1993  Jim Meyering  (meyering@comco.com)

	* src/*.c and man/*.c except for sort: Add --help and --version
	options.

	* pr.c: Convert to use getopt_long.

	* lib/memcmp.c: Use version from glibc.
	[WORDS_BIGENDIAN]: Test this instead of the using glibc's
	__BYTE_ORDER macro.
	* configure.in: Use AC_WORDS_BIGENDIAN to set it.

	* od.c (parse_old_offset): Allow `0X' as well as `0x' prefix to
	indicate hex.

	* Makefile.in (dist): Depend on Makefile so that changes to
	Makefile.in (like adding new files to DISTRIB) are reflected
	in the new distribution.

Fri Apr 23 21:53:47 1993  Jim Meyering  (meyering@comco.com)

	* {lib,src}/Makefile.in [.c.o]: Make CPPFLAGS and CFLAGS follow
	other options so users can use them to override DEFS.
	* src/Makefile.in [.c.o]: Add -I$(srcdir) for version.h.

	* Makefile.in [CFLAGS, LDFLAGS]: Don't set to -g explicitely;
	configure's AC_SUBST will set these.

	* Makefile.in [Makefile]: Add dependencies and a rule to remake it.
	[targets that cd then run make in subdirectories]: Don't depend
	on `cd ..';  use a subshell instead.

	* Makefile.in [info, install-info, dvi, check, installcheck]:
	New targets but no rules; comply with standards.

	* configure.in [CFLAGS]: Default to -g -O if CC is gcc and the user
	hasn't specified CFLAGS.
	[LDFLAGS]: Substitute into Makefile.

Tue Mar 30 21:36:11 1993  Jim Meyering  (meyering@comco.com)

	* od.c: New option --compatible, -C.
	(parse_old_offset): New function.
	* od.1: Document new option.

Mon Mar 29 21:27:56 1993  Jim Meyering  (meyering@comco.com)

	* cut.c, expand.c, join.c, nl.c: Always call error with errno
	(not zero) after failed fclose or non-zero ferror.

Sun Mar 28 16:59:31 1993  Mike Haertel  (mike@cs.uoregon.edu)

	* configure.in: Add check for working memcmp; use GNU's if
	the system's doesn't grok the 8th bit.
	* memcmp.c: Fix it so it groks the 8th bit.
	TODO: We really need to provide a fast memcmp, since most
	machines will have a broken memcmp.  Probably should get
	the one from glibc.
	* sort.c (mergefps): Maintain keybeg and keylim when copying
	the current line to `saved'.
	(numcompare): Skip white space here since -n no longer implies -b.
	(getmonth): Skip white space here since -M no longer implies -b.
	(compare): Completely overhauled to make the 8th bit work right,
	also to properly handle the global reverse option.
	(set_ordering): -n no longer implies -b, according to Posix.
	For consistency, -M also no longer implies -b.
	(main): Correct treatment of -r and global keys.
	(findlines): Clear keybeg and keylim if no keys are used.
	(sort): Avoid overwriting tempfiles[] array bounds.

Sun Mar 21 22:29:29 1993  Jim Meyering  (meyering@comco.com)

	* pr.c (close_file): Reverse May 13, '92 change, but add the condition
	that cols_ready_to_print not be decremented when printing across.
	The command `echo |pr -2ta' didn't terminate.
	(print_page): Rewrite conditional (that had side effects in second
	conjunct) using nested if statements to make it clear that we do
	indeed want those semantics.

Tue Jan 19 13:35:24 1993  David J. MacKenzie  (djm@kropotkin.gnu.ai.mit.edu)

	* Version 1.4.

	* system.h: Try BBSIZE if BSIZE isn't defined.
	From Tony Robinson <ajr@eng.cam.ac.uk>.

Sat Dec 12 12:37:00 1992  David J. MacKenzie  (djm@kropotkin.gnu.ai.mit.edu)

	* tail.c (tail_forever): Use an array of file descriptors
	instead of forking processes.
	(dump_remainder): Return number of bytes read.
	(tail_file): Fill in the new array.
	From Ian Lance Taylor.

Fri Dec 11 17:18:16 1992  David J. MacKenzie  (djm@kropotkin.gnu.ai.mit.edu)

	* system.h: Only define index, bcmp, etc. if not already defined.

Tue Dec  8 10:31:14 1992  Jim Meyering  (meyering@idefix.comco.com)

	* tr.c (is_char_class_member): Remove unreached return after abort.

Sun Dec  6 22:34:52 1992  Jim Meyering  (meyering@idefix.comco.com)

	* csplit, cut.c, expand.c, fold.c, head.c, join.c, od.c, pr.c,
	sort.c, split.c, tail.c, tr.c, unexpand.c, uniq.c:  Remove inclusion
	of <ctype.h> and definitions of is* ctype macros to system.h.
	Change a few more uses of is* ctype macros to (protected) upper
	case versions.

	* system.h: Add isascii-protected ctype IS* macros.

Wed Dec  2 12:28:10 1992  Jim Meyering  (meyering@idefix.comco.com)

	* all files using getopt.h: Convert static declarations of
	struct option to use new macros from getopt.h: no_argument,
	required_argument, and optional_argument.

Tue Dec 01 10:57:24 1992  Jim Meyering  (meyering@idefix.comco.com)

	* od.c, pr.c, sort.c: Make uses of ctype.h macros consistent.

	* tr.c (main): Close stdin and stdout and check return status.

Tue Nov 24 09:26:08 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* system.h, csplit.c: Use HAVE_FCNTL_H and HAVE_STRING_H
	instead of USG.

Tue Nov 24 08:42:30 1992  Jim Meyering  (meyering@idefix.comco.com)

	* tr.c: Define new macros ISPRINT, ISALNUM, ISXDIGIT, ... that
	use isascii if it is defined.
	(is_char_class_member, make_printable_char, make_printable_str,
	non_neg_strtol): Use new macros instead of lower case ones
	from <ctype.h>.

	* od.c (print_ascii, dump_strings): Use ISDIGIT and ISPRINT
	macros like pr.c.  Suggested by David J. MacKenzie.

	* od.c (print_ascii, dump_strings): Check for isascii before isprint.
	(dump_strings): Free malloc'd buffer before returning.
	(skip): Return non-zero if an error occurred, zero otherwise.
	Exit only if asked to skip beyond end of combined input.
	(check_and_close): New function.
	(skip, read_block, read_char): Call check_and_close when done
	processing the file associated with in_stream.
	(skip, read_block, read_char): Set have_read_stdin.
	(main): Close stdin (if it was ever read) and check for errors
	just before exiting.
	(write_block, dump_strings, dump): Don't test return value from
	functions that operate on streams.  Rely on later ferror tests.

Sat Nov 21 12:41:49 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* sort.c (main, usage): Add -T option.

Thu Nov 19 14:33:40 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* tail.c (tail_forever, sigusr1, kill_kids): New functions to
	do -f on multiple files.
	(main): Call tail_forever.
	From Ian Lance Taylor.

Tue Nov 10 14:29:11 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* cut.c (cut_fields): Add cast.

	* od.c (decode_one_format): Remove '#' from pre_fmt_string;
	many systems don't support it.
	Conditionalize long double support on __STDC__, not __GNUC__.
	From Ian Lance Taylor.

Mon Nov  9 00:24:41 1992  Jim Meyering  (meyering@idefix.comco.com)

	* sort.c (numcompare, keycompare): Add parentheses suggested
	by gcc -Wall.  Put braces around individual monthtab initializers.

	* cksum.c: Declare error.  Make checksum table `const.'

	* pr.c: Remove comment and dcl of unused variable, `print_a_number'.

	* split.c (main): Add `default: abort();' to enumeration switch.

	* All files: Make all functions and extern variables static.
	Make all longopts arrays const as well as static.
	Make a couple statically initialized aggregates `const.'

Sun Nov  8 19:46:59 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* od.c (main): Make old-style format options accumulate.
	From Jim Meyering.

Sat Nov  7 00:26:14 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* tr.c (look_up_char_class): Add cast.

	* nl.c (build_type_arg), csplit.c (extract_regexp), tac.c (main):
	Add `const' to variable receiving value from re_compile_pattern.

	* wc.c (wc): If doing only -c, use st_size for regular files.

	* fold.c (fold_file): Was folding 1 column too early.
	From Eric Backus <ericb@lsid.hp.com>.

	* memset.c: New file.

Fri Nov  6 20:14:51 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* cksum.c: New file.

Tue Oct 13 16:24:06 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* tac.c (tac_stdin): Handle SIGPIPE.
	* sort.c (main): Handle SIGTERM.

	* od.c: New file.

	* system.h [USG || STDC_HEADERS]: Define bcmp.

Sat Oct  3 20:41:24 1992  David J. MacKenzie  (djm@goldman.gnu.ai.mit.edu)

	* sort.c (main): Handle SIGPIPE.  From trq@dionysos.thphys.ox.ac.uk.

Tue Sep 29 01:10:05 1992  David J. MacKenzie  (djm@nutrimat.gnu.ai.mit.edu)

	* paste.c (main): Don't write on a string constant.

Mon Aug 24 00:02:45 1992  Jim Meyering  (meyering@churchy.gnu.ai.mit.edu)

	* tr.c: Minor cleanup.  Replaced some assert(0) with abort().

Tue Jul  7 02:14:19 1992  David J. MacKenzie  (djm@nutrimat.gnu.ai.mit.edu)

	* cmp.c, cmp.1: Move to diff distribution.

Fri Jul  3 16:37:59 1992  David J. MacKenzie  (djm@nutrimat.gnu.ai.mit.edu)

	* system.h: Change FOO_MISSING to HAVE_FOO.

Wed May 13 20:05:41 1992  David J. MacKenzie  (djm@churchy.gnu.ai.mit.edu)

	* pr.c (COLUMN): Add structure member to remember filename.
	(main, init_fps, open_file, close_file): Use it.

	(close_file): Don't decrement cols_ready_to_print when closing
	a file.  From cdl@mpl.UCSD.EDU (Carl Lowenstein).

Mon May 11 19:17:33 1992  David J. MacKenzie  (djm@churchy.gnu.ai.mit.edu)

	* cmp.c: --show-chars -> --print-chars.

	* pr.c: Rename some variables.

Sat May  9 18:39:47 1992  David J. MacKenzie  (djm@wookumz.gnu.ai.mit.edu)

	* system.h: Define DEV_BSIZE if not defined.

Wed Apr 22 02:15:09 1992  David J. MacKenzie  (djm@churchy.gnu.ai.mit.edu)

	* system.h, tac.c: SIGTYPE -> RETSIGTYPE.

Fri Apr 17 10:42:23 1992  David J. MacKenzie  (djm@wookumz.gnu.ai.mit.edu)

	* sort.c (main): Don't stop processing args when we hit "-";
	treat it like a regular filename.
	From ian@airs.com (Ian Lance Taylor).

	* pr.c (print_page): Fix off by one line count when ^L is in input.
	From Andreas Schwab (schwab@ls5.informatik.uni-dortmund.de).

Mon Apr  6 20:52:29 1992  Jim Meyering  (meyering@churchy.gnu.ai.mit.edu)

	* tr.c (validate): Change error message so it doesn't mention
	actual name of --truncate-set1 option.  From David MacKenzie.

Sun Apr  5 14:22:42 1992  Jim Meyering  (meyering@hal.gnu.ai.mit.edu)

	* tr.c (string2_extend, validate): Give an error message when
	translating without --truncate-set1, with empty string2, and
	with non-empty string1.  "tr 1 ''" produced a failed assertion.

Mon Mar 30 02:20:56 1992  David J. MacKenzie  (djm@wookumz.gnu.ai.mit.edu)

	* system.h: Change how ST_BLKSIZE is calculated to allow for
	non-POSIX systems that don't define BSIZE in sys/param.h.

Sat Mar 28 11:18:01 1992  David J. MacKenzie  (djm@wookumz.gnu.ai.mit.edu)

	* sum.c (main, bsd_sum_file): Don't print filename if BSD
	algorithm is used and only one file was given.

Wed Mar 25 11:34:41 1992  Jim Meyering  (meyering@wombat.gnu.ai.mit.edu)

	* tr.c (get_spec_stats): Fix assertion to allow ranges like a-a
	with starting character equal to ending character.  This is
	contrary to the POSIX spec, but what is already implemented
	in find_closing_delim.

Mon Mar 16 00:15:11 1992  David J. MacKenzie  (djm@wookumz.gnu.ai.mit.edu)

	* Version 1.3.

	* sort.c (numcompare, checkfp): Add parens to placate gcc2.

	* sort.c (mergefps): For -u, output the first, not last, of
	the lines that compare equal.  From Mike Haertel.

Tue Mar 10 10:51:38 1992  David J. MacKenzie  (djm@nutrimat.gnu.ai.mit.edu)

	* tr.c: Remove initial capitals and periods from error messages.

Sun Mar  8 22:03:45 1992  David J. MacKenzie  (djm@nutrimat.gnu.ai.mit.edu)

	* sum.c (main): Add -r option for SYSV compat.

Thu Feb 27 22:26:25 1992  David J. MacKenzie  (djm@wookumz.gnu.ai.mit.edu)

	* sort.c (compare): If -s given, leave lines in their original order.
	(main): Recognize -s.
	(usage): Document -s.
	From Mike Haertel.

Tue Feb 18 20:29:45 1992  Randall Smith  (randy at geech.gnu.ai.mit.edu)

	* sort.c (sort): Check for complete parsing of buffer into
	lines before nixing temp files.

Mon Feb 17 10:35:58 1992  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* sum.c (sysv_sum_file): Use %lu instead of %u to print a
	long.  Not that it matters for GNU . . .	

	* tr.c (unquote, make_printable_str): Use \007 instead of ANSI \a.
	(append_normal_char, append_range, append_char_class,
	append_repeated_char, append_equiv_class, spec_init):
	Initialize `next' field of new `struct List_element'.
	From rommel@informatik.tu-muenchen.de (Kai-Uwe Rommel).

Sat Feb  8 17:16:49 1992  David J. MacKenzie  (djm at apple-gunkies.gnu.ai.mit.edu)

	* join.c (get_line): Renamed from getline to avoid GNU libc conflict.

Sun Feb  2 21:22:01 1992  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* Version 1.2.

	* nl.c: Support multiple files and "-" for stdin.
	(main): Check for read and write errors.
	(nl_file): New function.

Wed Jan 29 10:09:10 1992  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* tr.c (main): -t option was called -b in getopt spec.
	(validate): Don't warn that set1 is longer than set2.

	* tr.c: Rename --sysv-string2-truncate to --truncate-string1.

Fri Jan 17 16:29:05 1992  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* nl.c: New program from bin-src.

	* nl.c (main): Use a struct linebuffer for line_buf.
	(process_file): Use readline instead of fgets, to preserve NULs.
	(check_section): Use memcmp instead of strncmp.
	(proc_text): Print line_buf with fwrite instead of printf.

	* nl.c (main): Usage message if too many args given.  Check
	for error in closing input file.  Lengths of section delimiter
	strings were 1 too large.  Take separator_str into account in
	length of print_no_line_fmt.
	(build_print_fmt): Allocate space for print_fmt, in case
	separator_str is long.
	(proc_text): A blank line is one that contains nothing, not
	even nonprinting characters.

Fri Jan 17 01:04:22 1992  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* All programs: Document `--' instead of `+' to introduce
	long-named options, in usage messages.

	* sum.c (bsd_sum_file): Renamed from sum_file.
	(sysv_sum_file): New function.
	(main): Recognize an option to select between the algorithms.

Sun Jan  5 17:41:18 1992  Jim Meyering (meyering at churchy.gnu.ai.mit.edu)

	* pr.c (close_file, print_page): Fixed bug that had the command
	yes |head |pr -t printing "yyyyyyyyyy".
	* (print_page): Fixed bug that had pr -3 -a printing two too few
	trailer lines per page.
	* (main): Added restriction that -a and -m are incompatible.
	Although the POSIX spec doesn't explicitly say they shouldn't
	be used together, it says -a modifies the -column option and
	that -column shouldn't be used with -m.

Thu Jan  2 15:23:59 1992  David J. MacKenzie  (djm at albert.gnu.ai.mit.edu)

	* nl.c: Include regex.h after, not before, sys/types.h.

Thu Jan  2 12:18:10 1992  Tom Lord  (lord at geech.gnu.ai.mit.edu)

	* sort.c (fillbuf) return bytes buffered instead of bytes read.

Fri Dec 27 22:53:36 1991  Jim Kingdon  (kingdon at geech.gnu.ai.mit.edu)

	* sort.c (LINEALLOC): New #define.
	(struct lines): New field ``limit''.
	(initlines): Set it from new arg ``limit''.
	(sort, mergefps, checkfp): Pass new arg to initlines().
	(findlines): Don't realloc past lines->limit.

Tue Dec 24 01:24:03 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* tac.c, sort.c, csplit.c, system.h: Change POSIX ifdefs to
	HAVE_UNISTD_H and _POSIX_VERSION.

	* xwrite.c: Change POSIX ifdef to HAVE_UNISTD_H.

Sat 14 Dec 1991 11:46:42  Jim Meyering  (meyering at wombat)

	* tr.c: Fixed an inaccurate comment on posix_pedantic.

Thu 12 Dec 1991 21:15:20  Jim Meyering  (meyering at hal)

	* tr.c: Changed underscores to hyphens in long option name
	"sysv_string2_truncate".

Wed Dec 11 13:33:34 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* tac.c (main): Set obscure_syntax to tell re_search to
	allocate memory for the group registers.

Fri Dec  6 18:26:27 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* tac.c, sort.c, csplit.c [POSIX]:  Use sigaction instead of
	signal, which POSIX doesn't have.
	* sort.c: Replace inthandler and huphandler with sighandler.
	* csplit.c (main): Only handle signals if they were not being
	ignored.

	* tr.c: POSIX_ME_HARDER -> POSIXLY_CORRECT.

Wed Dec  4 00:47:47 1991  Jim Meyering  (meyering at wombat)

	* tr.c (unquote): Reformat code so it doesn't go beyond column 80.
	* tr.c (squeeze_filter): Comment a little on why it's better
	to step through the input by two.
	* tr.c (set_initialize): Write a comment describing the function.
	* tr.c: Eliminated the variable `portability_warnings' and replaced
	references to it by references to `!posix_pedantic'.  One of the
	uses of portability_warnings had been wrong.

Tue Dec  3 14:03:35 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* tr.c: New program.

Sun Dec  1 15:07:35 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* linebuffer.[ch] (freebuffer): New function (used by cron).

Thu Oct 17 22:30:22 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* system.h, configure, Makefile.in: Don't include memory.h if
	STDC_HEADERS, removing need for MEMORY_H_MISSING.

Thu 17 Oct 1991 16:53:07  Jim Meyering  (meyering at wombat)

	* pr.c (print_page): REALLY fixed `extra newline at EOF' problem.
	Somehow, part of my patch didn't make it last time.

Sat Oct 12 12:04:47 1991  David J. MacKenzie  (djm at churchy.gnu.ai.mit.edu)

	* tail.c (pipe_lines, pipe_bytes): Initialize `first->next'.

	* cmp.c (cmp): Print EOF message to stderr, not stdout, for
	POSIX 1003.2.11.2.

	* sort.c (xfwrite): fwrite never returns < 0, so check if
	number written is number we asked to write.
	(fillbuf, main): fread never returns < 0, so check ferror instead.
	From Rainer Orth.

Tue Oct  8 18:07:08 1991  Jim Meyering  (meyering at churchy)

	* pr.c (print_page): Really fixed `extra newline at EOF' problem.
	* (store_columns): Fixed bug that caused `pr -b -2' to coredump
	on files of certain lengths.

Fri Oct  4 22:30:25 1991  Jim Meyering  (meyering at churchy)

	* pr.c (print_page): Fixed to not add single spurious newline
	at EOF when using -t.

Wed Oct  2 01:02:05 1991  David J. MacKenzie  (djm at apple-gunkies)

	* pr.c (print_page): Don't pad the page if -t given.

	* csplit.c (load_buffer), sort.c (mergefps): Use bcopy, not memcpy.

Thu Sep 26 12:35:00 1991  David J. MacKenzie  (djm at churchy.gnu.ai.mit.edu)

	* Version 1.1.

	* configure, system.h: Include memory.h if it works.

	* split.c: Allow `b' unit as well as `k' and `m'.

	* head.c, tail.c: Replace -b +blocks option with specifying
	units (b, k, or m) after the number.
	(parse_unit): New function.

	* fold.c (main): Check that -w arg is a number.

	* cut.c: +delimiter takes an arg.

Mon Sep 16 14:52:38 1991  David J. MacKenzie  (djm at churchy.gnu.ai.mit.edu)

	* pr.c (close_file): Don't close an already closed file.

Thu Sep 12 00:14:43 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* memchr.c: New file.
	* configure: Check if it's needed.

	* csplit.c, gcsplit.1: New program.

	* pr.c (cleanup): Only free buffers if they were allocated.

	* sort.c [!USG && !STDC_HEADERS]: Declare memchr.

Wed Sep 11 20:54:16 1991  Jim Meyering  (meyering at churchy)

	* pr.c: The following 3 bugs appeared (at least) when printing
	a  single file with the options `-3 -f'.
	* (print_white_space): Single spaces were being replaced
	with tabs.
	* (print_page): Some lines were getting too much white space
	at the beginning because spaces_not_printed wasn't being reset
	to 0.
	* (read_line): The single space between a truncated column
	on its left and the column on its right was omitted.  Fixed
	so that previous value of input_position is restored before
	returning FALSE.

Sat Sep  7 03:22:18 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* configure: Only remove /etc from PATH when it's not part of
	a larger name.

Wed Sep  4 17:09:24 1991  David J. MacKenzie  (djm at apple-gunkies)

	* linebuffer.c (readline): Fix incorrect recalculation of `end'.

	* head.c, tail.c: Replace `mode' variables and bitmasks with
	separate variables for each option.

Mon Sep  2 04:00:37 1991  David J. MacKenzie  (djm at apple-gunkies)

	* wc.c: New program.

Sun Sep  1 01:18:38 1991  David J. MacKenzie  (djm at apple-gunkies)

	* fold.c (fold_file): Read in an int, not a char, for EOF
	comparison. 

	* configure: Check whether st_blksize is missing.

	* tac.c (save_stdin): Put copy of pipe input in TMPDIR if
	defined, instead of /tmp.

Thu Aug 29 14:48:15 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* xwrite.c [POSIX]: unistd.h might require sys/types.h.

Wed Aug 28 11:57:39 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* paste.c (main): Consider -d "" to be like -d "\0",
	for POSIX (if I read it right).

	* sort.c, join.c: New programs.

	* cut.c (set_field): Allow blanks as well as commas to
	separate numbers in ranges.

Sun Aug 25 19:57:40 1991  Jim Meyering  (meyering at apple-gunkies)

	* pr.c: Failure to open an input file is no longer a fatal error.
	A message is printed for each failed open.  When printing
	in parallel, each failed open results in one fewer output column.
	Added POSIX -r option to suppress the message.
	* pr.c: Added variables: failed_opens, ignore_failed_opens.
	These changes were based in part on work by David MacKenzie.

Sat Aug 24 15:27:39 1991  Jim Meyering  (meyering at pogo)

	* pr.c: Complain if user gives both -m and -[0-9]+ options.

Wed Aug 21 22:04:57 1991  David J. MacKenzie  (djm at apple-gunkies)

	* Version 1.0.

Mon Aug 19 00:16:51 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* expand.c: Rename some variables.
	(expand): Don't access value off end of array.
	* unexpand.c: Rename some variables.
	(unexpand): Don't access value off end of array.
	Instead of copying tabs verbatim and flushing pending spaces
	when one is reached, count them as the proper number of
	pending spaces.  Instead of changing tabs to single spaces if
	the tabstop list is exhausted, print the rest of the line
	unchanged (for POSIX).

Sat Aug 17 01:49:41 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* cut.c (cut_file), paste.c (paste_parallel, paste_serial):
	Clear EOF and error conditions on stdin so it can be reused.

	* expand.c, unexpand.c (parse_tabstops): Allow blanks as well
	as commas to separate tabstops, for POSIX.
	* expand.c (expand), unexpand.c (unexpand): Don't line-buffer
	the output; send it directly to stdout.
	* unexpand.c (main): Make -t stupidly imply -a for POSIX.
	(unexpand): If a tab stop list was given and we move past its end,
	copy the rest of the line verbatim.

	* split.c (convint): New function to allow 'm' and 'k' after
	byte counts.
	(main): Use it.  Change -c option to -b for POSIX.

Fri Aug  9 02:47:02 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* pr.c: Protect isdigit with isascii, if required.

Tue Aug  6 21:42:25 1991  David J. MacKenzie  (djm at wheat-chex)

	Most of the following is from Paul Eggert:
	* cat.c (main): If stdin is read, check close at end.
	* cmp.c (main): Check for stdin being closed.
	Check for close errors on stdin and stdout.
	(cmp): Return a value instead of exiting.
	* cut.c (cut_file): New function, from code in main.
	Check for read errors.
	(main): Check for close errors.
	* expand.c, unexpand.c (main): Check for close errors.
	(next_file): Go to next file if one can't be opened.
	Check for close errors.
	* head.c (main), tail.c (main): If stdin was read, check for
	close errors.
	* head.c (head_file), tail.c (tail_file): Check for close errors.
	* paste.c (main, paste_parallel, paste_serial), tac.c (main):
	Check for close errors.  Close stdin if it was read.
	* split.c (main): Check for close errors.

	* configure, Makefile.in's: Support +srcdir option.
	Make config.status.  Fix up clean targets.

Wed Jul 31 01:32:59 1991  David J. MacKenzie  (djm at hal)

	* linebuffer.h (struct linebuffer): Add a field to indicate
	the number of valid chars in the line.
	* linebuffer.c (initbuffer, readline): Fill it in.
	* uniq.c, comm.c: Use it.

	* pr.c (main): Check stdin and stdout fclose for errors.
	(init_parameters): If there's no room for header and footer,
	omit them rather than dying (for POSIX).
	(init_header): Take a file descriptor as additional arg.
	(init_fps): Change callers.  Note when stdin is read.
	(open_file): For filename "-" use stdin.
	(close_file): Don't close stdin.  Check close for errors.
	(print_char, char_to_clump): Use isprint instead of explicit
	comparisons.

	* memcmp.c: New file (needed for comm).
	* bcopy.c: New file (needed for fold).
	* system.h: Don't define bcopy as memcpy.
	* configure: Check for bcopy and memcmp.

	* uniq.c (main): Use "-" instead of NULL to mean stdin or
	stdout.
	(check_file): Use "-" instead of NULL to mean stdin or stdout.
	Check readline return instead of for NUL character to
	detect eof.
	Check fclose for errors.
	(find_field): Use linebuffer length, not NULs, to detect end
	of line.
	(different): New function, replaces compare.  Uses memcmp
	instead of strncmp.
	(writeline): Use fwrite instead of fputs so NULs are preserved.

	* comm.c (compare_files): Return an error indication.
	Don't take a filename of NULL to mean stdin.
	Use memcmp instead of strcmp to allow for NULs.
	Check fclose for errors.
	(writeline): Use fwrite instead of fputs so NULs are preserved.

	* sum.c (sum_file): Take an arg indicating whether to print
	the filename, and don't take NULL meaning stdin.  Set a flag
	when we read stdin.  Check fclose return for errors.
	(main): If stdin was read, check fclose return for errors.
	Use filename of "-" if no args given.

Thu Jul 25 15:17:10 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* fold.c: Rewritten from scratch for POSIX.

Wed Jul 24 01:55:41 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* split.c (line_bytes_split): Use xmalloc instead of alloca.
	* system.h: Don't declare alloca.

	* tac.c, tail.c: Use SEEK_ instead of L_ for lseek.
	* system.h: Define SEEK_ macros if not defined.

	* pr.c: Rename variable `truncate' to avoid library function conflict.

Tue Jul 23 13:21:48 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* linebuffer.c, linebuffer.h: New files.
	* comm.c, uniq.c (initbuffer, readline): Functions
	removed (use versions in linebuffer.c).

Mon Jul 22 13:23:53 1991  David J. MacKenzie  (djm at wookumz.gnu.ai.mit.edu)

	* sum.c (sumfile): Always print 5 digits for second number, too.
	Interpret "-" to mean stdin.

Sat Jul 20 14:24:40 1991  David J. MacKenzie  (djm at bleen)

	* uniq.c: Use isblank instead of isspace, to support POSIX.2.
	* comm.c, pr.c, uniq.c (concat, fatal, error,
	pfatal_with_name, xmalloc, xrealloc): Functions removed.

Sat Jul 13 02:04:53 1991  David J. MacKenzie  (djm at geech.gnu.ai.mit.edu)

	* nl.c: Add long-named options.  Doc fixes.

Sat Jul  6 02:19:09 1991  David J. MacKenzie  (djm at geech.gnu.ai.mit.edu)

	* expand.c, unexpand.c [STDC_HEADERS]: Include stdlib.h.

	* xwrite.c [POSIX]: Include unistd.h.
	[STDC_HEADERS]: Don't declare errno.

Sun Jun 30 23:35:16 1991  David J. MacKenzie  (djm at geech.gnu.ai.mit.edu)

	* uniq.c: Add long-named options.  Remove marginally useful -z
	option (zero padded repeat counts).

Thu Jun 27 16:31:45 1991  David J. MacKenzie  (djm at geech.gnu.ai.mit.edu)

	* tail.c (tail_file), tac.c (save_stdin, tac_file), split.c
	(cwrite), head.c (head_file), cat.c (main): Check close return
	value for delayed error report due to NFS.

Tue Jun 11 00:12:15 1991  David J. MacKenzie  (djm at geech.gnu.ai.mit.edu)

	* cat.c: Replace "uchar" with "unsigned char", to avoid
	problems with various systems' typedefs.

Thu Jun  6 12:54:26 1991  David J. MacKenzie  (djm at geech.gnu.ai.mit.edu)

	* cat.c (cat): Interpret ENOTTY return from FIONREAD ioctl to mean
	operation is unsupported, for HP-UX 7.0.

Sun Apr 14 21:49:17 1991  Richard Stallman  (rms at mole.gnu.ai.mit.edu)

	* sum.c: Always print five digits for first number.

Fri Mar 15 16:16:54 1991  David J. MacKenzie  (djm at geech.ai.mit.edu)

	* cat.c, cmp.c: Don't use fileno(); not needed.

Thu Jan 10 02:16:55 1991  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* tac.c, tail.c: Change _POSIX_SOURCE to POSIX.

Thu Dec 27 00:06:45 1990  David J. MacKenzie  (djm at egypt)

	* cut.c (cut_file_bytes, cut_file_fields): Make inbufp and
	outbufp global.
	(enlarge_line): Adjust inbufp and outbufp.

Sun Sep  9 16:54:19 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* cat.c: Declare free returning void, not int, so it
	doesn't bomb on Xenix.

Mon Sep  3 22:23:57 1990  David J. MacKenzie  (djm at coke)

	* tac.c: Print error messages before calling cleanup, not after.

Tue Aug 28 18:05:24 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* tac.c (cleanup): Return SIGTYPE, not int.

Tue Aug  7 12:51:18 1990  David J. MacKenzie  (djm at apple-gunkies)

	* cut.c (main, usage): Add -b and -n options for POSIX.
	(set_fields): Don't allow SPC or TAB as number separators.

	* paste.c (paste_parallel): If open of any file fails, quit
	(for POSIX).

Mon Aug  6 22:14:13 1990  David J. MacKenzie  (djm at apple-gunkies)

	* pr.c: Add POSIX -F option (same as -f).

	* uniq.c (check_file): Allow '-' to mean stdin or stdout.

Mon Aug  6 14:43:30 1990  David J. MacKenzie  (djm at pogo.ai.mit.edu)

	* head.c, tail.c: Change `chars' to `bytes' globally.
	(main, usage): Use POSIX.2 draft 10 option syntax.

Sun Aug  5 11:51:12 1990  David J. MacKenzie  (djm at pogo.ai.mit.edu)

	* cat.c (main): Don't delay error messages, so they appear
	where expected.
	(main, simple_cat, cat): Make errors in input files nonfatal.

Sat Aug  4 10:11:30 1990  David J. MacKenzie  (djm at pogo.ai.mit.edu)

	* cat.c: Remove -c option added for POSIX draft 9, since POSIX
	draft 10 removed it. 

	* tac.c (tac_stdin): Use fstat instead of lseek to determine
	whether stdin is seekable, because lseek silently fails on
	some special files, like tty's.
	tail.c (tail_chars, tail_lines): Use fstat instead of lseek;
	don't turn off -f for non-regular files (assume the user knows
	what he's doing; it might work for fifo's and sockets).

	* paste.c (main): If no files given, use stdin.
	Don't let collapse_escapes write on string constant (delim default).
	(paste_parallel): Don't close stdin.

	* cut.c (main): Use standard input for filename of "-".

	* comm.c (compare_files): Allow '-' to mean stdin.

Fri Aug  3 13:38:28 1990  David J. MacKenzie  (djm at pogo.ai.mit.edu)

	* cut.c (enlarge_line): Take an arg giving the required amount
	of space.  Change callers.
	(main): Don't allow -t'<TAB>' without -f.
	Make `delim' unsigned to fix sign extension problem in comparison.

Tue Jul 17 12:36:11 EDT 1990  Jay Fenlason (hack@ai.mit.edu)

	* pr.c  Deleted excess whitespace from ends of lines.
		Modified to work with current version of getopt, which
		returns 1 instead of 0 for non-options.
		Reversed the meaning of the -f option, to be compatable
		with real pr.

Sun Jul  8 00:39:31 1990  David J. MacKenzie  (djm at apple-gunkies)

	* cmp.c (main, usage): Rename -L option to -c and don't have
	it imply -l. 
	(printc): Take an arg to specify number of chars to pad to,
	for column alignment.
	(cmp): Respect flag_print_chars in default output format.
	Align columns for cmp -cl.

Sat Jul  7 17:23:30 1990  David J. MacKenzie  (djm at apple-gunkies)

	* cmp.c: For +show-chars, have getopt return 'L' so
	`flag_print_chars' gets set.

Fri Jun 29 01:04:19 1990  David J. MacKenzie  (djm at apple-gunkies)

	* tac.c (main): Initialize fastmap and translate fields of
	regex before compiling it.

Fri Jun 22 00:38:20 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* tac.c: Change +regexp to +regex for consistency with GNU find.

Wed Jun 20 01:46:09 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* cat.c (cat): If FIONREAD is available, only use it if it is
	supported by the filesystem that the file is on.

Sun Jun  3 20:26:19 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* cat.c (main): Add a variable to control whether the check
	for input file == output file is made, because no values of
	st_dev and st_ino should be assumed to be available for this
	purpose.  Only do the check for regular files.

	* tac.c: Use bcopy instead of memcpy.

Thu May 31 00:55:36 1990  David J. MacKenzie  (djm at apple-gunkies)

	* head.c: Use longs instead of ints for file offsets, for 16
	bit machines.

Tue May 22 00:56:51 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* cmp.c: Change some ints to longs for 16 bit machines.
	(bcmp_cnt): Make char-pointer counting slightly simpler.

Sat May 12 01:16:42 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* cat.c (main): Allow input file to be output file for devices
	(ttys, etc.).  Check whether input file is output file when
	reading standard input.  Print any error messages for standard
	input. 

	* cmp.c (bcmp_cnt): Handle int comparisons correctly on 16 bit
	machines as well as 32 bit ones.
	* cmp.c, tail.c: Use longs instead of ints for file offsets. 

Fri May 11 02:11:03 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* cmp.c: Fix some exit statuses for POSIX.

Tue May  8 03:41:42 1990  David J. MacKenzie  (djm at abyss)

	* tac.c: Use regular expressions as the record boundaries.
	Give better error messages.
	Reformat code and make it more readable.
	(main): Use getopt_long to parse options.
	(tac_stdin): Do not make a temporary file if standard input
	is a file.
	(tac_file): New function.
	(tac): Take an open file desc as an arg.
	(output): Rewrite to use its own efficient buffering.
	(xmalloc, xrealloc, xwrite): New functions.

Sun Apr  8 20:33:20 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* head.c, tail.c: Use `error' instead of `fatal_perror' and
	`nonfatal_perror'.  Remove some unnecessary info from messages.

Wed Mar 21 09:30:18 1990  David J. MacKenzie  (djm at pogo.ai.mit.edu)

	* comm.c (main): Pass the list of files to compare_files as a
	char ** instead of a char *.
	(compare_files): Make arg a char **.

	* uniq.c: Declare some functions as void.
	Change global vars `countmode' and `mode' from ints to enums.
	(main): Use getopt to parse options and support POSIX options.
	Don't use integer_arg to parse numbers, since `-#' can't be
	parsed that way using getopt.
	(find_field): Use isspace for finding fields boundaries.

Tue Mar 20 14:28:25 1990  David J. MacKenzie  (djm at pogo.ai.mit.edu)

	* comm.c (main): Call usage if given bad option or wrong
	number of args.  Exit with 0 status normally.
	(usage): New function.
	Declare some other functions as void.

Wed Mar 14 10:48:40 1990  David J. MacKenzie  (djm at rice-chex)

	* cmp.c (main, cmp, usage): Replace -q +quick option with -L
	+show-chars option to add ASCII representation of bytes to -l format.

Tue Mar 13 00:50:14 1990  David J. MacKenzie  (djm at rice-chex)

	* cmp.c (cmp): Change EOF message for POSIX compatibility.
	For -l format, clear bits > FF.

Mon Mar  5 17:21:00 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* tail.c: Move global `errors' into main instead of having
	nonfatal_perror set it.
	(tail, tail_chars, tail_file, tail_lines, pipe_chars, pipe_lines):
	Return an error status.
	(file_lines, start_chars, start_lines): Reverse the meaning of
	the return value.
	(tail_lines, tail_chars): Account for that reversal.

Mon Mar  5 00:34:36 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* head.c: Move global `errors' into main and have the various
	functions return an error status instead of setting it in
	nonfatal_perror. 

Sat Mar  3 11:27:27 1990  Torbj|rn Granlund  (tege at echnaton)

	* cmp.c (cmp): Call function bcmp_cnt for flag == 0 (i.e. no
	  options specified), to compare the two blocks and count
	  newlines simultaneously.
	* cmp.c New function: bcmp_cnt.

	* cmp.c (main): Test if output is redirected to /dev/null, and
	  assume `-s' if this is so.

Tue Feb 20 17:09:19 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* cat.c: Change `argbad' from a char to a short, so it will
	work on machines with unsigned chars.

Sat Feb 10 02:16:40 1990  David J. MacKenzie  (djm at albert.ai.mit.edu)

	* cmp.c (cmp): Rename `r' to `first_diff', and `x' to `smaller'.
	Remove unneccessary variable `c1'.  If -l was given, increase
	`char_number' by the number of bytes read, after producing output,
	rather than by the offset of the first differing bytes, before
	producing output.
	Replace if-else-if constructions with case statements for clarity.
	(bcmp2): Rename `n' to `nread'.

Wed Dec 20 01:32:06 1989  David J. MacKenzie  (djm at hobbes.ai.mit.edu)

	* nl.c (proc_text): Use re_search instead of re_match.

Tue Dec 19 01:26:34 1989  David J. MacKenzie  (djm at hobbes.ai.mit.edu)

	* nl.c: Indent.  Un-nest statements.  Use GNU regexp functions
	instead of System V ones.  Move function declarations together.
	(quit): Remove useless function.
	(program_name): New variable for error messages.
	(main): Use perror in error message.
	(xmalloc): New function to replace myalloc.
	(myalloc): Function removed.
	Global: use program_name and xmalloc.

Sun Dec 17 00:36:36 1989  David J. MacKenzie  (djm at hobbes.ai.mit.edu)

	* uniq.c: Declare some functions.
	(main): Initialize infile and outfile.  Call usage if given
	invalid args.  Normally exit with 0 status instead of garbage.
	(usage): New function to print usage message and exit.
	(check_file): Remove unused variable.
	(readline): Compare against EOF, not < 0.
	(xmalloc, xrealloc): Return char *, not int.
	Ok to return 0 if 0 bytes requested.
	(lb1, lb2): Remove unused global vars.
	(concat): Remove unused function.

Sat Dec 16 15:15:50 1989  David J. MacKenzie  (djm at hobbes.ai.mit.edu)

	* comm.c: Remove unused global variables lb1, lb2.
	(main): Remove unneeded variable.
	(compare_files): Remove unused arg.
	(readline): un-nest assignment.  Test against EOF instead of < 0.
	(error): Print to stderr, not stdout.
	(xmalloc, xrealloc): Return char * instead of int.
	Returning 0 is ok if 0 bytes requested (ANSI C).


Local Variables:
mode: indented-text
left-margin: 8
version-control: never
End:
