SRCS= grasp_run.c parser.c actions.c windows.c pcdata.c utils.c \
      gif.c pcx.c pic.c libutils.c timer.c
OBJS= grasp_run.o parser.o actions.o windows.o pcdata.o utils.o \
      gif.o pcx.o pic.o libutils.o timer.o

all: xviewgl glunpack glcheck

xviewgl: $(OBJS)
	$(CC) $(CFLAGS) -o $@ $(OBJS) $(XLIB) -lm

noansi: de-ansify
	sh do_deansify

de-ansify: de-ansify.o
	$(CC) $(CFLAGS) -o $@ de-ansify.o

glunpack: glunpack.o
	$(CC) $(CFLAGS) -o $@ glunpack.o

glcheck: glcheck.o libutils.o utils.o
	$(CC) $(CFLAGS) -o $@ glcheck.o libutils.o utils.o

# pictoppm and ppmtopic must be hand built.

clean:
	rm -f *.o xviewgl glunpack glcheck noansi *.o de-ansify

kit: clean
	rm -f Makefile
	mv makefile.customize makefile
	mv -f system.h.vms system.h
	( if test -d ansi ; then mv ansi/* . ; rmdir ansi ; fi ; exit 0)

depend:
	@cat < /dev/null > makedep
	@for i in ${SRCS}; do \
		 ($(CC) -M $$i >> makedep); done
	@echo '/^# DO NOT DELETE THIS LINE/+1,$$d' > eddep
	@echo '$$r makedep' >> eddep
	@echo 'w' >> eddep
	@${CP} Makefile Makefile.bak
	@ed - Makefile < eddep
	@$(RM) -f eddep makedep
	@echo '# DO NOT EDIT THIS FILE HERE.' >> Makefile
	@echo '# USER EDITS MUST PRECEDE THE COMMENT:' >> Makefile
	@echo '# "# DO NOT DELETE THIS LINE".' >> Makefile
	@echo '# see make depend above' >> Makefile


# DO NOT DELETE THIS LINE -- make depend uses it

