<!-- PLMENU_002.HTML continuation of VDED$:[VDE.VDEDOC.DOC]PLMENU.HTML -->
<html>
<head>
<title>Release Project Leader Menu (PLMENU) DIGITAL CONFIDENTIAL</title>
</head>
<body bgcolor=white>
<font color=maroon>
<h1 align="center">Release Project Leader Menu (PLMENU) <br> <br> 
DIGITAL CONFIDENTIAL</h1>
</font>

<hr>
<table border=2>
  <tr>
    <td bgcolor=lightgoldenrodyellow width=150 align=center><a href="plmenu_001.html#bottom_001">Previous</a>
    <td bgcolor=cyan width=150 align=center><a href="plmenu_contents.html">Contents</a>
</table>

<hr>

<p>
<hr size=5>
<font color=maroon>
<a name="compare_stream"><h1>Chapter 7<br>Comparing VDE to CMS </h1></a>
</font>

<p>
This options allows you to check the consistency of a stream 
representation between VDE and CMS. The module generations in the VDE 
database are compared to the module generations in the CMS library.
<p>
<a name="sh_rqrdprvl_cs"><strong>Required Privileges</strong></a>
<br>

<p>
The process rights identifiers <strong>(VMS_SOURCE or VMS_SOURCE_READ) 
and VMS_ENABLE_CMS</strong> are required.

<a name="h1_icosp"><h1><font color=maroon>7.1 Invoking the compare stream procedure</font></h1></a>

<p>
The VDE to CMS comparison utility is invoked by selecting option 6 from 
the project leader main menu.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
What action do you want to perform? (1-6,EXIT,HELP): 6 
 
Compare Stream Version X-1 
 
Enter ? or "HELP" at any prompt to obtain help 
Prompt default values (if any) appear in brackets [] 
Enter &lt;Ctrl Z&gt;, "Quit" or "Exit" to exit immediately 
 
 Product Root [VMS$]: 
</pre>
</font>
</table>

<p>
Enter the product root. See <a href="plmenu.html#general">Chapter 2</a> for a definition of the product 
root.

<p>
The next prompt asks you for the stream you want to compare. This 
prompt defaults to the value of logical name 
PLMENU$DEFAULT_SOURCE_STREAM.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Stream to compare [V5.4]: 
</pre>
</font>
</table>

<p>
Enter the work directory where you want the utility's file(s) to reside.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
Directory for log files [WORK212:[SWEENEY.SCRATCH]]: 
</pre>
</font>
</table>

<p>
Enter the queue in which to run the compare stream batch job.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
Queue to submit compare job [CLUSTER_LONGBATCH]: 
</pre>
</font>
</table>

<p>
Indicate if you want the report of stream differences to be displayed 
in the log file (default) or written to a separate report file. If you 
do not give a directory specification to the file name, the report will 
be located in the work directory. The default file type is .LIS.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
Report file name ? [LOG]: TEST 
</pre>
</font>
</table>

<p>
Enter the facility to process. By default, the procedure submitted will 
compare VDE to CMS for all non-archived facilities in the product root. 
Archived facilities are skipped by the procedure. Facilities marked no 
propagation are compared by this procedure. You may enter a full 
facility name or a partial facility name with wildcards. For example 
you may enter SYS* to process all facilities beginning with SYS.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
Facility to process [ALL]:  SYS* 
</pre>
</font>
</table>

<p>
The procedure prompts you for the time to begin the compare job. This 
option is a read only function so there is no warning notice on any 
entered time.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
Time to submit compare job? [NOW]:+00:01 
</pre>
</font>
</table>

<p>
You are asked to confirm your comparison request.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 If you proceed you will submit a job to compare stream V5.4 for all 
 facilities matching the file specification VMS$:[SYS*.CMS]. 
 Differences in the stream will be reported to file 
 WORK212:[SWEENEY.SCRATCH]TEST.LIS; 
 
 Do you wish to proceed? [Yes]: 
Validating stream V5.4 in VDE... 
Job V54_COMPARE (queue CLUSTER_LONGBATCH, entry 526) holding until 13-APR-1992 09:17 
</pre>
</font>
</table>

<a name="h1_cosp"><h1><font color=maroon>7.2 Compare Stream Processing</font></h1></a>

<p>
The compare stream utility compares the stream for each facility 
matching the entered specification. For each facility, a message is 
displayed to the log file indicating whether the VDE stream and the CMS 
class differed or matched. Differences are reported to the location 
specified in the report file prompt.

<a name="h1_cosp_sugg"><h1><font color=maroon>7.3 Suggestions for Comparing Streams</font></h1></a>

<ul>
  <li>There are some known differences between CMS and VDE that can be 
  ignored. These differences are:

  <ol start=1 >
    <li>BASE_LEVEL.MAR in facility SYS. This module is updated in CMS only 
    by the system building tools.
    <li>Facilities AAA_VDE_TEST and YELLOW_TEST are testing facilities for 
    the tools group. Any differences encountered in these facilities may be 
    ignored.
  </ol>
  <li>A difference between VDE and CMS may be the result of a rolled back 
  VDE transaction. The difference is self-correcting once the transaction 
  is run successfully.
  <li>As mentioned in the populate stream section, if you allow changes 
  to a source stream during a population, you may encounter differences 
  in the target stream after the population. This is due to the fact that 
  the CMS populations take place after the VDE stream is populated.
</ul>

<p>
<hr size=5>
<font color=maroon>
<a name="create_fac"><h1>Chapter 8<br>Creating a New Facility</h1></a>
</font>

<p>
When you need to create a new facility on the masterpack, you can use 
this option to create the facility. This option creates the new 
facility in the VDE database and creates the facility CMS library. The 
utility creates three modules in the facility which are template files 
to be used for system building. The utility also sets up no propagation 
facilities in the most efficient manner.

<p>
The facility is created interactively. There is no batch procedure 
submitted by this option.
<p>
<a name="sh_rqrdprvl_nf"><strong>Required Privileges</strong></a>
<br>

<p>
The VDE privilege <strong>CREFAC</strong> is required to run this 
option. The process rights identifiers <strong>VMS_SOURCE and 
VMS_ENABLE_CMS</strong> are required.

<a name="h1_icfp"><h1><font color=maroon>8.1 Invoking the create facility procedure</font></h1></a>

<p>
To run the create facility procedure, choose option seven from the 
project leader main menu.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
What action do you want to perform? (1-7,EXIT,HELP): 7 
 
Create Facility Version X-1 
 
Enter ? or "HELP" at any prompt to obtain help 
Prompt default values (if any) appear in brackets [] 
Enter &lt;Ctrl&gt;Z, "Quit" or "Exit" to exit immediately 
 
 Product Root [TOOLS$]: 
</pre>
</font>
</table>

<p>
Enter the product root. See <a href="plmenu.html#general">Chapter 2</a> for a definition of the product 
root.

<p>
A stream needs to be defined for the facility. The stream should be the 
first development stream in which you expect the components of this 
facility to ship. For example, if you are creating a facility to hold 
the update files for version V5.5, you would enter V5.5 to this prompt.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Facility begins with what development stream? [MAIN]: 
</pre>
</font>
</table>

<p>
Enter the new facility name. The product root is checked to see if a 
CMS library for this facility already exists. If a CMS library is found 
you will receive an error.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Facility Name?: VIC 
 %CREFAC-E-ALREXISTS, facility VIC CMS library already exists! 
  Facility Name?: wrench 
</pre>
</font>
</table>

<p>
Enter a remark for the new facility. This remark is displayed by the 
VDE show facility command.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Remark string for wrench [wrench FACILITY]: Wrench test facility 
</pre>
</font>
</table>

<p>
If the facility will accept change propagation enter yes to the next 
prompt. If you are creating a facility to hold update files for a 
particular release you should answer no to this question.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Will facility wrench accept module change propagation? [YES]: 
</pre>
</font>
</table>

<p>
You are asked to confirm your input to proceed and create the facility.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 
 If you proceed you will create facility wrench in root TOOLS$. 
 Stream MAIN will be populated with three system build template files. 
 The facility is created by this procedure.  No batch job is submitted. 
 
    Do you wish to proceed? [Yes]:yes 
Validating stream MAIN in VDE... 
%CREFAC-I-CREATING, Creating facility wrench... 
%CREFAC-S-CREATED, facility wrench created 
 
</pre>
</font>
</table>

<a name="h1_cfp"><h1><font color=maroon>8.2 Create Facility Processing</font></h1></a>

<p>
The create facility processing is broken down as follows:

<ul>
  <li> The VDE facility and CMS library are created using the VDE create 
  facility command.
  <li>If the new facility is a no propagation facility, the file 
  VMSCMS$NO_PROPAGATE.FLAG is created in the facility directory.
  <li>Three modules are created in the facility. These three files are 
  templates you edit to perform a facility build. The three files are:

  <ol start=1 >
    <li>'facility name'BLD.COM - This file contains a template of a command 
    procedure to perform all the steps of a VMS system build. In the 
    example used in this chapter the file name is WRENCHBLD.COM.
    <li>'facility name'ASM.DAT - This is a specially formatted data file 
    that is used to contain information on which files to compile or 
    assemble in the facility. In the example used in this chapter, the file 
    name is WRENCHASM.DAT.
    <li>'facility name'LNK.COM - This is a command file where all link 
    commands needed to build the facility should be located.
  </ol>
  <li>The CMS group BUILD is created. The three build files created above 
  are inserted into the build group.
</ul>

<a name="h1_cfp_sugg"><h1><font color=maroon>8.3 Suggestions for Creating Facilities</font></h1></a>

<ul>
  <li>Be sure the propagation attribute for the facility is set 
  correctly. Unnecessarily propagating changes in a facility is expensive.
  <li>Remember, facilities used for holding a release's update files are 
  nopropagate facilities.
  <li>If the create facility procedure is abnormally terminated, it may 
  require manual intervention to correctly cleanup the facility.
</ul>

<p>
<hr size=5>
<font color=maroon>
<a name="pop_facs"><h1>Chapter 9<br>Populating a Stream in Selected Facilities</h1></a>
</font>

<p>
This option is virtually identical to the populate stream option. While 
the populate stream option populates the stream in all CMS libraries, 
this option only populates the facility CMS libraries which are 
specified in a data file, or in a user entered list. The populate 
facilities utility gives you the flexibility to populate both the CMS 
libraries and VDE database, the CMS libraries only, or, the VDE 
database only. The prompts are identical to the populate stream option 
except there are three additional questions. This option is useful when 
you know only a few facilities have changed since the previous 
population. It is important to realize that, if you populate the VDE 
stream, the population covers <strong>ALL facilities</strong>. The list 
of facilities to populate is used for controlling the CMS library 
populations and is ignored by the VDE population.
<p>
<a name="sh_rqrdprvl_pssf"><strong>Required Privileges</strong></a>
<br>

<p>
The populate selected facilities option requires that the user hold the 
VDE privileges <strong>FROZEN and PERFREP</strong> and the process 
rights identifiers <strong>VMS_ENABLE_CMS and VMS_SOURCE</strong>. If 
the user does not hold these privileges, the submitted batch job will 
fail.

<a name="h1_ipfp"><h1><font color=maroon>9.1 Invoking the populate facilities procedure</font></h1></a>

<p>
To populate a stream in selected facilities, use option eight from the 
main menu. The populate facilities command procedure executes.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 What action do you want to perform? (1-6,EXIT,HELP): 8 
 
Populate Facilities Version X-1 
 
Enter ? or "HELP" at any prompt to obtain help 
Prompt default values (if any) appear in brackets [] 
Enter &lt;Ctrl&gt;Z, "Quit" or "Exit" to exit immediately 
 
 Product Root [VMS$]: 
</pre>
</font>
</table>

<p>
Enter the product root. See <a href="plmenu.html#general">Chapter 2</a> for a definition of product 
root.

<p>
Next you are asked for the source stream for the population. The source 
stream is the stream to populate from, or, if you like, the stream for 
which to create a snapshot. Usually the source stream is a VMS 
development stream but this is not a requirement. The source stream is 
similar to the parent stream of the create stream option. The source 
stream defaults to the value of logical name 
PLMENU$DEFAULT_SOURCE_STREAM.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
Source Stream [V5.4]: V5.5 
</pre>
</font>
</table>

<p>
Upon entering the source stream you will be asked for the target stream 
to populate. This is usually a build stream for a development project. 
The target stream must have the VDE stream population attribute set for 
this procedure to work. The target stream defaults to the value of 
logical name PLMENU$DEFAULT_TARGET_STREAM.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Target Stream: V5.5_BLD_Z 
</pre>
</font>
</table>

<p>
The next question is used to determine if you want to interactively 
enter a list of facilities to process. If you answer affirmatively to 
this question, you are prompted for a list of facilities. If you answer 
"N"o to this question, you are asked to supply a file listing the 
facilities to process.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Do you want to enter the facilities to process? [Y]: help 
 
     Answer "Y"es if you want to interactively enter the facilities to process. 
     If you answer no, you will be expected to supply the name of a file 
     which lists the facilities to process.  Enter BACK or PREV to return to 
     the target stream prompt. 
 
     Do you want to enter the facilities to process? [Y]:&lt;RET&gt; 
     
</pre>
</font>
</table>

<p>
Enter the list of facilities to populate.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Enter a list of facilities delimited by commas(,)(256 character maximum) Hit &lt;RET&gt; to finish 
: help 
 
    Enter a list of facility names delimited by commas "," or enter one facility 
    name.  Enter BACK or PREV to return to the facility input prompt. 
 
 Enter a list of facilities delimited by commas(,)(256 character maximum) Hit &lt;RET&gt; to finish 
 : sys,sysloa,driver,starlet&lt;RET&gt; 
 
</pre>
</font>
</table>

<p>
If you did not indicate you wanted to enter a list of facilities, you 
are asked for the location of a file that lists the facilities to 
process. The file must be a text file with one facility name per 
record. For example, the file below is used to process facilities 
DRIVER, SYS and SYSLOA.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
$ type work$:[Sweeney.tools]facs.dat 
 SYS 
 SYSLOA 
 DRIVER 
$ 
</pre>
</font>
</table>

<p>
 Enter the facility list file specification. Your default directory is 
 searched for the file if you omit the directory from the file 
 specification.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Facility List File: work$:[Sweeney.tools]facs.dat 
</pre>
</font>
</table>

<p>
The next prompt is used to indicate how the VDE database and CMS 
libraries are to be populated. If you want to populate the stream in 
both the VDE database and the CMS libraries enter "BOTH" to this 
prompt. If you want to update the VDE database only, enter "VDE" to 
this prompt. If you want to populate only the facility "CMS" libraries, 
enter CMS.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Populate CMS, VDE or BOTH [BOTH]: BOTH 
</pre>
</font>
</table>

<p>
The populate stream job now prompts you for the queue to submit the 
populate jobs.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
Queue to submit populate jobs [CLUSTER_LONGBATCH] 
</pre>
</font>
</table>

<p>
You are now asked for the work directory into which to place the log 
file and work files produced by the procedure. The submitted job name 
is formatted as 'target_stream_name'_POP. In our example the job name 
is V55_BLD_Z_POP.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Directory for logs and work files [WORK212:[SWEENEY.SCRATCH]]: 
</pre>
</font>
</table>

<p>
The procedure prompts you for the time to begin the populate job. On 
weekdays, you are warned of possible masterpack disk contentions if you 
choose a time between 5:00AM and 5:00PM. You may submit the job at the 
entered time if you answer affirmatively to the "Do you still want to 
submit the job at the entered time? [N]:" question.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 Time to begin submission of populate jobs? [ 9-APR-1992 17:00:00]: NOW 
 
 Due to locking contention on the master pack, this job should be submitted 
 after 5:00PM and before 5:00AM on weekdays.  It is advised to avoid 
 submitting populations during regular working hours unless you are sure 
 the source stream and the target stream are almost identical. 
 
  Do you still want to submit the job at the entered time? [N]: YES 
</pre>
</font>
</table>

<p>
You are asked to confirm your population request.

<p>
<table border=0>
  <tr>
    <td bgcolor=blanchedalmond>
      <br>
      <font color=mediumblue><pre>
 If you proceed you will populate stream V5.5_BLD_Z from stream 
 V5.5 for the facilities listed in work$:[Sweeney.tools]facs.dat. 
 
 Do you wish to proceed? [Y]: 
Validating stream V5.5 in VDE... 
Validating stream V5.5_BLD_Z in VDE... 
Job V55_BLD_Z_POP (queue CLUSTER_LONGBATCH, entry 633) started on queue CLUSTER_LONGBATCH 
</pre>
</font>
</table>

<a name="h1_pfp"><h1><font color=maroon>9.2 Populate Facilities Processing</font></h1></a>

<p>
The populate stream batch job maintains a status file to indicate the 
current state of the stream population. Any warnings or errors 
encountered during the population are marked in this file. A population 
status is mailed to the user upon completion of the populate job. The 
populate batch job processing is summarized as follows:

<ol type=i start=1>
  <li>The target VDE stream is populated from the source VDE stream. The 
  population is broken down into many small RDB transactions to avoiding 
  locking out other update usage on the masterpack. If any error is 
  detected at this point, the batch job will terminate. The stream is 
  populated for ALL facilities due to the current implementation of the 
  VDE POPULATE STREAM command.
  <li>The procedure submits a batch job to perform the CMS insert 
  generation commands for every non-archived facility which is in the 
  facility list file. You are not allowed to populate archived facilities.
  <li>Each CMS insert generation procedure checks if the source stream 
  exists in the facility CMS library. If the source stream does not exist 
  a warning message will be output in the log file and into the procedure 
  status file. If the source stream exists, the target stream is 
  populated from the source. +
  <li>The procedure waits for the CMS insert generation batch jobs to 
  complete. When all jobs are complete the status file is checked for 
  errors. The user who submitted the job will receive a mail message 
  indicating the status of the population.
</ol>

<p>
<center>
<table bgcolor=lightskyblue border=0 width=75%>
  <tr>
    <td>
      <center><font size=+2 color=black><strong>Note </strong></font></center>
        <hr size=1 noshade>
        <font color=black>
        <h4><strong>+ </strong> The target class will be created in the CMS 
        library if it does not already exist.</h4>
    </font>
    </td>
  </tr>
</table>
</center>
<p>

<a name="h1_pfp_sugg"><h1><font color=maroon>9.3 Suggestions for populating facilities</font></h1></a>

<ul>
  <li><strong>NEVER DELETE AN EXECUTING CMS POPULATE JOB FROM THE 
  QUEUE.</strong> An improper termination of a CMS insert generation 
  command can corrupt a CMS library so, please don't delete the CMS 
  population jobs. A future version of CMS is supposed to correct this 
  problem. If you need to stop CMS population jobs from processing the 
  jobs can be stopped by defining the logical name FAC$ABORT_POPLIBS in 
  the system logical name table on all relevant nodes. The 
  FAC$ABORT_POPLIBS logical stops ALL populate jobs from processing. 
  After your jobs have stopped be sure to deassign this logical to allow 
  future populations to run successfully.
  <li>If the stream you are populating is very different from the source 
  stream please don't submit the populate during "regular" working hours.
  <li>Don't panic if you receive warning messages in the population 
  status. There may be facilities for future VMS releases that are not 
  applicable to your development stream.
  <li>If you are going to do a build with the target stream, it's not 
  wise to allow changes to the development stream during the population. 
  If you allow replacements into the development stream during the 
  population, the VDE representation of the build stream will differ from 
  the CMS representation of the build stream. This could be a source of 
  confusion after the build. Remember, it is the CMS representation of 
  the stream that is used to build VMS.
  <li>If your populate stream job fails, rerun the populate stream using 
  the same input.
  <li>If you fail to populate a facility in which the source stream has 
  changed since the previous population of the target stream, you will 
  cause the VDE stream representation to differ from the CMS 
  representation for the facility.
</ul>

<a name="bottom_002"></a>
<p>
<hr>
<table border=2>
  <tr>
    <td bgcolor=lightgoldenrodyellow width=150 align=center><a href="plmenu_001.html#bottom_001">Previous</a>
    <td bgcolor=aquamarine width=150 align=center><a href="plmenu_003.html">Next</a>
    <td bgcolor=cyan width=150 align=center><a href="plmenu_contents.html">Contents</a>
</table>
</body>
</html>
